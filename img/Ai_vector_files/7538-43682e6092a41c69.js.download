"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7538],{86512:function(e,t,l){l.d(t,{C:function(){return T}});var s=l(85893),i=l(47340),r=l(36647),a=l(67294);function n(e){let{size:t=16,color:l="white",className:i}=e;return(0,s.jsxs)(r.ny,{width:t,height:t,viewBox:"0 0 16 16",fill:l,xmlns:"http://www.w3.org/2000/svg",className:i,children:[(0,s.jsx)("path",{d:"M4.3865 12.607C4.41157 12.9849 4.56242 13.3382 4.80893 13.5964C5.05543 13.8547 5.37946 13.9988 5.71628 14H10.2834C10.6202 13.9988 10.9442 13.8547 11.1907 13.5964C11.4373 13.3382 11.5881 12.9849 11.6132 12.607L12.0327 6H3.96695L4.3865 12.607Z",fill:"white"}),(0,s.jsx)("path",{d:"M12.8887 4H10.2221V2.5C10.2221 2.36739 10.1752 2.24021 10.0919 2.14645C10.0085 2.05268 9.89549 2 9.77762 2H6.22206C6.10419 2 5.99114 2.05268 5.90779 2.14645C5.82444 2.24021 5.77762 2.36739 5.77762 2.5V4H3.11095C2.99307 4 2.88003 4.05268 2.79668 4.14645C2.71333 4.24021 2.6665 4.36739 2.6665 4.5C2.6665 4.63261 2.71333 4.75979 2.79668 4.85355C2.88003 4.94732 2.99307 5 3.11095 5H12.8887C13.0066 5 13.1196 4.94732 13.203 4.85355C13.2863 4.75979 13.3332 4.63261 13.3332 4.5C13.3332 4.36739 13.2863 4.24021 13.203 4.14645C13.1196 4.05268 13.0066 4 12.8887 4ZM6.6665 3H9.33317V4H6.6665V3Z",fill:"white"})]})}var o=l(55559),d=l(2662),c=l(96120),m=l.n(c);function x(e){let{isOpen:t,handleClose:l,onSubmit:i,image:r,aspect:n}=e,c=(0,a.useRef)(null),[x,u]=(0,a.useState)({x:10,y:10,width:80,height:80,unit:"%"}),[h,p]=(0,a.useState)();return(0,s.jsxs)(o.Z,{isOpen:t,handleClose:l,children:[(0,s.jsx)(d.Z,{onCancel:l,title:"Crop Image",onSubmit:()=>i(h)}),(0,s.jsx)(m(),{ruleOfThirds:!0,crop:x,onChange:(e,t)=>u(t),onComplete:(e,t)=>p(t),aspect:n,children:(0,s.jsx)("img",{ref:c,alt:"Crop Image",src:r})})]})}l(96167);var u=l(26392),h=l(70154),p=l(22197),f=l(64487),v=l(9598),g=l(48228),j=l(60789);let w=async e=>{let{assetId:t}=e;if(!t)throw Error("assetId is required");let l=await fetch("/api/image/createVariations",{credentials:"include",method:"POST",body:JSON.stringify({assetId:t})});return l.json()},N=e=>{let{assetId:t,options:l,onSuccess:s}=e,i=(0,v.d)(),{incrementVisibleItems:r}=(0,j.Ei)(),{setIsCreating:a}=(0,j.RO)();return(0,g.D)({...l,mutationFn:()=>w({assetId:t}),mutationKey:["createVariations",t],onSuccess:e=>{a(!1),null==s||s(e),r(),(0,h.wf)(e)},onError:e=>{a(!1),i("Could not create variations of image","error"),(0,f.Tb)(e)}})};var b=l(85459),y=l(16841),C=l(93162);let k=async e=>{try{e+=".jpeg";let t=await fetch(e),l=await t.blob();(0,C.saveAs)(l,e.split("/").pop())}catch(s){console.log(s),window.open(e,"_blank")}};var _=l(11163),I=l(47516),P=l(89583),Z=l(53854),M=l(79352),S=l(80471),z=l(30894),R=l(96486),U=l(37106),D=l(12100);let T=e=>{var t;let{index:l,asset:r,prompt:o,onUpdate:d}=e,[c,m]=a.useState(!1),{setIsCreating:f,isCreating:g}=(0,j.RO)(),w=(0,_.useRouter)(),{applyReferenceImage:C,setReferenceImage:T}=(0,j.YN)(),A=(0,p.Y)("upscaleAndVariation"),{setIsOpen:H}=(0,y.Tf)(),q=(0,v.d)(),L=a.useRef(null),{setControlNetItems:O}=(0,j.Od)(),{setOutput:E}=(0,j.tW)(),{setImageCount:V}=(0,j.ZT)(),{setQueuePosition:B}=(0,j.Qs)(),F=a.useMemo(()=>{var e;return(null===(e=o.provider)||void 0===e?void 0:e.name)==="Stable Diffusion XL"},[null===(t=o.provider)||void 0===t?void 0:t.name]),W=()=>{f(!1)},{mutate:X}=(0,b.X)({assetId:r.id,onSuccess:W}),{mutate:Y}=N({assetId:r.id,onSuccess:W}),G=(0,j.N9)(),K=e=>{(0,h.he)({id:o.id,assets:e})},J=e=>{let t=o.assets;K(t.filter(t=>t.id!==e)),er()},Q=e=>{if(!A){H(!0,"upscale");return}f(!0),B({position:1,totalTimeEstimate:20}),w.pathname.includes("create")||w.pathname.includes("feed")?w.asPath&&w.asPath.includes("prompt")&&w.push(w.pathname):w.push("/create"),X(),window.scrollTo(0,0),e.stopPropagation(),er()},$=async e=>{e.stopPropagation();let t=await fetch("/api/asset/".concat(r.id,"/isolate")).then(e=>e.json());(0,h.wf)(t);let l=o.assets;K(l.filter(e=>e.id!==r.id)),q("Success"),w.asPath.includes("create")||w.push("/prompt/".concat(t.post.data.id)),er()},ee=e=>{if(!A){H(!0,"variation");return}f(!0),w.pathname.includes("create")||w.pathname.includes("feed")?w.asPath&&w.asPath.includes("prompt")&&w.push(w.pathname):w.push("/create"),Y(),window.scrollTo(0,0),e.stopPropagation(),er()},et=e=>{e.stopPropagation(),m(!0),er()},el=e=>{e.stopPropagation(),k(r.cfUrl||r.src),er()},es=e=>{e.stopPropagation();let t=o.assets,l=null;1===t.length&&(l=setTimeout(()=>{(0,h.b_)(o.id)},1e4)),G(r,()=>{l&&(clearTimeout(l),l=null),K(t)}),J(r.id),er()},ei=e=>{e.stopPropagation(),T(void 0),C(r.cfUrl||r.src),w.asPath.includes("create")||w.push("/create?promptId="+o.id+"&skipRef=true&page=general"),er()},er=()=>{var e;null===(e=L.current)||void 0===e||e.click()},ea=async e=>{e.stopPropagation(),T(void 0);let t=await (0,j.n$)(r.cfUrl||r.src);V(1),E("large"),O([{enabled:!0,id:(0,R.uniqueId)(),image:t,isControlNetOutput:!1,maskImage:void 0,model:"tile",settings:{controlnet_conditioning_scale:.8,detection_resolution:512,canny_low_threshold:100,canny_high_threshold:200,mlsd_thr_v:.1,mlsd_thr_d:.1}},{enabled:!0,id:(0,R.uniqueId)(),image:t,isControlNetOutput:!1,maskImage:void 0,model:"hed",settings:{controlnet_conditioning_scale:.2,detection_resolution:512,canny_low_threshold:100,canny_high_threshold:200,mlsd_thr_v:.1,mlsd_thr_d:.1}}]),w.push("/create?promptId="+o.id+"&skipRef=true&page=general&autoCreate=true&skipCN=true"),er()},en=async e=>{e.stopPropagation(),T(void 0);let t=await (0,j.n$)(r.cfUrl||r.src);V(1),E("large"),O([{enabled:!0,id:(0,R.uniqueId)(),image:t,isControlNetOutput:!1,maskImage:void 0,model:"tile",settings:{controlnet_conditioning_scale:.2,detection_resolution:512,canny_low_threshold:100,canny_high_threshold:200,mlsd_thr_v:.1,mlsd_thr_d:.1}}]),w.push("/create?promptId="+o.id+"&skipRef=true&page=general&autoCreate=true&skipCN=true"),er()},eo=()=>{let e=document.createElement("textarea");e.value=r.src,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),q("Image URL copied to clipboard!")};return(0,s.jsxs)("div",{className:"z-30 lg:invisible group-hover:visible absolute top-2 right-2 text-center w-fit h-fit text-white md:flex flex-col justify-center items-center gap-1",children:[(0,s.jsx)("div",{className:"",children:(0,s.jsxs)(z.J2,{children:[(0,s.jsx)(z.xo,{children:(0,s.jsx)(i.Z,{rounded:!0,size:"icon",variant:"secondary",children:(0,s.jsx)(M.yjk,{size:16})})}),(0,s.jsxs)(z.yk,{align:"end",className:"",children:[o.assets.length>1&&(0,s.jsxs)(u.m,{onClick:$,icon:(0,s.jsx)(I.Zw4,{size:16}),children:["Post image separately"," "]}),(0,s.jsxs)(u.m,{disabled:g||F,onClick:ea,icon:(0,s.jsx)(U.Hcu,{size:16}),children:["Boost details",(0,s.jsx)("span",{className:"text-green-300 -ml-1 font-normal",children:"(beta)"})]}),(0,s.jsxs)(u.m,{disabled:g||F,onClick:en,icon:(0,s.jsx)(Z.NNQ,{size:16}),children:["Magic enhancer",(0,s.jsx)("span",{className:"text-green-300 -ml-1 font-normal",children:"(beta)"})]}),(0,s.jsx)(u.m,{disabled:g,onClick:Q,icon:(0,s.jsx)(P.U9w,{size:16}),children:"Upscale"}),(0,s.jsx)("div",{className:"hidden",children:(0,s.jsx)(u.m,{disabled:!0,onClick:ee,icon:(0,s.jsx)(D.Z,{size:16}),children:"Create variations"})}),(0,s.jsx)(u.m,{onClick:ei,icon:(0,s.jsx)(S.oNA,{size:16}),children:"Use as reference"}),(0,s.jsx)(u.m,{onClick:el,icon:(0,s.jsx)(Z.H_7,{size:16}),children:"Download"}),(0,s.jsx)(u.m,{onClick:eo,icon:(0,s.jsx)(I.BNl,{size:16}),children:"Copy image URL"}),(0,s.jsx)(u.m,{onClick:et,icon:(0,s.jsx)(I.GZo,{size:16}),children:"Crop"}),(0,s.jsx)(u.m,{onClick:es,icon:(0,s.jsx)(n,{size:16}),children:"Delete"}),(0,s.jsx)(z.xp,{ref:L})]})]})}),c&&(0,s.jsx)(x,{image:r.cfUrl||r.src,isOpen:!!c,aspect:r.width/r.height,handleClose:()=>m(!1),onSubmit:async e=>{let t=await fetch("/api/prompt/".concat(o.id),{method:"PATCH",body:JSON.stringify({crop:e,assetId:r.id}),headers:{"Content-Type":"application/json"}}),s=await t.json();(0,h.he)({id:o.id,assets:o.assets.map((e,t)=>({...t===l?{...e,cfUrl:s.cfUrl}:e,promptId:o.id,color:""}))}),null==d||d({...r,cfUrl:s.cfUrl}),m(!1)}})]})}},12100:function(e,t,l){l.d(t,{Z:function(){return i}});var s=l(85893);function i(e){let{size:t=24,color:l="white",className:i}=e;return(0,s.jsxs)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:l,xmlns:"http://www.w3.org/2000/svg",className:i,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00098 0C4.89641 0 4.00098 0.895431 4.00098 2V14C4.00098 15.1046 4.89641 16 6.00098 16H18.001C19.1055 16 20.001 15.1046 20.001 14V2C20.001 0.895431 19.1055 0 18.001 0H6.00098ZM10.6388 4.31885C10.6388 5.04723 10.0484 5.6377 9.32 5.6377C8.59162 5.6377 8.00115 5.04723 8.00115 4.31885C8.00115 3.59047 8.59162 3 9.32 3C10.0484 3 10.6388 3.59047 10.6388 4.31885ZM17.0304 13.2498H7.03287C6.09661 13.2498 5.48546 12.2672 5.89939 11.4274L7.11368 8.96388C7.51601 8.14762 8.62321 8.0114 9.2114 8.7058L9.49515 9.04078C10.0447 9.6895 11.0651 9.62145 11.5236 8.90552L13.4706 5.86528C14.0097 5.0235 15.2664 5.11126 15.6833 6.0198L18.179 11.4592C18.5631 12.2962 17.9514 13.2498 17.0304 13.2498Z",fill:l}),(0,s.jsx)("path",{d:"M8.00098 23C8.00098 22.4477 8.44869 22 9.00098 22H15.001C15.5533 22 16.001 22.4477 16.001 23C16.001 23.5523 15.5533 24 15.001 24H9.00098C8.44869 24 8.00098 23.5523 8.00098 23Z",fill:l}),(0,s.jsx)("path",{d:"M6.00098 19C6.00098 18.4477 6.44869 18 7.00098 18H17.001C17.5533 18 18.001 18.4477 18.001 19C18.001 19.5523 17.5533 20 17.001 20H7.00098C6.44869 20 6.00098 19.5523 6.00098 19Z",fill:l})]})}l(67294)},2662:function(e,t,l){l.d(t,{Z:function(){return r}});var s=l(85893);l(67294);var i=l(47340);function r(e){let{title:t,onSubmit:l,onCancel:r}=e;return(0,s.jsxs)("div",{className:"flex justify-between p-6 items-center w-full bg-neutral-900 z-50",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i.Z,{variant:"tertiary",size:"small",onClick:r,children:"Cancel"})}),(0,s.jsx)("div",{children:t}),(0,s.jsx)("div",{children:(0,s.jsx)(i.Z,{variant:"accent",size:"small",onClick:l,children:"Done"})})]})}},87538:function(e,t,l){l.r(t),l.d(t,{__N_SSP:function(){return eg},default:function(){return ej}});var s=l(85893),i=l(12185),r=l(79627),a=l(97349),n=l(4886),o=l(91254),d=l(41695),c=l(69031),m=l(65820),x=l(2962),u=l(9008),h=l.n(u),p=l(25675),f=l.n(p),v=l(41664),g=l.n(v),j=l(11163),w=l.n(j),N=l(67294),b=l(89583),y=l(84849),C=l(47340),k=l(770),_=l(89218),I=l(60789);let P=e=>{let{referenceImage:t,referenceMode:l,strength:i}=e,r=function(e){if(!e)return"Normal";let t=e.controlNetModel?"ControlNet - ".concat(e.controlNetModel):"Normal";return t}(l);return(0,s.jsxs)("div",{className:"flex gap-3 text-xs w-full items-center",children:[(0,s.jsx)("div",{className:"w-[100px] h-[100px]",children:(0,s.jsx)("a",{target:"_blank",href:t,rel:"noreferrer",className:"flex w-[100px] h-[100px] rounded-lg aspect-square overflow-hidden cursor-zoom-in",children:(0,s.jsx)("img",{src:t,alt:"Reference",className:"border-transparent bg-neutral-700 object-cover w-full object-center hover:opacity-80 hover:scale-110 transform transition duration-500"})})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-center items-start w-full grow shrink relative gap-0",children:[(0,s.jsx)("p",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Mode"}),(0,s.jsx)("p",{className:"text-left text-purple-300 font-mono",children:r})]}),void 0!==i&&(0,s.jsxs)("div",{className:"flex flex-col justify-center items-start w-full grow shrink relative gap-0",children:[(0,s.jsx)("p",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Image strength"}),(0,s.jsxs)("p",{className:"text-left text-emerald-200 font-mono",children:[i,"%"]})]})]})]})};var Z=l(80471);let M=e=>{let{controlNetImage:t,controlNetModel:l,strength:i}=e;return(0,s.jsxs)("div",{className:"flex gap-3 text-xs w-full items-center",children:[(0,s.jsx)("div",{className:"w-[100px] h-[100px]",children:(0,s.jsx)("a",{target:"_blank",href:t,rel:"noreferrer",className:"flex w-[100px] h-[100px] rounded-lg aspect-square overflow-hidden cursor-zoom-in",children:(0,s.jsx)("img",{src:t,alt:"Reference",className:"border-transparent bg-neutral-700 object-cover w-full object-center hover:opacity-80 hover:scale-110 transform transition duration-500"})})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-center items-start w-full grow shrink relative gap-0 ",children:[(0,s.jsx)("p",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Mode"}),(0,s.jsx)("p",{className:"text-left text-purple-300 font-mono",children:l})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-start w-full grow shrink relative gap-0 ",children:[(0,s.jsx)("p",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Strength"}),(0,s.jsxs)("p",{className:"text-left text-purple-300 font-mono",children:[i,"%"]})]})]})]})},S=e=>{let{meta:t,width:l,height:i,name:r,selectedAssetUrl:a}=e,n=N.useMemo(()=>{let e=null==a?void 0:a.split("_").pop();return e?isNaN(parseInt(e))?0:parseInt(e)-1:0},[a]),{applyReferenceImage:o}=(0,I.YN)(),d=e=>{(null==t?void 0:t.referenceImage)&&(e.stopPropagation(),o(null==t?void 0:t.referenceImage),w().push("/create"))},c=N.useMemo(()=>{if(null==t?void 0:t.engine)return(null==t?void 0:t.engine)==="stable-diffusion-v1-5"?"PhChroma2"===t.model?"PhChroma 2":"PhChroma3"===t.model?"PhChroma 3":"Stable Diffusion 1.5":"Stable Diffusion 2.1"},[null==t?void 0:t.model,null==t?void 0:t.engine]),m=N.useMemo(()=>{var e;if(!(null==t?void 0:t.controlNetImages))return[];let l=null==t?void 0:null===(e=t.controlNetItems)||void 0===e?void 0:e.filter(e=>"none"!==e.model),s=null==l?void 0:l.map(e=>e.model);return t.controlNetImages.map((e,i)=>{var r,a;let n=null==l?void 0:null===(r=l[i])||void 0===r?void 0:null===(a=r.settings)||void 0===a?void 0:a.controlnet_conditioning_scale;return void 0===n&&(n=1),{image:e,model:(null==s?void 0:s[i])||t.controlNetModel,strength:100*n}})},[null==t?void 0:t.controlNetImages,null==t?void 0:t.controlNetItems,null==t?void 0:t.controlNetModel]);return(0,s.jsxs)(s.Fragment,{children:[(null==t?void 0:t.referenceImage)&&(0,s.jsxs)("div",{className:"bg-white/10 flex flex-col mb-4 rounded-lg gap-4 p-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-4",children:(0,s.jsxs)("div",{className:"flex justify-between text-sm font-medium text-left ",children:[(0,s.jsx)("div",{className:"leading-5 w-full",children:"Reference image"}),(0,s.jsx)("button",{onClick:d,className:"opacity-50 hover:opacity-80",children:(0,s.jsxs)("div",{className:"flex text-xs w-fit gap-1 items-center",children:["Reuse ",(0,s.jsx)(Z.KRP,{size:16})]})})]})}),(0,s.jsx)(P,{referenceImage:t.referenceImage,referenceMode:{controlNetModel:t.controlNetModel},strength:t.promptStrength})]}),m.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white/10 flex flex-col mb-4 rounded-lg gap-4 p-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-4",children:(0,s.jsx)("div",{className:"flex justify-between text-sm font-medium text-left ",children:(0,s.jsx)("div",{className:"leading-5 w-full",children:"ControlNet"})})}),(0,s.jsx)(M,{controlNetImage:e.image,controlNetModel:e.model,strength:e.strength})]},t)),(0,s.jsxs)("div",{className:"bg-white/10 flex flex-col mb-4 p-6 rounded-lg gap-4 text-white text-xs",children:[c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Model"}),(0,s.jsx)("div",{className:"font-mono text-purple-300 line-clamp-1 text-md flex mb-1",children:c||r})]}),(null==t?void 0:t.cfg_scale)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Guidance"}),(0,s.jsx)("div",{className:"font-mono text-emerald-200 text-md flex mb-1",children:null==t?void 0:t.cfg_scale})]}),l&&i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Dimensions"}),(0,s.jsxs)("div",{className:"font-mono text-emerald-200 text-md flex",children:[l," x ",i]})]}),(null==t?void 0:t.sampler)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Sampler"}),(0,s.jsx)("div",{className:"font-mono text-purple-300 line-clamp-1 text-md flex mb-1",children:null==t?void 0:t.sampler})]}),(null==t?void 0:t.seed)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Seed"}),(0,s.jsx)("div",{className:"font-mono text-emerald-200 text-md flex mb-1",children:t.seed+n})]}),(null==t?void 0:t.steps)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex",children:"Steps"}),(0,s.jsx)("div",{className:"font-mono text-emerald-200 text-md flex mb-1",children:null==t?void 0:t.steps})]})]})]})};var z=l(86010),R=l(47516),U=l(63750),D=l(86893),T=l(49304);function A(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}let H=e=>{let{Icon:t,text:l,colorClassName:i,isNegative:r}=e,a=l?l.replaceAll(" ","+"):"";return(0,s.jsxs)(T.u,{placement:"top-start",children:[(0,s.jsx)(T.aJ,{children:(0,s.jsxs)("div",{className:"group flex flex-row items-center p-0 gap-2 w-full px-6 py-2 content-between lg:hover:ring-[1px] ring-inset lg:hover:ring-blue-500 hover:cursor-default",children:[(0,s.jsxs)("div",{className:"w-full flex flex-row items-center p-0 gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4",children:(0,s.jsx)(t,{className:i,size:16})}),(0,s.jsx)("div",{className:"flex flex-col items-start p-0",children:(0,s.jsx)("span",{className:(0,z.Z)("text-xs leading-5 font-normal w-full line-clamp-1",i),children:A(l)})})]}),(0,s.jsx)("div",{className:"w-fit items-center ",children:!r&&(0,s.jsx)(g(),{target:"_blank",href:"/search?q=".concat(a),className:"hover:bg-white/20 p-1 items-center justify-center rounded-md mb-0 pb-0 relative top-[2px] right-0",children:(0,s.jsx)("button",{className:"h-4 w-4",children:(0,s.jsx)("span",{className:"search-icon opacity-0 group-hover:opacity-100 items-center justify-center ",children:(0,s.jsx)(Z.lnn,{name:"chevron-right",size:14})})})})})]})}),(0,s.jsx)(T._v,{children:(0,s.jsx)("div",{className:"text-[10px] max-w-[260px]",children:A(l)})})]},l)},q=e=>{let{styles:t,isNegative:l,prompt:i}=e,[r,a]=N.useState(!0),n=()=>{a(!r)},[o,c]=N.useState(!1),m=N.useMemo(()=>r?t.slice(0,6):t,[t,r]),x=N.useMemo(()=>t.length>6,[t]),u=N.useMemo(()=>{let e=0;for(let l of t)if("subject"!==l.type&&("modifier"===l.type&&e++,"theme"===l.type)){let s=l.data.modifiers;for(let i of s)"subject"!==i.type&&e++}return e},[t]),h=N.useMemo(()=>{for(let e of t)if("theme"===e.type)return!0;return!1},[t]),p=N.useMemo(()=>(0,d.X)(i)||"",[i]);return(0,s.jsxs)("div",{className:"",children:[l&&(0,s.jsxs)("button",{onClick:()=>{u>0&&n()},className:"lg:hover:ring-[1px] ring-inset lg:hover:ring-blue-500 w-full px-6 py-2 flex items-center gap-2 text-neutral-400 text-xs font-medium ".concat(0===u?"cursor-default":""),children:[u>0&&(r?(0,s.jsx)(R.mfX,{size:16}):(0,s.jsx)(R.QBW,{size:16})),0===u?"No excluded styles":"Excluded (".concat(u,")")]})||(0,s.jsx)("div",{className:"text-sm leading-5 font-medium px-6 py-1",children:0===u?"No applied styles":"Styles used (".concat(u,")")}),(0,s.jsxs)("div",{className:(0,z.Z)("flex flex-col gap-0 py-2s ".concat(l?"ml-6":""),{hidden:l&&r}),children:[m.map(e=>{switch(e.type){case"subject":return h?null:(0,s.jsx)(H,{isNegative:l,Icon:U.OpK,colorClassName:"text-indigo-300",text:p},"subject");case"modifier":return(0,s.jsx)(H,{Icon:Z.BlD,text:e.data.name,colorClassName:"text-white",isNegative:l},e.data.id);case"theme":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{onClick:()=>c(!o),className:"group flex flex-row items-center p-0 gap-2 w-full px-6 py-2 content-between lg:hover:ring-[1px] ring-inset lg:hover:ring-blue-500 hover:cursor-default",children:(0,s.jsxs)("div",{className:"w-full flex flex-row items-center p-0 gap-2",children:[(0,s.jsx)("div",{className:"-ml-5 -mr-1 w-4 h-4 item-center justify-center",children:o?(0,s.jsx)(R.QBW,{className:"text-neutral-400 cursor-pointer w-4 h-4",name:"triangleArrowDown"}):(0,s.jsx)(R.mfX,{className:"text-neutral-400 cursor-pointer w-4 h-4",name:"triangleArrowDown"})}),(0,s.jsx)("div",{className:"w-4 h-4",children:(0,s.jsx)(U.y6p,{className:"text-emerald-200",size:16})}),(0,s.jsx)("div",{className:"flex flex-col items-start p-0",children:(0,s.jsx)("span",{className:"text-xs leading-5 font-normal text-emerald-200 w-full line-clamp-1",children:e.data.name})})]})},e.data.id),(0,s.jsx)("div",{className:(0,z.Z)("".concat(l?"":"ml-6"),{hidden:!o}),children:e.data.modifiers.map(e=>(0,s.jsx)(H,{isNegative:l,Icon:Z.BlD,text:"subject"===e.type?p:e.name,colorClassName:"subject"===e.type?"text-indigo-300":"text-emerald-200"},e.id))})]})}}),!l&&x&&(0,s.jsxs)("button",{onClick:n,className:"hover:bg-white/10 flex gap-2 mt-1 rounded-full w-fit text-left text-xs font-medium text-neutral-400 px-2 py-1 mx-4 mb-2",children:[(0,s.jsx)(D.K9M,{className:"text-neutral-400",size:16}),r?"View all":"View less"]})]})]})};var L=l(7297),O=l(36647),E=l(69429),V=l(19521);function B(){let e=(0,L.Z)(["\n  transition: background-color 0.1s;\n  :hover {\n    cursor: pointer;\n    background-color: #0c8ce9;\n  }\n"]);return B=function(){return e},e}let F=(0,V.ZP)(O.xv).withConfig({componentId:"sc-36a0f49-0"})(B()),W=[250,160,280],X=e=>{let{prompt:t,skeleton:l}=e,i=(0,E.Z)(t),[r,a]=(0,N.useState)(!0),n=(0,N.useMemo)(()=>i.length>99999,[i]),o=(0,N.useMemo)(()=>r?i.slice(0,99999):i,[r,i]);return l?(0,s.jsxs)(O.kC,{flexDirection:"column",children:[(0,s.jsx)(y.Z,{width:69,height:8}),(0,s.jsx)(O.kC,{flexDirection:"row",flexWrap:"wrap",children:W.map(e=>(0,s.jsx)(y.Z,{width:e,height:12,style:{marginRight:"8px"}},e))})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(O.kC,{flexDirection:"column",children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex mb-1 mt-4",children:"Prompt"}),(0,s.jsxs)(O.xu,{children:[o.map((e,t)=>(0,s.jsxs)("span",{children:[(0,s.jsx)(g(),{href:{pathname:"/search",query:{q:e.toLowerCase()}},passHref:!0,children:(0,s.jsx)(F,{className:"text-md md:text-xl text-white",color:"white",children:e})}),t<o.length-1&&(0,s.jsxs)(O.xv,{className:"text-md md:text-xl text-white",color:"white",opacity:.8,lineHeight:"28px",children:[","," "]})]},"".concat(e,"_").concat(t))),n&&(r?(0,s.jsx)(O.W4,{onClick:()=>a(!1),alignSelf:"flex-start",style:{cursor:"pointer"},children:(0,s.jsx)(O.xv,{className:"bg-red-500 px-4 text-md md:text-xl text-white font-bold flex ml-2 mt-1",color:"white",children:"More"})}):(0,s.jsx)(O.W4,{className:"px-4",onClick:()=>a(!0),alignSelf:"flex-start",style:{cursor:"pointer"},children:(0,s.jsx)(O.xv,{className:"bg-red-500 px-4 text-md md:text-xl text-white font-bold flex ml-2 mt-1",color:"white",children:"Less"})}))]})]})})};var Y=l(76445),G=l(99461),K=l(94661);let J=e=>{var t,l,i;let{data:r,display:a}=e;if(!r||!a)return(0,s.jsxs)("div",{className:"flex justify-start items-center flex-grow",children:[(0,s.jsx)("div",{className:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-4 pr-3",children:(0,s.jsx)(y.Z,{style:{borderRadius:48},width:48,height:48})}),(0,s.jsx)("div",{className:"flex justify-start items-center flex-grow gap-3",children:(0,s.jsxs)("div",{className:"flex flex-col justify-center items-start flex-grow",children:[(0,s.jsx)(y.Z,{width:200,height:8}),(0,s.jsx)(y.Z,{width:100,height:8})]})})]});let n=(0,c.p)(new Date(r.createdAt));return(0,s.jsxs)("div",{className:"flex justify-start items-center flex-grow gap-x-4",children:[(0,s.jsxs)("div",{className:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative gap-4",children:[(0,s.jsx)(G.Z,{seed:r.id.slice(-8),image:(null==r?void 0:r.user)&&(null==r?void 0:r.user.username)!=="prompthunt"?null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.image:null===(l=r.provider)||void 0===l?void 0:l.image,width:48,height:48}),(null==r?void 0:r.user)&&(null==r?void 0:r.user.username)!=="prompthunt"&&(0,s.jsx)("div",{className:"absolute flex justify-center items-center right-0 bottom-0 bg-neutral-800 bg-gradient-to-r from-[#1F1F1F]/50 to-[#363636]/50 rounded-full overflow-hidden translate-y-1/3 translate-x-1/3",children:(0,s.jsx)(G.Z,{seed:r.id.slice(-8),image:null===(i=r.provider)||void 0===i?void 0:i.image,width:24,height:24})})]}),(0,s.jsx)("div",{className:"flex justify-start items-center flex-grow gap-3",children:(0,s.jsxs)("div",{className:"flex flex-col gap-0.5 justify-center items-start flex-grow relative",children:[(0,s.jsx)("p",{className:(0,z.Z)("text-neutral-500 text-xs leading-4 font-normal overflow-x-auto",(null==r?void 0:r.user)&&(null==r?void 0:r.user.username)!=="prompthunt"&&"order-1"),children:(null==r?void 0:r.user)&&(null==r?void 0:r.user.username)!=="prompthunt"&&(0,s.jsx)("span",{className:"font-semibold gap-1",children:(0,s.jsx)(Y.$,{meta:r.meta,provider:r.provider||void 0})})}),(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)("label",{className:"self-stretch flex-grow-0 flex-shrink-0 text-base font-medium text-left text-white",children:(null==r?void 0:r.user)&&(null==r?void 0:r.user.username)!=="prompthunt"?(0,s.jsx)(g(),{href:"/user/".concat(null==r?void 0:r.user.username),children:null==r?void 0:r.user.username}):r.provider.name}),(null==r?void 0:r.user)&&(null==r?void 0:r.user.username)!=="prompthunt"&&(0,s.jsx)(K.Z,{subscriptionPlan:null==r?void 0:r.user.subscriptionPlan}),(0,s.jsx)("label",{className:"text-sm font-normal text-neutral-500",children:n})]})]})})]})};var Q=l(41660),$=l(22665),ee=l(96486),et=l(86512),el=l(48233),es=l(97435),ei=l(50207),er=l(16841),ea=l(91366),en=l(36492);async function eo(e){let t=await fetch("/api/user/".concat(e,"/prompts"),{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return t.json()}let ed=(e,t)=>(0,en.a)(["prompts",e],()=>eo(e),{...t,staleTime:3e5});var ec=l(30719),em=l(25500);function ex(e){let{items:t,...l}=e;return(0,s.jsx)(em.Z,{spaceBetween:0,...l,className:"",children:t.map((e,t)=>(0,s.jsx)(ec.o5,{className:"p-2",children:(0,s.jsx)("div",{className:"aspect-square rounded-2xl relative overflow-clip",children:e})},t))})}let eu={600:{slidesPerView:2},1024:{slidesPerView:4}};function eh(e){let{userId:t}=e,{data:l,isLoading:i}=ed(t);return i?(0,s.jsxs)("div",{className:"mb-10",children:[(0,s.jsx)(y.Z,{baseColor:"#1c1c1c",width:300,height:24,className:"rounded-lg mb-10"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-2 w-full",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(y.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-square w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(y.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-square w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(y.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-square w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(y.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-square w-full"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(y.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-square w-full"})})]})]}):null==l||null==t?null:(0,s.jsx)("div",{className:"mb-10",children:(0,s.jsx)(ex,{spaceBetween:0,slidesPerView:2.5,breakpoints:eu,items:l.prompts.map(e=>(0,s.jsx)(ea.Z,{width:200,data:e},e.id))})})}var ep=l(10615);l(12755);let ef=e=>{var t,l,u,p,v,w,y,I,P,Z,M,R,D,T,A,H,L,O,E,V,B,F,W,Y;let{isModal:G,promptId:K}=e,ea=(0,j.useRouter)(),en=(0,Q.Wd)("prompt"),eo=(0,el.d)(),{showNsfw:ed,setShowNsfw:ec}=(0,er.nf)(),{user:em}=(0,Q.kP)(),ex=K||en,{prompt:eu,isLoading:ef}=(0,a.R4)(ex,{staleTime:1/0,onError:()=>{ea.push("/404")},retry:!1}),eg=(0,Q.rY)({promptUserId:null===(t=eu.user)||void 0===t?void 0:t.id}),[ej,ew]=(0,N.useState)(!1),eN=(0,Q.Wd)("selectedAsset"),[eb,ey]=(0,N.useState)(0),eC=(0,N.useMemo)(()=>{var e,t;return null===(e=eu.theme)||void 0===e?void 0:null===(t=e.meta)||void 0===t?void 0:t.pixelArt},[null===(l=eu.theme)||void 0===l?void 0:l.meta]);(0,N.useEffect)(()=>{var e;(null===(e=eu.assets)||void 0===e?void 0:e.length)&&eu.assets[eb]&&ea.replace({pathname:ea.pathname,query:{...ea.query,selectedAsset:eu.assets[eb].id}},void 0,{shallow:!0})},[eb]);let ek=(0,N.useMemo)(()=>{var e;return!!eu&&null!==(e=eu.assets)&&void 0!==e&&!!e.length&&eu.assets.length>1},[eu]);(0,N.useEffect)(()=>{(0,es._V)(eu.id,eu.comments)},[eu]),(0,N.useEffect)(()=>{var e,t,l,s;ew(!((null===(e=null===(t=eu.meta)||void 0===t?void 0:t.valueOf())||void 0===e?void 0:null===(l=e.modifiers)||void 0===l?void 0:l.length)>0));let i=null===(s=eu.assets)||void 0===s?void 0:s.findIndex(e=>e.id===eN);-1!==i&&void 0!=i&&ey(i)},[eN,eu.assets,eu.meta]);let e_=()=>{eb<eu.assets.length-1?ey(eb+1):ey(0)},eI=()=>{eb>0?ey(eb-1):ey(eu.assets.length-1)},eP=(null===(u=null===(p=eu.meta)||void 0===p?void 0:p.valueOf())||void 0===u?void 0:null===(v=u.modifiers)||void 0===v?void 0:v.length)>0,eZ=(null==eu?void 0:eu.meta)?(0,d.X)(eu):"",eM=null===(w=eu.user)||void 0===w?void 0:w.username,eS=(0,N.useMemo)(()=>eu&&eu.prompt?(0,o.M)(eu):[],[eu]),ez=(0,N.useMemo)(()=>{if(!eu||!eu.prompt)return[];let e=(0,ee.get)(eu,"meta.negativeStyles",[]),t=e.filter(e=>"modifier"===e.type).map(e=>e.data),l=t.map(e=>({type:"modifier",data:e,id:e.id,enabled:"boolean"!=typeof e.enabled||e.enabled}));return l},[eu]),eR=(0,N.useCallback)(()=>{var e,t;(null===(e=eu.theme)||void 0===e?void 0:e.id)&&eo(null===(t=eu.theme)||void 0===t?void 0:t.id)},[null===(y=eu.theme)||void 0===y?void 0:y.id,eo]),eU=(0,N.useMemo)(()=>{var e,t;if(eu.assets)return(null==eu?void 0:null===(e=eu.assets)||void 0===e?void 0:e[eb])||(null==eu?void 0:null===(t=eu.assets)||void 0===t?void 0:t[0])},[eu,eb]),eD=(0,N.useMemo)(()=>{var e;if(!(null===(e=eu.reusePrompt)||void 0===e?void 0:e.prompt))return null;let t=(0,d.X)({prompt:eu.reusePrompt.prompt,meta:eu.meta});return t},[eu.meta,null==eu?void 0:null===(I=eu.reusePrompt)||void 0===I?void 0:I.prompt]),eT=(0,N.useMemo)(()=>null!=eu&&!!eu.prompt&&((0,ei.c)(eu.prompt)||eu.isNsfw),[eu.isNsfw,eu.prompt]);if(ef||!(null==eu?void 0:eu.assets))return null;let eA=e=>{(0,a.so)({id:e.promptId,assets:eu.assets.map(t=>t.id===e.id?e:t)})};return(0,s.jsxs)(k.Z,{noNavBar:G,children:[(0,s.jsx)(x.PB,{title:eM+": "+(eZ||"Prompt Hunt - Your home for exploring, creating, and sharing AI art"),description:"Create, explore, and share AI art using Stable Diffusion, DALL\xb7E, and Midjourney",openGraph:{title:eM+": "+(eZ||"Prompt Hunt - Your home for exploring, creating, and sharing AI art"),description:"Create, explore and share AI art using Stable Diffusion, DALL\xb7E, and Midjourney",images:eu.assets.map(e=>({url:null!==(W=e.cfUrl)&&void 0!==W?W:e.src,type:"image/png",secureUrl:null!==(Y=e.cfUrl)&&void 0!==Y?Y:e.src,width:e.width,height:e.height,alt:eZ})),type:"article"},twitter:{cardType:"summary_large_image"}}),(0,s.jsxs)(h(),{children:[(0,s.jsx)("meta",{name:"twitter:image",content:"/api/image/".concat(ex)}),(0,s.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,s.jsxs)("div",{className:"flex flex-col w-fit items m-auto mb-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsx)(J,{data:eu,display:["flex"]})}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row justify-center lg:space-x-20",children:[(0,s.jsx)("div",{className:"bg-red-500/0 w-fit flex flex-col",children:(0,s.jsx)("div",{className:"w-fit flex flex-column gap-y-10 lg:gap-y-6",children:(0,s.jsx)("div",{className:"w-full m-auto ",children:eu&&eu?(0,s.jsxs)("div",{className:"flex flex-col gap-y-6 lg:gap-y-10 relative",children:[(0,s.jsx)("div",{className:"w-full relative justify-center items-center",children:(0,s.jsx)("div",{className:"flex object-contain max-w-3xl w-fit m-auto group relative",children:(0,s.jsx)("div",{className:"items-center -mx-4 md:-mx-0 overflow-visible",children:eU&&(0,s.jsxs)("div",{className:(0,z.Z)("flex max-w-3xl w-fit md:rounded-3xl overflow-hidden relative items-center justify-center",eU.width<eU.height&&"max-w-[50vh]"),children:[(0,s.jsx)("div",{className:"aspect-w-1 relative aspect-h-1 !w-fit max-w-full",children:(0,s.jsxs)("div",{className:"group relative !w-fit",children:[eT&&(0,s.jsx)("div",{className:"absolute top-4 left-4 z-[100] flex gap-4",children:(0,s.jsxs)("button",{onClick:()=>ec(!ed),className:"text-xs p-2 bg-red-400 text-white rounded-full flex items-center justify-center gap-1",children:["NSFW ",ed?(0,s.jsx)(U.rCC,{}):(0,s.jsx)(U.I$m,{})]})}),eg&&(0,s.jsx)(et.C,{onUpdate:eA,asset:eU,prompt:eu,index:eb}),(0,s.jsx)("div",{children:(0,s.jsx)(ep.lr,{className:"bg-black/10 aspect-w-1 aspect-h-1 object-contain",showStatus:!1,showThumbs:!1,infiniteLoop:!1,verticalSwipe:"natural",autoPlay:!1,preventMovementUntilSwipeScrollTolerance:!0,swipeScrollTolerance:50,swipeable:!0,showArrows:!1,emulateTouch:!0,showIndicators:!!ek,selectedItem:eb,onChange:e=>ey(e),width:"100%",children:eu.assets.map(e=>(0,s.jsx)("div",{className:"flex aspect-w-1 aspect-h-1 md:max-h-[80vh]",children:(0,s.jsx)(f(),{unoptimized:!0,src:e.cfUrl||e.src,alt:eu.prompt||"",className:(0,z.Z)("object-contain",{"blur-2xl":eT&&!ed}),width:e.width,height:e.height,quality:100,blurDataURL:"data:image/svg+xml;base64,".concat((0,r.K)(e.width,e.height)),style:{imageRendering:eC?"pixelated":"auto"}})},e.id))})})]})}),ek&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"invisible lg:group-hover:visible z-10 absolute px-6 flex w-full h-fit self-center items-center justify-between",children:[(0,s.jsx)("button",{onClick:eI,className:"w-10 h-10 rounded-full outline-none bg-white text-black items-center hover:scale-125 transform transition-transform duration-300",children:(0,s.jsx)(b.bUI,{size:16,className:"ml-2.5"})}),(0,s.jsx)("button",{onClick:e_,className:"w-10 h-10 rounded-full outline-none bg-white text-black items-center hover:scale-125 transform transition-transform duration-300",children:(0,s.jsx)(b.Dli,{size:16,className:"ml-3"})})]})})]})})})}),ek&&(0,s.jsx)("div",{className:"flex justify-center gap-3 flex-wrap",children:eu.assets.map((e,t)=>(0,s.jsx)("div",{className:"relative ".concat(t===eb?"border-2 border-white":""," w-16 h-16 overflow-hidden rounded-lg lg:hover:opacity-80 lg:hover:scale-110 transition-transform"),children:(0,s.jsx)("img",{alt:eu.prompt?eu.prompt+t:"",src:e.cfUrl||e.src,className:"w-full h-full cursor-pointer object-cover ".concat(eT?"blur-2xl":""),onClick:()=>{ey(t)}})},(e.cfUrl||e.src)+t))}),eu.isRestricted&&(0,s.jsxs)("div",{className:" flex flex-col justify-center items-center gap-y-4",children:[(0,s.jsxs)("div",{className:"max-w-3xl flex justify-center items-center text-neutral-400 font-semibold rounded-lg gap-x-2 bg-neutral-800 py-2.5 px-4 w-full",children:[(0,s.jsx)(n.Z,{name:"lockLocked",size:18}),"Prompt hidden"]}),(0,s.jsxs)("span",{className:"text-neutral-400 text-sm font-medium text-center",children:[null===(P=eu.user)||void 0===P?void 0:P.username," has hidden all details about this creation"]})]}),(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)("div",{className:"w-full max-w-lg flex items-center gap-x-4",children:(0,s.jsx)($.x,{prompt:eu,moreActionsConfig:{delete:{show:!0,args:null},copy:{show:!0,args:null},private:{show:!0,args:null}},actionsConfig:{restrict:{show:!0,args:null},copy:{show:!1,args:null}}})})}),(0,s.jsxs)("div",{className:"w-full m-auto max-w-lg flex flex-col gap-y-6 mb-4 lg:mb-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-2 w-full text-left justify-start",children:[eP&&!eu.isRestricted&&eu.prompt&&(0,s.jsx)("h4",{className:"text-xl text-white mb-0",children:eZ}),(0,s.jsx)(m.M,{children:ej&&!eu.isRestricted&&eu.prompt&&(0,s.jsx)(X,{prompt:eu.prompt})}),eP&&!eu.isRestricted&&(0,s.jsx)(C.Z,{variant:"href",size:"small",className:"w-fit p-0 px-0 text-neutral-400 py-0",onClick:()=>ew(!ej),children:ej?"Hide prompt":"View prompt"}),(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest flex mb-1",children:(0,c.p)(new Date(eu.createdAt))})]}),(null==eu?void 0:eu.reusePrompt)&&(null==eu?void 0:null===(Z=eu.reusePrompt)||void 0===Z?void 0:Z.id)&&!eu.isRestricted&&(0,s.jsx)("div",{className:"bg-white/10 flex flex-col rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex justify-start items-center gap-4",children:[(0,s.jsx)("a",{target:"_blank",href:"/prompt/".concat(null==eu?void 0:eu.reusePrompt.id),rel:"noreferrer",className:"",children:(0,s.jsx)("div",{className:"flex w-[100px] h-[100px] rounded-lg aspect-square overflow-hidden cursor-zoom-in",children:(0,s.jsx)("img",{src:(null==eu?void 0:null===(M=eu.reusePrompt)||void 0===M?void 0:null===(R=M.assets)||void 0===R?void 0:R[0].cfUrl)||(null==eu?void 0:null===(D=eu.reusePrompt)||void 0===D?void 0:null===(T=D.assets)||void 0===T?void 0:T[0].url)||"",alt:"Creation",className:"border-transparent bg-neutral-700 object-cover w-full h-full object-center hover:opacity-80 hover:scale-110 transform transition duration-500"})})}),(0,s.jsxs)("div",{className:"w-fit flex flex-col justify-start items-start relative",children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest mb-1",children:"Original Creation"}),(0,s.jsx)("div",{className:"flex flex-col justify-start items-start",children:(0,s.jsx)("div",{className:"flex justify-start items-start gap-2",children:(0,s.jsxs)(g(),{href:"/prompt/".concat(null==eu?void 0:eu.reusePrompt.id),children:[(0,s.jsx)("p",{className:"text-sm text-left text-white/80 line-clamp-2 mb-1",children:eD})," "]})})}),(0,s.jsxs)(g(),{href:"/user/".concat(eu.reusePrompt.user.username),className:"text-neutral-400 text-xs leading-5 font-normal lg:hover:underline",children:["by ",(0,s.jsxs)("span",{children:["@",eu.reusePrompt.user.username]})]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-small uppercase tracking-widest flex mb-1",children:"Comments"}),(0,s.jsx)(i.F,{parentId:eu.id,parentUserId:null===(A=eu.user)||void 0===A?void 0:A.id,type:"prompt"})]})]})]}):(0,s.jsx)(ev,{})})})}),!eu.isRestricted&&(0,s.jsxs)("div",{className:"flex flex-col w-full lg:w-80 gap-4",children:[(null==eu?void 0:eu.theme)&&(null==eu?void 0:eu.theme.id)&&!eu.isRestricted&&(0,s.jsx)("div",{className:"bg-white/10 flex flex-col rounded-lg p-6",children:(0,s.jsx)("div",{className:"flex flex-col gap-4",children:(0,s.jsxs)("div",{className:"flex justify-start items-center self-stretch gap-4",children:[(0,s.jsx)(g(),{href:"/theme/".concat(null==eu?void 0:eu.theme.id),className:"w-fit",children:(0,s.jsx)("div",{className:"overflow-clip border-transparent h-16 w-16 flex-none rounded-lg bg-neutral-700 object-cover object-center aspect-square",children:(0,s.jsx)(f(),{unoptimized:!0,alt:"",width:100,height:100,src:(null==eu?void 0:eu.theme.image)||"",className:""})})}),(0,s.jsxs)("div",{className:"flex flex-col justify-start items-start grow shrink relative",children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest mb-1",children:"TEMPLATE USED"}),(0,s.jsx)("div",{className:"flex flex-col justify-start items-start grow shrink",children:(0,s.jsx)("div",{className:"flex justify-start items-start grow shrink relative gap-2",children:(0,s.jsx)(g(),{href:"/theme/".concat(null==eu?void 0:eu.theme.id),children:(0,s.jsx)("p",{className:"grow shrink text-sm text-left text-white line-clamp-1",children:eu.theme.name})})})})]}),(0,s.jsx)(C.Z,{size:"small",variant:"accent",className:"w-auto",onClick:eR,children:"Try"})]})})}),(0,s.jsxs)("div",{className:"bg-white/10 flex flex-col rounded-lg gap-0 py-4",children:[eS&&!eu.isRestricted&&eu.prompt?(0,s.jsx)(q,{styles:eS,prompt:eu}):null,ez&&!eu.isRestricted&&eu.prompt?(0,s.jsx)(q,{isNegative:!0,styles:ez,prompt:eu}):null]}),!eu.isRestricted&&(null===(H=eu.assets)||void 0===H?void 0:H[0])&&(0,s.jsx)("div",{className:"",children:(0,s.jsx)(S,{id:eu.id,meta:eu.meta,width:eu.assets[0].width,height:eu.assets[0].height,name:null==eu?void 0:null===(L=eu.provider)||void 0===L?void 0:L.name,selectedAssetUrl:null===(O=eu.assets[eb])||void 0===O?void 0:O.src})})]})]})]}),!!em&&(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-y-6 lg:gap-y-10",children:(0,s.jsxs)("p",{className:"text-[10px] lg:text-2xl font-medium text-left lg:text-center uppercase lg:normal-case text-neutral-400 tracking-wider lg:tracking-normal",children:["More by ",null===(E=eu.user)||void 0===E?void 0:E.username]})}),(null===(V=eu.user)||void 0===V?void 0:V.id)&&(0,s.jsx)(eh,{userId:null===(B=eu.user)||void 0===B?void 0:B.id}),(0,s.jsx)("div",{className:"flex flex-col gap-y-6 lg:gap-y-10",children:(0,s.jsx)("p",{className:"text-[10px] lg:text-2xl font-medium text-left lg:text-center uppercase lg:normal-case text-neutral-400 tracking-wider lg:tracking-normal",children:"More prompts"})}),(0,s.jsx)(_.Z,{themeId:null===(F=eu.theme)||void 0===F?void 0:F.id,query:"",excludePrompt:eu.id})]})]})},ev=()=>(0,s.jsxs)(O.rj,{gridTemplateColumns:["1fr"],gridGap:[6,null,9],mb:"48px",children:[(0,s.jsx)(O.xu,{height:[350,450,750],children:(0,s.jsx)(y.Z,{height:"100%",style:{borderRadius:16}})}),(0,s.jsx)(O.kC,{flexDirection:"column",justifyContent:"space-between",children:(0,s.jsx)(O.kC,{flexDirection:"column",children:(0,s.jsx)(X,{prompt:"",skeleton:!0})})})]});var eg=!0,ej=ef},91254:function(e,t,l){l.d(t,{M:function(){return r}});var s=l(96486),i=l(41695);let r=e=>{var t;let l=[],r=(0,i.X)(e),a=(0,s.cloneDeep)((0,s.get)(e,"meta.modifiers",[])),n="string"==typeof e.themeId,o=(0,s.cloneDeep)((0,s.get)(e,"theme.modifiers",null)),d=null===(t=null==o?void 0:o.find(e=>"theme"===e.type))||void 0===t?void 0:t.data,c=null==d?void 0:d.modifiers;c&&(null==o||o.push(...c));let m=r?e.prompt.indexOf(r):0,x=a.map(t=>e.prompt.indexOf(t.name)),u=0;for(let h=0;h<x.length;h++)if(m<x[h]){u=h;break}for(let p of(a.splice(u,0,{id:"subject",name:r||"",type:"subject",enabled:!0,categories:[],strength:0,verified:!0}),a))if(p.type){if("modifier"===p.type){if(n&&o){let f=o.find(e=>e.id===p.id);f?e.themeId&&!l.find(e=>"theme"===e.type)&&l.push({id:e.themeId,type:"theme",data:e.theme,enabled:!0}):l.push({id:p.id,type:"modifier",data:p,enabled:!0})}else l.push({id:p.id,type:"modifier",data:p,enabled:!0})}else"subject"===p.type&&l.push({id:"subject",type:"subject",data:"subject",enabled:!!p.enabled,weight:p.weight||"100%"})}else l.push({id:p.id,type:"modifier",data:p,enabled:!0});return l}}}]);
//# sourceMappingURL=7538-43682e6092a41c69.js.map