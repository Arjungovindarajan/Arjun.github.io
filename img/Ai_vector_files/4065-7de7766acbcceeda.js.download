(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4065],{12185:function(e,t,s){"use strict";s.d(t,{F:function(){return C}});var l=s(85893),n=s(99461),a=s(97435),r=s(41660),i=s(36492),o=s(86010),c=s(67294),d=s(5434),u=s(84849),m=s(41664),h=s.n(m),x=s(6799),f=s(12459),p=s(65820),v=s(63387);let w=e=>{let t=new URL(e);return("prompthunt.com"===t.hostname||"localhost"===t.hostname)&&t.pathname.startsWith("/prompt")?t.pathname.replace("/prompt/",""):null},j=e=>{let t=new URL(e);return("prompthunt.com"===t.hostname||"localhost"===t.hostname)&&t.pathname.startsWith("/theme")?t.pathname.replace("/theme/",""):null};function g(e){let{content:t}=e,[s,n]=c.useState(null),[a,r]=c.useState(null);(0,c.useEffect)(()=>{let e=(0,f.Z)(t),s=Array.from(e).find(e=>j(e)||w(e));s&&w(s)?n({type:"prompt",id:w(s)}):s&&j(s)&&n({type:"theme",id:j(s)})},[t]),(0,c.useEffect)(()=>{s&&fetch("/api/".concat(s.type,"/").concat(s.id)).then(e=>e.json()).then(e=>{"prompt"===s.type?r({title:e.prompts[0].prompt,description:"by ".concat(e.prompts[0].user.username),images:e.prompts[0].assets.map(e=>e.cfUrl||e.src)}):"theme"===s.type&&r({title:e.name,images:e.thumbnails||void 0,description:""})}).catch(e=>{console.log(e)})},[s]);let i=c.useMemo(()=>(null==a?void 0:a.images)||[],[null==a?void 0:a.images]);return null===s?null:(0,l.jsx)(p.M,{children:a&&(0,l.jsx)(v.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,l.jsx)(h(),{href:"/".concat(s.type,"/").concat(s.id),children:(0,l.jsxs)("div",{className:"w-52 ml-14 rounded-2xl border border-neutral-700 overflow-hidden mt-1 hover:border-neutral-500 transition-colors relative",children:[(0,l.jsxs)("div",{className:(0,o.Z)("w-52 aspect-square",i.length>1&&"grid grid-cols-2 gap-2"),children:[1===i.length&&(0,l.jsx)("img",{src:i[0],alt:"",className:"w-52 object-cover aspect-square"}),i.length>1&&i.map(e=>(0,l.jsx)("img",{src:e,alt:"",className:"w-52 object-cover aspect-square rounded-md overflow-hidden"},e))]}),(0,l.jsxs)("div",{className:"px-2 py-1",children:[(0,l.jsx)("h6",{className:" text-sm text-neutral-200 whitespace-nowrap text-ellipsis overflow-hidden",children:a.title}),(0,l.jsx)("span",{className:"text-xs text-neutral-400",children:a.description})]})]})})})})}var N=s(60155);s(83180);var b=s(31825);let y=e=>{var t,s,a,r;let{comment:i,isDeletable:o=!1,onDelete:c,setCommentAreaContent:d}=e,u=(0,b.I)(new Date(i.createdAt));if(!i.user)return null;let m=()=>{i.user&&d("@".concat(i.user.username," "))};return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full max-w-lg items-center",children:[(0,l.jsx)("div",{className:"w-9 pt-1",children:(0,l.jsx)(h(),{href:"/user/".concat(i.user.username),children:(0,l.jsx)(n.Z,{seed:(null!==(r=null===(t=i.user)||void 0===t?void 0:t.id)&&void 0!==r?r:"username").slice(-8),image:i.user.image,width:36,height:36})})}),(0,l.jsxs)("div",{className:"w-full flex",children:[(0,l.jsx)("div",{className:"flex flex-col items-start justify-center p-0 w-full",children:(0,l.jsxs)("div",{className:"flex flex-col justify-between w-full",children:[(0,l.jsx)(h(),{href:"/user/".concat(null===(s=i.user)||void 0===s?void 0:s.username),children:(0,l.jsx)("label",{className:"hover:underline text-sm leading-5 font-semibold text-white cursor-pointer",children:null===(a=i.user)||void 0===a?void 0:a.username})}),(0,l.jsx)(x.Z,{as:"label",className:"text-sm leading-5 font-thin text-white break-all",options:{formatHref:{mention:e=>"/user".concat(e)},className:"text-blue-400",mentionClassName:"text-blue-400"},children:i.content}),(0,l.jsxs)("div",{className:"text-white flex flex-row items-start p-0 gap-3 mt-0.5",children:[(0,l.jsx)("div",{onClick:m,className:"text-xs leading-4 font-semibold hover:underline hover:cursor-pointer",children:"Reply"}),(0,l.jsx)("div",{className:"text-xs leading-4 font-normal",children:u})]})]})}),o&&(0,l.jsx)("button",{onClick:c,className:"text-neutral-700 transition-colors text-xl hover:text-white focus:text-white rounded-full",children:(0,l.jsx)(N.R5A,{})})]})]}),(0,l.jsx)(g,{content:i.content})]})},C=e=>{var t;let{parentId:s,type:m="prompt",parentUserId:h,isLoading:x}=e,{user:f}=(0,r.kP)(),[p,v]=c.useState(""),[w,j]=c.useState(!0),g=c.useRef(null),{data:N}=(0,i.a)(["comments",s]),b=async()=>{if(!f)return;let e={content:p};v(""),(0,a.Ir)(s,{id:"new",content:e.content,user:{id:f.id,username:f.username,image:f.image},createdAt:new Date}),v("");let t=await fetch("/api/".concat(m,"/").concat(s,"/comment"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}),l=await t.json();(0,a.PN)(s,"new"),(0,a.Ir)(s,{id:l.id,content:e.content,user:{id:f.id,username:f.username,image:f.image},createdAt:new Date}),v("")},C=async e=>{f&&((0,a.PN)(s,e),fetch("/api/".concat(m,"/").concat(s,"/comment/").concat(e),{headers:{"Content-Type":"application/json"},method:"DELETE"}))},k=c.useMemo(()=>N?w?[...N].reverse().slice(0,3):[...N].reverse():[],[w,N]);return(0,l.jsxs)("div",{className:"flex flex-col gap-5 w-full max-w-[512px]",children:[(0,l.jsx)("div",{className:"pt-2 pb-4 flex flex-row gap-4 w-full",children:f&&(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,l.jsx)("div",{className:"w-9",children:f&&(0,l.jsx)(n.Z,{seed:(null!==(t=null==f?void 0:f.id)&&void 0!==t?t:"username").slice(-8),image:f.image,width:36,height:36})}),(0,l.jsx)("div",{className:"w-full bg-white/10 h-fit rounded-full flex items-center",children:(0,l.jsx)("input",{disabled:x,ref:g,onKeyDown:e=>{"Enter"===e.key&&b()},enterKeyHint:"send",value:p,onChange:e=>v(e.target.value),placeholder:"Write a comment...",type:"text",className:"rounded-full px-4 py-1.5 w-full text-base leading-6 font-normal text-white bg-transparent grow placeholder-neutral-500 border-0 outline-none focus:ring-2 focus:ring-blue-500"})})]})}),x&&(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)(u.Z,{baseColor:"#1c1c1c",width:"40px",height:"40px",className:"rounded-full"}),(0,l.jsxs)("div",{className:"ml-1",children:[(0,l.jsx)(u.Z,{baseColor:"#1c1c1c",width:"120px",height:"8px",className:"rounded-full"}),(0,l.jsx)(u.Z,{baseColor:"#1c1c1c",width:"80px",height:"8px",className:"rounded-full"}),(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)(u.Z,{baseColor:"#1c1c1c",width:"20px",height:"8px",className:"rounded-full"}),(0,l.jsx)(u.Z,{baseColor:"#1c1c1c",width:"20px",height:"8px",className:"rounded-full"})]})]})]}),k.length>0&&(0,l.jsx)("div",{className:"flex flex-col gap-4 w-full",children:k.map(e=>{var t;return(0,l.jsx)(y,{comment:e,isDeletable:"new"!==e.id&&((null==f?void 0:f.isAdmin)||(null===(t=e.user)||void 0===t?void 0:t.id)===(null==f?void 0:f.id)||h===(null==f?void 0:f.id)),onDelete:()=>{C(e.id)},setCommentAreaContent:e=>{var t;v(e),null===(t=g.current)||void 0===t||t.focus()}},e.id)})}),N&&N.length>3&&(0,l.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,l.jsxs)("button",{onClick:()=>j(!w),className:"w-full flex flex-row gap-2 items-center text-neutral-400 hover:text-neutral-300",children:[(0,l.jsx)("div",{className:" bg-neutral-800 w-9 items-center justify-center py-1 rounded-full",children:(0,l.jsx)(d.xr$,{name:"chevDown",className:(0,o.Z)("m-auto w-4 h-4",!w&&"rotate-180")})}),(0,l.jsx)("span",{className:"text-sm font-semibold",children:w?"Show more comments":"Show less comments"})]})})]})}},76445:function(e,t,s){"use strict";s.d(t,{$:function(){return i}});var l=s(85893),n=s(67294),a=s(96486),r=s(4886);let i=e=>{let{meta:t,provider:s}=e,i=n.useMemo(()=>s?s.name:"",[s]),o=n.useMemo(()=>{if("Stable Diffusion"===i){let e=(0,a.get)(t,"model",void 0);if("None"!==e)return"Megamodel v2"===e?"PhChroma":"PhChroma2"===e?"PhChroma 2":"PhChroma3"===e?"PhChroma 3":e}},[t,i]),c=n.useMemo(()=>{if("Stable Diffusion"===i){let e=(0,a.get)(t,"engine",void 0);if(e){switch(e){case"stable-diffusion-v1":return"1.0";case"stable-diffusion-v1-5":return"1.5";case"stable-diffusion-512-v2-0":return"2.0";case"stable-diffusion-768-v2-0":return"2.0 - 768";case"stable-diffusion-512-v2-1":return"2.1";case"stable-diffusion-768-v2-1":return"2.1 - 768"}return}}},[t,i]),d=n.useMemo(()=>{let e=(0,a.get)(t,"isUpscaled",!1);return e?"Upscaled \xb7 ":void 0},[t]),u=n.useMemo(()=>{let e=(0,a.get)(t,"isVariation",!1);return e?"Variations \xb7 ":void 0},[t]);return(0,l.jsxs)(l.Fragment,{children:[d,u,(null==o?void 0:o.includes("PhChroma"))?null:i,(null==o?void 0:o.includes("PhChroma"))?null:c?" "+c+" \xb7 ":"",o||"","Midjourney"===i&&(0,l.jsx)(r.Z,{name:"lockLocked",size:16,className:"inline"})]})}},48233:function(e,t,s){"use strict";s.d(t,{d:function(){return i}});var l=s(69572),n=s(16841),a=s(11163),r=s(67294);let i=()=>{let e=(0,a.useRouter)(),{setIsLogInModalOpen:t}=(0,n.l9)(),{isLoggedIn:s}=(0,l.k)();return r.useCallback(l=>{if(!s){t(!0);return}e.push("/create?themeId=".concat(l))},[s,e,t])}},31825:function(e,t,s){"use strict";s.d(t,{I:function(){return a}});var l=s(67294),n=s(69031);let a=e=>{let[t,s]=(0,l.useState)("");return(0,l.useEffect)(()=>{s((0,n.p)(e));let t=setInterval(()=>{s((0,n.p)(e))},6e4);return()=>clearInterval(t)},[e]),t}},41538:function(){}}]);
//# sourceMappingURL=4065-7de7766acbcceeda.js.map