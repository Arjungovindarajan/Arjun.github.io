(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3262],{7609:function(e,t,l){"use strict";l.d(t,{e:function(){return c}});var s=l(85893),i=l(47340),a=l(18651),n=l(78153),r=l(43901),d=l(60789);let c=()=>{let{canvas:e,setCanvas:t}=(0,d.$P)();return(0,s.jsxs)("div",{className:"w-32 gap-1 flex flex-row justify-between items-center",children:[(0,s.jsx)(i.Z,{size:"small",variant:"tall"===e?"tertiary-active":"secondary",className:"bg-transparent !px-2 !py-1",onClick:()=>t("tall"),children:(0,s.jsx)(n.Z,{size:20,color:"tall"===e?"white":"#414141"})}),(0,s.jsx)(i.Z,{size:"small",variant:"square"===e?"tertiary-active":"secondary",className:"bg-transparent !px-2 !py-1",onClick:()=>t("square"),children:(0,s.jsx)(a.Z,{size:20,color:"square"===e?"white":"#414141"})}),(0,s.jsx)(i.Z,{size:"small",variant:"wide"===e?"tertiary-active":"secondary",className:"bg-transparent !px-2 !py-1",onClick:()=>t("wide"),children:(0,s.jsx)(r.Z,{size:20,color:"wide"===e?"white":"#414141"})})]})}},15868:function(e,t,l){"use strict";l.d(t,{m:function(){return c}});var s=l(85893),i=l(60789),a=l(25675),n=l.n(a),r=l(63750),d=l(47516);let c=e=>{let{theme:t,showThemeModal:l}=e,a=(0,i.mh)((null==t?void 0:t.id)||"");return(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{onClick:l,className:"group h-11 group w-56 justify-between items-center p-2 rounded-[4px] flex gap-2 relative overflow-clip z-10 border  ring-1 ring-transparent focus:ring-1 focus:ring-neutral-500/50 cursor-pointer ".concat(t?"bg-emerald-900/20 border-emerald-300/20 hover:border-emerald-300":"bg-transparent border-neutral-500/50"),children:[(0,s.jsxs)("div",{className:"min-w-0 flex justify-between items-center gap-3",children:[(0,s.jsx)("div",{className:"aspect-square w-7 h-7 shrink-0 rounded-sm relative overflow-clip -z-10 items-center",children:(0,s.jsx)(n(),{unoptimized:!0,src:(null==t?void 0:t.image)||(t?"/empty-hero.png":"/empty-template.png"),layout:"fill",alt:"",className:"object-cover"})}),(0,s.jsx)("div",{className:"min-w-0",children:t?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"truncate w-hug grow shrink text-white font-semibold text-left text-xs",children:t.name||"Untitled"})}):(0,s.jsx)("div",{className:"flex flex-col gap-0",children:(0,s.jsx)("div",{className:"w-full center line-clamp-1 text-white font-normal text-left text-xs",children:"Template gallery"})})})]}),(0,s.jsx)("div",{className:"hover:".concat("bg-white/20"," rounded-sm w-6 h-6 flex justify-center items-center opacity-80 group-hover:opacity-100"),children:t?(0,s.jsx)(d.pwh,{onClick:()=>a(),size:16,color:"white",className:""}):(0,s.jsx)(r.L3d,{className:"text-white text-lg"})})]})})}},7329:function(e,t,l){"use strict";l.d(t,{M:function(){return D},c:function(){return L}});var s=l(85893),i=l(99461),a=l(47340),n=l(89108),r=l(98267),d=l(4886),c=l(41660),o=l(60789),u=l(84183),m=l(96486),x=l(41664),h=l.n(x),f=l(67294),p=l(80471),v=l(7609),g=l(36908),j=l(15868),b=l(96738),w=l(25676),N=l(61225),y=l(22665),C=l(91494),k=l(21074),Z=l(18651),S=l(47516),M=l(85026),I=l(86010),z=l(55162),E=l(89583);let D=[{value:"PhChroma 3",disabled:!1},{value:"PhChroma 2",disabled:!1},{value:"Stable Diffusion 1.5",disabled:!1},{value:"Stable Diffusion 2.1",disabled:!1},{value:"DALL\xb7E",disabled:!1},{value:"Midjourney",disabled:!0,icon:(0,s.jsx)(d.Z,{name:"lockLocked",size:16})}],L=e=>{var t;let{onCreated:l,midjourneyCreationInProgress:d=!1,onFocus:x,onBlur:D}=e,{user:L}=(0,c.kP)(),{prompt:T,setPrompt:R}=(0,o.G)(),{editingTheme:F}=(0,o.ZR)(),{activeStyles:A,theme:_}=(0,o.jf)(),{create:P,isCreating:O}=(0,o.RO)(),{service:q}=(0,o.G2)(),{imageCount:B}=(0,o.ZT)(),{theme:H,activeStyles:U,setActiveStyles:V}=(0,o.Lc)(),{setCreateThemeTab:W}=(0,g.M)(),G=(0,c.nr)(["page","stylesTab"]),{creditsUsed:K}=(0,u.j)(),$=(0,u.f)(),[X,J]=f.useState(T||""),{isLoadingSubject:Y}=(0,o.Z5)(),[Q,ee]=f.useState(!1),[et,el]=f.useState(!1),{referenceImage:es,setReferenceImage:ei}=(0,o.YN)(),ea=e=>{let t=new FileReader;t.onabort=()=>console.log("file reading was aborted"),t.onerror=()=>console.log("file reading has failed"),t.onload=()=>{let e=t.result;ei(e)},t.readAsDataURL(e[0])},{getRootProps:en,getInputProps:er,isDragActive:ed}=(0,z.uI)({onDrop:ea,accept:{"image/*":[]},preventDropOnDocument:!0,noClick:!0});f.useEffect(()=>{T!==X&&J(T)},[T]);let ec=f.useMemo(()=>(null==F?void 0:F.id)?A.filter(e=>"modifier"===e.type&&e.enabled).length:U.filter(e=>"modifier"===e.type&&e.enabled).length,[U,null==F?void 0:F.id,A]),eo=f.useMemo(()=>"Midjourney"===q?null:(null==F?void 0:F.id)?F:H,[F,q,H]),eu=f.useCallback(()=>{(null==F?void 0:F.id)?W("styles"):G(["styles","styles"])},[null==F?void 0:F.id,W,G]),em=f.useCallback(()=>{(null==F?void 0:F.id)?G("general"):G(["general","general"])},[null==F?void 0:F.id,G]),ex=f.useCallback(()=>{V(U.filter(e=>"subject"===e.type))},[U,V]),eh=f.useMemo(()=>(null==F?void 0:F.id)?(0,m.get)(F,"meta.subjectRequired",!0):H?(0,m.get)(H,"meta.subjectRequired",!0):!_||(0,m.get)(_,"meta.subjectRequired",!0),[F,_,H]);f.useEffect(()=>{let e=(0,m.debounce)(R,250);return e(X),()=>{e.cancel()}},[R,X]);let ef=async e=>{if(O||d)return;let t=await P(e);t&&l(t)};return L?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"hidden lg:flex gap-4 px-0 w-full grow shrink",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(h(),{className:"hidden lg:flex shrink-0",href:"/profile",children:(0,s.jsx)(i.Z,{width:44,height:44,seed:L.id.slice(-8),image:L.image})})}),(0,s.jsxs)("div",{className:"relative w-full grow shrink pr-6 lg:pr-0",children:[(0,s.jsx)(j.m,{theme:eo,showThemeModal:()=>ee(!0)}),Q&&(0,s.jsx)(k.K,{isOpen:Q,setIsOpen:ee}),(0,s.jsxs)("div",{className:(0,I.Z)("outline-dashed rounded-lg outline-blue-500 relative group z-10 flex pt-4 items-start justify-between gap-1",ed&&!es?"outline-2":"outline-0"),...en(),children:[(0,s.jsx)("input",{...er()}),"Midjourney"===q?(0,s.jsx)(r.h,{}):(0,s.jsx)(n.Z,{disabled:Y,onFocus:x,onBlur:D,placeholder:(null===(t=null==H?void 0:H.meta)||void 0===t?void 0:t.helperText)||"Describe your creation",value:X,onChange:e=>J(e),onSubmit:()=>ef(!1)}),(0,s.jsx)(C.c,{})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between px-4 lg:px-0 lg:pt-0 lg:mb-4 gap-2 flex-wrap mt-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.Z,{onClick:em,size:"icon",variant:"secondary",className:"bg-transparent rounded-full aspect-square !px-1 !py-1",children:(0,s.jsx)(Z.Z,{size:24,className:"fill-white"})}),(0,s.jsx)(b.K,{onEmojiClick:e=>J(X+e.emoji)}),ec>0&&!(null==F?void 0:F.id)&&(0,s.jsxs)(a.Z,{onClick:eu,size:"small",variant:"tertiary-active",children:[(0,s.jsx)(p.BlD,{size:16,color:"white",className:"group-hover:hidden"}),(0,s.jsx)(p.JGh,{onClick:ex,size:16,color:"white",className:"hidden group-hover:block"}),(0,s.jsxs)("span",{className:"text-xs leading-4 font-semibold break-words truncate max-w-lg",children:[ec," ",1===ec?"style":"styles"]})]})]}),(0,s.jsx)(v.e,{})]}),(0,s.jsx)("div",{className:"hidden lg:flex justify-between items-center w-full grow shrink",children:(0,s.jsx)("div",{className:"grow shrink w-full lg:justify-start flex flex-row self-stretch items-center gap-4 border-t border-white/10 pt-4",children:(0,s.jsxs)("div",{className:"justify-between flex flex-row self-stretch items-center gap-4 w-full grow shrink",children:[(0,s.jsx)(w.K,{}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"items-end flex flex-col gap-0",children:[(0,s.jsxs)("div",{className:"text-xs text-neutral-400 truncate flex flex-row gap-2",children:[(0,s.jsx)(y.d,{withTooltip:!0,content:(0,s.jsxs)("div",{className:"text-xs",children:["Daily image count resets at midnight UTC.",(0,s.jsx)("br",{}),"Monthly image count resets at midnight UTC on the first of the month."]}),children:(0,s.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,s.jsx)(E.DAO,{})})}),$-K>0?$-K:0," images left"]}),"pro"!==L.subscriptionPlan&&(0,s.jsx)("div",{className:"text-xs text-neutral-400 truncate ",children:(0,s.jsx)(h(),{className:"text-blue-400 hidden lg:flex shrink-0 hover:underline",href:"/pricing",children:"Upgrade plan"})})]}),(0,s.jsx)(y.d,{withTooltip:!0,content:(0,s.jsx)("div",{className:"",children:"Shuffle subject"}),children:(0,s.jsx)(N.P,{variant:"tertiary",handleCreate:()=>ef(!0)})}),(0,s.jsxs)("div",{className:"relative flex items-center w-fit",children:[(0,s.jsx)(a.Z,{variant:"accent",size:"large",disabled:eh&&!T||O||d||"free"===L.subscriptionPlan,isLoading:O,onClick:()=>ef(!1),className:"w-full ".concat(O?"pr-0":"pr-[68px]"),children:"Create"}),!O&&(0,s.jsxs)("button",{className:"flex hover:bg-white/10 bg-red-50/0 h-[50px] border-l-[1px] border-white/20 rounded-r-md items-center justify-center right-0 absolute pl-2 pr-1",onClick:()=>el(!0),children:[(0,s.jsx)("span",{className:"h-4 w-4 text-xs font-bold rounded-sm text-white flex justify-center items-center items",children:1===B?(0,s.jsx)(s.Fragment,{children:"1"}):(0,s.jsx)(s.Fragment,{children:"4"})}),(0,s.jsx)(S.OrA,{size:24,color:"white",className:"items-center justify-center h-full"})]}),et&&(0,s.jsx)(M.Z,{closeModal:()=>el(!1)})]})]})]})})})]})]})}):null}},96738:function(e,t,l){"use strict";l.d(t,{K:function(){return c}});var s=l(85893),i=l(67294),a=l(47340),n=l(49304),r=l(63048),d=l(89583);let c=e=>{var t;let{onEmojiClick:l}=e,[c,o]=i.useState(!1),u=i.useRef(),m=i.useRef();return t=()=>{c&&o(!1)},i.useEffect(()=>{function e(e){!((null==m?void 0:m.current)&&m.current.contains(e.target))&&(null==u?void 0:u.current)&&!u.current.contains(e.target)&&(t(),e.stopPropagation())}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[u,t,m]),(0,s.jsxs)(n.u,{open:c,children:[(0,s.jsx)(n.aJ,{className:"flex",children:(0,s.jsx)("div",{ref:m,children:(0,s.jsx)(a.Z,{size:"icon",variant:c?"accent":"secondary",className:"bg-transparent rounded-full aspect-square !px-1 !py-1 min-h-[34px] min-w-[34px]",onClick:()=>{o(!c)},children:(0,s.jsx)(d.vtP,{size:16})})})}),(0,s.jsx)(n._v,{className:" ",children:(0,s.jsx)("div",{ref:u,children:(0,s.jsx)(r.ZP,{onEmojiClick:l,theme:r.Q2.DARK})})})]})}},85026:function(e,t,l){"use strict";var s=l(85893),i=l(67294),a=l(47340),n=l(60789);let r=e=>{let{closeModal:t}=e,{imageCount:l,setImageCount:r}=(0,n.ZT)(),d=e=>{r(e),t()},c=i.useCallback(e=>{let l=e.target;l&&l.classList.contains("image-count-modal")&&t()},[t]);return i.useEffect(()=>(document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}),[c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-20 bg-black/0 image-count-modal"}),(0,s.jsx)("div",{className:"z-30 top-14 right-0 absolute bg-neutral-900 border border-white/20 p-2 rounded-lg w-hug shadow-[0_3px_10px_rgb(255,255,255,0.2)] flex-col gap-y-2",children:(0,s.jsx)("div",{className:"h-full flex flex-nowrap items-stretch p-2",children:(0,s.jsx)("div",{className:"flex items-start justify-between overflow-clip overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.Z,{size:"small",variant:1===l?"tertiary-active":"tertiary",onClick:()=>d(1),children:"1"}),(0,s.jsx)(a.Z,{size:"small",variant:4===l?"tertiary-active":"tertiary",onClick:()=>d(4),children:"4"})]})})})})]})};t.Z=r},25676:function(e,t,l){"use strict";l.d(t,{K:function(){return d}});var s=l(85893),i=l(86356),a=l(22197),n=l(60789),r=l(16841);let d=e=>{let{short:t}=e,{isPrivate:l,setIsPrivate:d}=(0,n.gu)(),{setIsOpen:c}=(0,r.Tf)(),o=(0,a.Y)("privateMode"),u=e=>{o?d(e):c(!0,"isPrivate")};return(0,s.jsxs)("div",{className:"flex w-fit justify-center items-center gap-2 text-neutral-400 text-xs",children:[(0,s.jsxs)("div",{className:"",children:["Private",!t&&" session"]}),(0,s.jsx)(i.Z,{checked:l,onChange:u})]})}},91494:function(e,t,l){"use strict";l.d(t,{c:function(){return o}});var s=l(85893),i=l(60789),a=l(25675),n=l.n(a),r=l(8265),d=l(55162),c=l(60155);let o=()=>{let{referenceImage:e,setReferenceImage:t}=(0,i.YN)(),{setSideBarPage:l}=(0,r.C)(),a=()=>{l("general")},o=e=>{let l=new FileReader;l.onabort=()=>console.log("file reading was aborted"),l.onerror=()=>console.log("file reading has failed"),l.onload=()=>{let e=l.result;t(e)},l.readAsDataURL(e[0])},u=()=>{t("")},{getRootProps:m,getInputProps:x}=(0,d.uI)({onDrop:o,accept:{"image/*":[]},preventDropOnDocument:!0,noClick:!0});return(0,s.jsxs)("div",{className:"relative",...!e&&m(),children:[!e&&(0,s.jsx)("input",{...x()}),e&&(0,s.jsx)("button",{className:"z-50 absolute -right-3 -top-3 bg-neutral-800 hover:bg-neutral-700 rounded-full p-2 overflow-clip ring-4 ring-neutral-900",onClick:u,children:(0,s.jsx)(c.bjh,{size:16,className:"fill-white/80"})}),e?(0,s.jsx)("div",{onClick:a,className:"ml-4 mb-4 cursor-pointer z-40 h-32 w-32 aspect-square flex flex-col gap-2 relative overflow-clip rounded-xl",children:(0,s.jsx)("div",{className:" bg-black z-40 aspect-square w-full h-full relative overflow-clip flex items-center justify-center",children:(0,s.jsx)(n(),{unoptimized:!0,src:e,fill:!0,alt:"",className:"object-contain"})})}):null]})}},61225:function(e,t,l){"use strict";l.d(t,{P:function(){return o}});var s=l(85893),i=l(67294),a=l(47340),n=l(60789),r=l(9598),d=l(4886),c=l(47516);let o=e=>{let{handleCreate:t,variant:l,size:o="medium"}=e,{isCreating:u}=(0,n.RO)(),{setPrompt:m,prompt:x}=(0,n.G)(),{isLoadingSubject:h,setIsLoadingSubject:f}=(0,n.Z5)(),[p,v]=i.useState(!1),{theme:g,setTheme:j}=(0,n.Lc)(),{editingTheme:b}=(0,n.ZR)(),{service:w}=(0,n.G2)(),N=(0,r.d)(),y=i.useMemo(()=>"Midjourney"===w?null:(null==b?void 0:b.id)?b:g,[b,w,g]),C=async()=>{m(""),f(!0),v(!0);try{let e="/api/prompts/getSubject";y&&(e+="?themeId="+y.id);let t=await fetch(e),l=await t.json(),s=l.subject.replace(/(^\s+|\s+$|^\t+|\t+$|^\n+|\n+$|^\r+|\r+$|^\"+|\"+$)/g,""),i=s.includes("\n")?s.split("\n")[0]:s;!y&&l.theme&&j(l.theme),m(i)}catch(a){console.error(a),N("Error getting example subject","error")}f(!1)};return i.useEffect(()=>{p&&x&&(v(!1),t())},[p,x,y]),(0,s.jsx)(a.Z,{disabled:u||h,size:o,variant:l,onClick:C,children:h?(0,s.jsx)(d.Z,{name:"loadingSpinner",className:"animate-spin",size:24}):(0,s.jsx)(c.Hom,{size:24})})}},21074:function(e,t,l){"use strict";l.d(t,{K:function(){return r}});var s=l(85893),i=l(67294),a=l(57118),n=l(60789);let r=e=>{let{isOpen:t,setIsOpen:l}=e,{setTheme:r}=(0,n.Lc)(),d=i.useRef(null),c=i.useCallback(()=>{l(!1)},[l]),o=e=>{r(e),c()};return i.useEffect(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&c()};return t&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,c]),(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("div",{className:"fixed inset-0 z-20 bg-black/0"}),(0,s.jsx)("div",{ref:d,className:"z-30 top-14 absolute bg-neutral-900 border border-white/20 rounded-lg py-4 w-96 shadow-[0_35px_60px_-15px_rgba(0,0,0,0.5)] flex flex-col gap-y-2 h-[60vh] lg:h-[45vh]",children:(0,s.jsx)("div",{className:"w-full h-full flex flex-nowrap items-stretch p-2",children:(0,s.jsx)("div",{className:"flex items-start justify-between px-4 overflow-clip overflow-y-auto",children:(0,s.jsx)(a.b,{onThemeClick:o})})})})]})}},92842:function(e,t,l){"use strict";var s=l(85893),i=l(67294),a=l(60789),n=l(86010),r=l(63387);let d=()=>{let[e,t]=(0,i.useState)(0),{queuePosition:l}=(0,a.Qs)();return(0,i.useEffect)(()=>{0!==l.totalTimeEstimate&&t(97)},[l.totalTimeEstimate]),(0,s.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"md:ml-16 mt-4",children:(0,s.jsx)("div",{className:"lg:w-[512px] w-full bg-neutral-800 rounded-full h-1.5 mb-4",children:(0,s.jsx)("div",{className:(0,n.Z)("bg-blue-500 h-1.5 rounded-full transition-[width]"),style:{width:e+"%",transitionDuration:l.totalTimeEstimate+"s"}})})})};t.Z=d},29653:function(e,t,l){"use strict";l.d(t,{N:function(){return j}});var s=l(85893),i=l(67294),a=l(60789),n=l(4886),r=l(12596),d=l(72510),c=l(11355),o=l(86010),u=l(25675),m=l.n(u);let x=()=>{let{service:e,setService:t}=(0,a.G2)(),{stableDiffusionVersion:l,setStableDiffusionVersion:u}=(0,a.s0)(),{customModel:x,setCustomModel:h}=(0,a.kT)(),f=i.useMemo(()=>{switch(e){case"Stable Diffusion":if(null==x?void 0:x.includes("PhChroma"))return r.$n;return r.hz;case"DALL\xb7E":return r.r7;case"Midjourney":return r.mS;default:return r.hz}},[x,e]),p=i.useCallback(e=>{t(e)},[t]);return(0,s.jsxs)(d.v,{as:"div",children:[(0,s.jsx)(d.v.Button,{className:"z-10 flex flex-row items-start p-3 gap-2 rounded-lg cursor-pointer hover:bg-neutral-700 relative",children:(0,s.jsxs)("div",{className:"flex justify-content items-center relative",children:[(0,s.jsx)(m(),{unoptimized:!0,src:f,alt:"Service",width:24,height:24,className:"rounded-full bg-neutral-900"}),(0,s.jsx)(n.Z,{name:"chevDown",size:12,color:"white",className:"absolute left-6"})]})}),(0,s.jsx)(c.u,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsxs)(d.v.Items,{className:"bg-neutral-800 border-white rounded-lg border-solid border border-opacity-10 w-[90%] ml-[5%] md:bg-neutral-900 absolute ml-3 md:w-56 py-4 origin-top md:origin-top-right rounded-md text-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none left-0 lg:left-16 bottom-28 md:bottom-auto md:top-4 z-50",children:[(0,s.jsx)(d.v.Item,{children:t=>{let{active:i}=t;return(0,s.jsx)("button",{onClick:()=>{p("Stable Diffusion"),u("stable-diffusion-v1-5"),h("PhChroma3")},className:(0,o.Z)(i&&"bg-neutral-700","w-full px-4 py-2 text-left"),children:(0,s.jsxs)("div",{className:"flex gap-x-2 font-semibold items-center",children:[(0,s.jsx)(n.Z,{name:"check",size:16,className:(0,o.Z)("Stable Diffusion"===e&&"stable-diffusion-v1-5"===l&&"PhChroma3"===x?"visible":"invisible")}),(0,s.jsx)("span",{className:"text-base leading-6 font-semibold",children:"PhChroma v3"})]})})}}),(0,s.jsx)(d.v.Item,{children:t=>{let{active:i}=t;return(0,s.jsx)("button",{onClick:()=>{p("Stable Diffusion XL"),u("stable-diffusion-xl")},className:(0,o.Z)(i&&"bg-neutral-700","w-full px-4 py-2 text-left"),children:(0,s.jsxs)("div",{className:"flex gap-x-2 font-semibold items-center",children:[(0,s.jsx)(n.Z,{name:"check",size:16,className:(0,o.Z)("Stable Diffusion XL"===e&&"stable-diffusion-xl"===l?"visible":"invisible")}),(0,s.jsx)("span",{className:"text-base leading-6 font-semibold",children:"Stable Diffusion XL"})]})})}}),(0,s.jsx)(d.v.Item,{children:t=>{let{active:i}=t;return(0,s.jsx)("button",{onClick:()=>{p("Stable Diffusion"),u("stable-diffusion-v1-5"),h("PhChroma2")},className:(0,o.Z)(i&&"bg-neutral-700","w-full px-4 py-2 text-left"),children:(0,s.jsxs)("div",{className:"flex gap-x-2 font-semibold items-center",children:[(0,s.jsx)(n.Z,{name:"check",size:16,className:(0,o.Z)("Stable Diffusion"===e&&"stable-diffusion-v1-5"===l&&"PhChroma2"===x?"visible":"invisible")}),(0,s.jsx)("span",{className:"text-base leading-6 font-semibold",children:"PhChroma v2"})]})})}}),(0,s.jsx)(d.v.Item,{children:t=>{let{active:i}=t;return(0,s.jsx)("button",{onClick:()=>{p("Stable Diffusion"),u("stable-diffusion-v1-5")},className:(0,o.Z)(i&&"bg-neutral-700","w-full px-4 py-2 text-left"),children:(0,s.jsxs)("div",{className:"flex gap-x-2 font-semibold items-center",children:[(0,s.jsx)(n.Z,{name:"check",size:16,className:(0,o.Z)("Stable Diffusion"!==e||"stable-diffusion-v1-5"!==l||(null==x?void 0:x.includes("PhChroma"))?"invisible":"visible")}),(0,s.jsx)("span",{className:"text-base leading-6 font-semibold",children:"Stable Diffusion 1.5"})]})})}}),(0,s.jsx)(d.v.Item,{children:t=>{let{active:i}=t;return(0,s.jsx)("button",{onClick:()=>{p("Stable Diffusion"),u("stable-diffusion-512-v2-1")},className:(0,o.Z)(i&&"bg-neutral-700","w-full px-4 py-2 text-left"),children:(0,s.jsxs)("div",{className:"flex gap-x-2 font-semibold items-center",children:[(0,s.jsx)(n.Z,{name:"check",size:16,className:(0,o.Z)("Stable Diffusion"===e&&"stable-diffusion-512-v2-1"===l?"visible":"invisible")}),(0,s.jsx)("span",{className:"text-base leading-6 font-semibold",children:"Stable Diffusion 2.1"})]})})}}),(0,s.jsx)(d.v.Item,{children:t=>{let{active:l}=t;return(0,s.jsx)("button",{onClick:()=>p("DALL\xb7E"),className:(0,o.Z)(l&&"bg-neutral-700","w-full px-4 py-2 text-left"),children:(0,s.jsxs)("div",{className:"flex gap-x-2 font-semibold items-center",children:[(0,s.jsx)(n.Z,{name:"check",size:16,className:(0,o.Z)("DALL\xb7E"===e?"visible":"invisible")}),(0,s.jsx)("span",{className:"text-base leading-6 font-semibold",children:"DALL\xb7E"})]})})}}),(0,s.jsx)(d.v.Item,{children:()=>(0,s.jsx)("button",{disabled:!0,onClick:()=>{},className:"w-full px-4 py-2 text-left text-neutral-600",children:(0,s.jsxs)("div",{className:"flex gap-x-2 font-semibold items-center",children:[(0,s.jsx)(n.Z,{name:"check",size:16,className:(0,o.Z)("Midjourney"===e?"visible":"invisible")}),(0,s.jsx)("span",{className:"text-base leading-6 font-semibold",children:"Midjourney "}),(0,s.jsx)(n.Z,{name:"lockLocked",size:16})]})})})]})})]})},h=e=>{let{icon:t,numberOfChanges:l,isSelected:i,onClick:a}=e;return(0,s.jsxs)("div",{onClick:a,className:(0,o.Z)("flex flex-row items-start p-3 gap-2 rounded-lg cursor-pointer hover:bg-neutral-700 relative",i&&"bg-neutral-700"),children:[l>0&&(0,s.jsx)("div",{className:"absolute flex right-0 top-0 w-5 h-5 bg-blue-600 rounded-full justify-center items-center text-white",children:(0,s.jsx)("span",{className:"text-xs leading-4 font-bold",children:l})}),t]})};var f=l(48400),p=l(8265),v=l(63750),g=l(5434);let j=e=>{let{}=e,{createState:t}=(0,a.RX)(),l=i.useMemo(()=>t.activeStyles.filter(e=>e.enabled).length-1,[t.activeStyles]),r=i.useMemo(()=>{var e;let l=0;return t.canvas!==f.E3.canvas&&l++,t.output!==f.E3.output&&l++,t.referenceImage&&(l++,t.referencePercentage!==f.E3.referencePercentage&&l++),l+=(null==t?void 0:null===(e=t.controlNetItems)||void 0===e?void 0:e.length)||0},[t.controlNetItems,t.canvas,t.output,t.referenceImage,t.referencePercentage]),d=i.useMemo(()=>{if("DALL\xb7E"===t.service)return 0;let e=0;return t.customModel!==f.E3.customModel&&e++,t.cfgScale!==f.E3.cfgScale&&e++,t.steps!==f.E3.steps&&e++,t.sampler!==f.E3.sampler&&e++,t.seed!==f.E3.seed&&e++,e},[t.cfgScale,t.customModel,t.sampler,t.seed,t.service,t.steps]),{sideBarPage:c,setSideBarPage:o}=(0,p.C)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{}),(0,s.jsx)(h,{isSelected:"styles"===c,icon:(0,s.jsx)(v.y6p,{size:24,className:"text-neutral-400"}),numberOfChanges:l,onClick:()=>o("styles")}),(0,s.jsx)(h,{isSelected:"general"===c,icon:(0,s.jsx)(g.UZU,{size:24,className:"text-neutral-400"}),numberOfChanges:r,onClick:()=>o("general")}),(0,s.jsx)(h,{isSelected:"advanced"===c,icon:(0,s.jsx)(n.Z,{name:"settings",size:24,className:"text-neutral-400"}),numberOfChanges:d,onClick:()=>o("advanced")})]})}},8265:function(e,t,l){"use strict";l.d(t,{C:function(){return n}});var s=l(28255),i=l(23570),a=l(67294);let n=()=>{let e=(0,s.W)("page")||"styles",t=(0,i.n)(["page","editingThemeId","createThemeTab"]),l=(0,s.W)("editingThemeId"),n=(0,a.useCallback)(e=>{t([e,l,void 0])},[t,l]);return(0,a.useMemo)(()=>({sideBarPage:e,setSideBarPage:n}),[n,e])}},55180:function(e,t,l){"use strict";l.d(t,{K:function(){return tj}});var s,i,a=l(85893),n=l(28255),r=l(67294),d=l(8265),c=l(31911),o=l(30121),u=l(12596),m=l(60789),x=l(86010),h=l(79352),f=l(88410),p=l(73047);let v=r.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsxs)(f.fC,{ref:t,className:(0,p.cn)("relative flex w-full touch-none select-none items-center",l),...s,children:[(0,a.jsx)(f.fQ,{className:"relative h-1 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(f.e6,{className:"absolute h-full bg-accent"})}),(0,a.jsx)(f.bU,{className:"block h-4 w-4 rounded-full border-2 border-primary bg-primary ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});v.displayName=f.fC.displayName;var g=l(41660),j=l(16841);let b=[{value:"Choose automatically",disabled:!1},{value:"Euler a",disabled:!1},{value:"Euler",disabled:!1},{value:"LMS",disabled:!1},{value:"Heun",disabled:!1},{value:"DPM2",disabled:!1},{value:"DPM2 a",disabled:!1},{value:"DPM++ 2S a",disabled:!1},{value:"DPM++ 2M",disabled:!1},{value:"DPM fast",disabled:!1},{value:"DPM adaptive",disabled:!1},{value:"LMS Karras",disabled:!1},{value:"DPM2 Karras",disabled:!1},{value:"DPM2 a Karras",disabled:!1},{value:"DPM++ 2S a Karras",disabled:!1},{value:"DPM++ 2M Karras",disabled:!1},{value:"DDIM",disabled:!1},{value:"PLMS",disabled:!0}],w=[{value:"Choose automatically",disabled:!1},{value:"DDIM",disabled:!1},{value:"DPMSolverMultistep",disabled:!1},{value:"HeunDiscrete",disabled:!1},{value:"KarrasDPM",disabled:!1},{value:"K_EULER_ANCESTRAL",disabled:!1},{value:"K_EULER",disabled:!1},{value:"PNDM",disabled:!1}],N={"stable-diffusion-512-v2-1":"Stable Diffusion 2.1","stable-diffusion-512-v2-0":"Stable Diffusion 2.0","stable-diffusion-v1-5":"Stable Diffusion 1.5","stable-diffusion-v1":"","stable-diffusion-768-v2-0":"","stable-diffusion-768-v2-1":"","stable-inpainting-v1-0":"","stable-inpainting-512-v2-0":"","stable-diffusion-xl":"Stable Diffusion XL"},y=()=>{let{cfgScale:e,setCfgScale:t}=(0,m.c8)(),{steps:l,setSteps:s}=(0,m.h4)(),{sampler:i,setSampler:n}=(0,m.b9)(),{seed:d,setSeed:f}=(0,m.WJ)(),{service:p}=(0,m.G2)(),{stableDiffusionVersion:y}=(0,m.s0)(),{imageCount:C}=(0,m.ZT)(),{customModel:k,setCustomModel:Z}=(0,m.kT)(),{subscriptionPlan:S}=(0,g.kP)(),{setIsOpen:M}=(0,j.Tf)(),I=r.useMemo(()=>"Stable Diffusion XL"===p&&"stable-diffusion-xl"===y,[p,y]),z=r.useMemo(()=>l<=25?"A few seconds to generate":l<=50?"Less than a minute to generate":"More than a minute to generate",[l]),E=r.useMemo(()=>{if("Stable Diffusion"===p)return N[y]},[p,y]),D=r.useMemo(()=>"Stable Diffusion 1.5"===E,[E]),L=r.useMemo(()=>u.Ux.filter(e=>{var t;return(null===(t=u.H$[e])||void 0===t?void 0:t.stableDiffusionVersion)===(D?"1.5":"2.1")||"None"===e}).map(e=>({value:e,disabled:!1})),[D]),T=r.useCallback(e=>{"free"===S.id&&e>25?(s(25),M(!0)):s(e)},[M,s,S.id]);return"DALL\xb7E"===p?(0,a.jsxs)("span",{className:"text-xs leading-4 text-neutral-400 mt-4",children:[p," does not support any additional settings"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 w-full mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsxs)("div",{className:"flex gap-x-3 items-center grow shrink",children:[(0,a.jsx)("div",{className:"flex justify-start items-start flex-grow-0 flex-shrink-0",children:(0,a.jsx)("div",{className:"flex justify-start items-start flex-grow-0 flex-shrink-0 relative overflow-hidden",children:(0,a.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"flex-grow-0 flex-shrink-0 w-4 h-4 relative",preserveAspectRatio:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.333252 2C0.333252 1.44772 0.780967 1 1.33325 1H11.9237C13.9909 1 15.6666 2.67573 15.6666 4.74286C15.6666 6.80998 13.9909 8.48571 11.9237 8.48571H6.67373C5.42714 8.48571 4.41659 9.49627 4.41659 10.7429C4.41659 11.9894 5.42714 13 6.67373 13H11.3333C11.8855 13 12.3333 13.4477 12.3333 14C12.3333 14.5523 11.8855 15 11.3333 15H6.67373C4.32257 15 2.41659 13.094 2.41659 10.7429C2.41659 8.3917 4.32257 6.48571 6.67373 6.48571H11.9237C12.8863 6.48571 13.6666 5.70541 13.6666 4.74286C13.6666 3.7803 12.8863 3 11.9237 3H1.33325C0.780967 3 0.333252 2.55228 0.333252 2Z",fill:"white"})})})})," ",(0,a.jsx)("span",{className:"text-xs font-medium text-left text-white",children:"Guidance"})]}),(0,a.jsx)("div",{className:"w-12 flex grow shrink items-center max-w-[64px]",children:(0,a.jsx)(c.Z,{type:"number",min:1,max:20,step:.5,value:e,className:"text-center flex grow shrink",onChange:e=>t(e.target.valueAsNumber)})})]}),(0,a.jsx)("div",{className:"flex gap-x-4 justify-between items-center",children:(0,a.jsxs)("div",{className:"flex grow shrink items-center",children:[(0,a.jsx)(v,{min:1,max:20,step:1,value:[e],onValueChange:e=>t(e[0])})," "]})}),(0,a.jsxs)("div",{className:"flex grow shrink text-xs text-neutral-400",children:[(0,a.jsx)("div",{className:"flex grow shrink text-left",children:"Ignore prompt"}),(0,a.jsx)("div",{className:"flex text-right",children:"Match prompt"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 w-full",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex gap-x-3 items-center grow shrink",children:[(0,a.jsx)(h.jHS,{className:"text-white"}),(0,a.jsxs)("span",{className:"text-xs font-medium text-left text-white",children:["Quality ",(0,a.jsx)("span",{className:"pl-1 text-neutral-500",children:"(steps)"})]})]}),(0,a.jsx)("div",{className:"w-12 flex grow shrink items-center max-w-[64px]",children:(0,a.jsx)(c.Z,{type:"number",value:l,min:1,max:100,className:"text-center grow shink",onChange:e=>T(e.target.valueAsNumber)})})]}),(0,a.jsx)("div",{className:"flex gap-x-4 justify-between items-center",children:(0,a.jsx)("div",{className:"flex grow shrink items-center",children:(0,a.jsx)(v,{min:0,max:100,step:5,value:[l],onValueChange:e=>{T(e[0])}})})}),(0,a.jsx)("div",{className:"mt-2 h-6 items-center justify-center",children:l>0&&(0,a.jsx)("div",{className:(0,x.Z)("w-full grow shrink text-xs text-center center",l<=25&&"text-green-300",l<=50&&l>25&&"text-neutral-400",l>50&&"text-orange-500"),children:z})})]}),I?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(o.Z,{label:"Sampler",value:i,size:"medium",options:w,onChange:e=>n(e)})})}):(0,a.jsxs)(a.Fragment,{children:[L.length>1?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(o.Z,{label:"Model",value:k,size:"medium",options:L,onChange:e=>Z(e)})}):null,(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(o.Z,{label:"Sampler",value:i,size:"medium",options:b,onChange:e=>n(e)})}),(0,a.jsx)(c.Z,{disabled:1!==C,size:"medium",type:"number",label:"Seed",className:"w-full",value:d||"",placeholder:1!==C?"Unavailable with 4 variations":"Random",clearable:!0,onClear:()=>{f()},onChange:e=>f(e.target.valueAsNumber)})]})]})};var C=l(47340),k=l(43552),Z=l(83022),S=l(4886),M=l(9598),I=l(48400),z=l(96486),E=l(25675),D=l.n(E);let L=e=>{let{onClose:t,onSelectImages:l,thumbnails:s,themeId:i}=e,[n,d]=r.useState([]),[c,u]=r.useState("By anyone"),[m,h]=r.useState([]),{user:f}=(0,g.kP)(),p=r.useCallback(async e=>{let t=await fetch("/api/theme/".concat(i,"/prompts").concat(e?"?filter="+e:"")).then(e=>e.json());h(t)},[i]);r.useEffect(()=>{p("By anyone"===c?void 0:"mine")},[c,p]);let v=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):4===n.length?t:[...t,e])},j=()=>{for(;n.length<4;)n.push("");l(n)},b=r.useMemo(()=>{let e=[...m];return"By me"===c&&e.filter(e=>e.userId===(null==f?void 0:f.id)),e.map(e=>e.assets.map(e=>e.cfUrl||e.src)).flat()},[c,m,null==f?void 0:f.id]);return r.useEffect(()=>{let e=b.filter(e=>s.includes(e));d(e)},[b,s]),r.useEffect(()=>{window.scrollTo(0,0)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center p-0 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center p-0 text-white",children:[(0,a.jsx)("div",{className:"flex flex-row items-start py-0 pl-0 pr-5 cursor-pointer",onClick:t,children:(0,a.jsx)(S.Z,{name:"lineArrowBack",size:16})}),(0,a.jsx)("span",{className:"text-base leading-6 font-semibold",children:"Select Highlights"})]}),(0,a.jsx)(C.Z,{onClick:j,size:"small",variant:"accent",children:"Done"})]}),(0,a.jsxs)("div",{className:"flex gap-4 flex-col mt-4",children:[(0,a.jsx)("span",{className:"text-sm leading-5 font-normal text-neutral-400",children:"Only public photos using this theme can be used as a highlight"}),(0,a.jsx)(o.Z,{size:"small",value:c,options:[{value:"By anyone",disabled:!1},{value:"By me",disabled:!1}],onChange:e=>u(e),listBoxClassName:"w-full"}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:b.map((e,t)=>{let l=n.includes(e),s=n.indexOf(e);return(0,a.jsxs)("div",{className:"relative aspect-square",children:[(0,a.jsx)(D(),{onClick:()=>v(e),className:(0,x.Z)("rounded-lg w-full h-full",l&&"opacity-75 cursor-pointer",n.length<4&&"hover:opacity-75 cursor-pointer",!l&&4===n.length&&"cursor-not-allowed opacity-50"),fill:!0,src:e,alt:"image",objectFit:"cover"}),l&&(0,a.jsx)("div",{className:"absolute top-0 right-0 flex flex-row items-center justify-center w-6 h-6 bg-blue-500 rounded-full ",children:(0,a.jsx)("span",{className:"text-xs leading-4 font-bold text-white",children:s+1})})]},t)})})]})]})};var T=l(43575),R=l(65451);function F(e){let{colors:t,onChange:l,value:s}=e;return(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:(0,a.jsx)(R.E,{value:s,className:"flex gap-2 flex-wrap",onChange:l,children:t.map(e=>(0,a.jsx)(R.E.Option,{value:e,children:t=>{let{checked:l}=t;return(0,a.jsx)("div",{className:(0,x.Z)(l&&" border-4","w-9 aspect-square rounded-md flex justify-center items-center"),style:{backgroundColor:e},children:l&&(0,a.jsx)("div",{className:"w-2 aspect-square rounded-full bg-white z-10 "})})}},e))})})}var A=l(55162),_=l(60155),P=l(18651);function O(e){let{onChange:t=()=>{},value:l,mask:s,onURLEnter:i=()=>{}}=e,[n,d]=r.useState(void 0),o=r.useMemo(()=>{if(!n)return!1;try{return new URL(n),!0}catch(e){return!1}},[n]),u=e=>{let l=new FileReader;l.onabort=()=>console.log("file reading was aborted"),l.onerror=()=>console.log("file reading has failed"),l.onload=()=>{let e=l.result;t(e)},l.readAsDataURL(e[0])},{getRootProps:m,getInputProps:h,isDragActive:f}=(0,A.uI)({onDrop:u,accept:{"image/*":[]}});return(0,a.jsx)("div",{children:l?(0,a.jsxs)("div",{className:"bg-neutral-900 relative flex justify-center rounded-md overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute left-1 top-1",children:(0,a.jsx)(C.Z,{variant:"secondary",size:"icon",icon:(0,a.jsx)(_.bjh,{}),onClick:()=>t&&t(void 0)})}),(0,a.jsxs)("div",{className:"w-60 relative",children:[(0,a.jsx)("img",{src:l,alt:"selected image"}),s&&(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)("img",{src:s,alt:"mask"})})]})]}):(0,a.jsxs)("div",{...m(),className:(0,x.Z)("bg-neutral-900 hover:bg-neutral-900/60 p-6 rounded-md cursor-pointer focus:outline-none focus:ring-blue-500 focus:ring-2 border border-neutral-700 border-dashed",f&&"bg-blue-500/20 border-blue-500"),children:[(0,a.jsx)("input",{...h()}),(0,a.jsxs)("div",{className:(0,x.Z)("flex flex-col justify-center items-center gap-y-3"),children:[(0,a.jsx)(P.Z,{size:36,className:(0,x.Z)(f?"fill-white":"fill-neutral-700")}),(0,a.jsxs)("div",{className:"text-white text-xs text-center",children:["Drag an image here or ",(0,a.jsx)("span",{className:"text-blue-400",children:"upload a file"})]}),(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsx)("hr",{className:"border-neutral-800 border-top w-full"}),(0,a.jsx)("span",{className:" py-1 px-3 text-neutral-400 text-xs ",children:" OR"}),(0,a.jsx)("hr",{className:"border-neutral-800 border-top w-full"})]}),(0,a.jsxs)("div",{className:"w-full flex flex-row items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-full px-4",placeholder:"Paste image link",value:n,onChange:e=>d(e.target.value),onClick:e=>{e.stopPropagation()},onKeyDown:e=>{"Enter"===e.key&&n&&i(n)}}),n&&o&&(0,a.jsx)(C.Z,{variant:"accent",size:"small",icon:(0,a.jsx)(S.Z,{name:"lineArrowUp",size:16}),onClick:e=>{e.stopPropagation(),i(n)}})]})]})]})})}var q=l(23695),B=l(63750),H=l(80269),U=l(36908),V=l(11163),W=l(86356),G=l(7329);let K=[{label:"Off",value:"off",disabled:!1},{label:"32",value:"32",disabled:!1},{label:"64",value:"64",disabled:!1},{label:"128",value:"128",disabled:!1},{label:"256",value:"256",disabled:!1}],$=e=>{let{close:t,isCreating:l}=e,{editingTheme:{name:s,image:i,accentColor:n,meta:d,id:x,thumbnails:h,isPublic:f,category:p},setEditingThemeParams:v}=(0,m.ZR)(),[j,b]=r.useState([]),[w,y]=r.useState(!1),{setCreateThemeTab:k}=(0,U.M)(),M=(0,g.d$)(),I=(0,Z.tT)(),E=(0,Z.se)(),D=(0,V.useRouter)(),{service:L}=(0,m.G2)(),{stableDiffusionVersion:R}=(0,m.s0)(),{customModel:A}=(0,m.kT)(),[_,P]=r.useState(!1),[$,X]=r.useState([]);r.useEffect(()=>{let e=async()=>{let e=await fetch("/api/theme/".concat(x,"/getSubjects")),t=await e.json();X(t)};e()},[x]);let J=r.useCallback(e=>{v({accentColor:e})},[v]),Y=r.useCallback(e=>{v({category:e})},[v]),Q=r.useCallback((e,t)=>{"object"==typeof d&&v({meta:{...d,service:e,stableDiffusionVersion:t}})},[d,v]),ee=r.useCallback(e=>{"object"==typeof d?v({meta:{...d,helperText:e}}):v({meta:{helperText:e}})},[d,v]),et=r.useCallback(e=>{"object"==typeof d?v({meta:{...d,model:e}}):v({meta:{model:e}})},[d,v]),el=r.useCallback(e=>{"object"==typeof d&&v({meta:{...d,subjectRequired:e}})},[d,v]),es=r.useMemo(()=>{let e=(0,z.get)(d,"service",L),t=(0,z.get)(d,"subjectRequired",!0),s=(0,z.get)(d,"pixelArt",!1),i=(0,z.get)(d,"helperText",""),a=(0,z.get)(d,"stableDiffusionVersion",l?R:"stable-diffusion-v1-5"),n=(0,z.get)(d,"model",l?A:"None");return{service:e,helperText:i,stableDiffusionVersion:a,subjectRequired:t,model:n,pixelArt:s}},[A,L,R,d,l]),ei=r.useCallback(e=>{"object"==typeof d&&v({meta:{...d,pixelArt:e}})},[d,es,v]),ea=r.useCallback(e=>{v({image:e})},[v]),en=r.useCallback(()=>{f?(E.mutate({id:x,isPublic:!f}),v({isPublic:!f})):(E.mutate({id:x,isPublic:!f},{onSuccess:()=>{D.push("/theme/".concat(x))}}),v({isPublic:!f}))},[x,f,D,v,E]),er=e=>{fetch(e).then(e=>{if(e.status>=200&&e.status<300)return e.blob();throw e}).then(e=>{let t=new FileReader;t.onload=function(){ea(t.result)},t.readAsDataURL(e)})},ed=r.useCallback(()=>{x&&I.mutate(x,{onSuccess:()=>{y(!1),M("Template deleted successfully"),t()}})},[t,I,x,M]),ec=()=>{k("images")};r.useEffect(()=>{let e=new H.Z,t=new Image;t.crossOrigin="anonymous",t.addEventListener("load",async()=>{let l=await e.getPalette(t);n||J("rgb(".concat(l[0][0],",").concat(l[0][1],",").concat(l[0][2],")")),b(l.map(e=>"rgb(".concat(e[0],",").concat(e[1],",").concat(e[2],")")))}),t.src=(null==i?void 0:i.startsWith("http"))?"https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&refresh=2592000&url="+i:i},[n,i,J]);let eo=r.useMemo(()=>h.length<4?[...h,...Array(4-h.length).fill("")]:h,[h]),eu=r.useMemo(()=>{if("Stable Diffusion"===es.service)return N[es.stableDiffusionVersion]},[es.service,es.stableDiffusionVersion]),em=r.useMemo(()=>"Stable Diffusion 1.5"===eu,[eu]),ex=r.useMemo(()=>"Stable Diffusion"===es.service,[es.service]),eh=r.useMemo(()=>ex?u.Ux.filter(e=>{var t;return(null===(t=u.H$[e])||void 0===t?void 0:t.stableDiffusionVersion)===(em?"1.5":"2.1")||"None"===e}).map(e=>({value:e,disabled:!1})):[],[em,ex]),ef=r.useMemo(()=>u.Oe.map(e=>({value:e,disabled:!1})),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,{isOpen:w,setIsOpen:y,title:"Delete Theme",description:"Are you sure you want to delete this theme? This action cannot be undone.",buttons:[{text:"Delete",onClick:ed},{text:"Cancel",onClick:()=>y(!1),variant:"tertiary"}]}),(0,a.jsx)("div",{className:"max-w-[126px] mx-auto mb-6",children:(0,a.jsx)(q.$,{service:void 0,title:s.length>0?s:"Template Name",mainImageSrc:i||"/empty-hero.png",images:[],accentColor:n||"#333333",size:"md"})}),(0,a.jsxs)("div",{className:"w-full flex flex-col gap-4 mt-6",children:[(0,a.jsx)("div",{className:"w-full flex flex-col gap-2",children:(0,a.jsx)(o.Z,{value:"DALL\xb7E"===es.service?es.service:"stable-diffusion-v1-5"===es.stableDiffusionVersion?"Stable Diffusion 1.5":"Stable Diffusion 2.1",size:"medium",label:"Service",listBoxClassName:"min-w-[220px]",options:G.M,onChange:e=>{switch(e){case"Stable Diffusion 1.5":Q("Stable Diffusion","stable-diffusion-v1-5");break;case"Stable Diffusion 2.1":Q("Stable Diffusion","stable-diffusion-512-v2-1");break;case"DALL\xb7E":Q("DALL\xb7E")}}})}),eh.length>1?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(o.Z,{label:"Model",value:es.model,size:"medium",options:eh,onChange:e=>et(e)})}):null,(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(o.Z,{label:"Category",value:p||void 0,size:"medium",options:ef,onChange:e=>Y(e)})}),(0,a.jsxs)(C.Z,{size:"small",variant:"tertiary",className:"w-full text-white",onClick:en,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),children:[!f&&(0,a.jsx)(B.zyJ,{}),f?(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center gap-2 text-neutral-400 hover:text-white",children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.TKV,{size:20}),(0,a.jsx)("label",{children:"Make theme private"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.YsK,{size:20}),(0,a.jsx)("label",{children:"Theme published"})]})}):"Publish theme"]})]}),!l&&(0,a.jsxs)("div",{className:"w-full flex flex-col gap-4 mt-6",children:[(0,a.jsx)("label",{className:"text-neutral-400 font-normal not-italic uppercase tracking-widest text-[10px] text-start",children:"THEME COVER"}),(0,a.jsx)(O,{onURLEnter:e=>{er("/api/image/proxy?url=".concat(encodeURIComponent(e)))},onChange:e=>{ea(e)},value:i}),(0,a.jsx)("label",{className:"text-neutral-400 font-normal not-italic uppercase tracking-widest text-[10px] text-start",children:"THEME COLOR"}),(0,a.jsx)(F,{colors:j,value:n||"#333333",onChange:e=>J(e)}),(0,a.jsx)("label",{className:"text-neutral-400 font-normal not-italic uppercase tracking-widest text-[10px] text-start",children:"THEME HIGHLIGHTS"}),(0,a.jsx)("div",{className:"relative aspect-square",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 cursor-pointer mb-2 hover:opacity-80 ",onClick:()=>ec(),children:eo.map((e,t)=>e?(0,a.jsx)("img",{className:"rounded-lg w-full aspect-square object-cover",src:e,alt:s},t):(0,a.jsx)("div",{className:"w-full aspect-square",children:(0,a.jsx)(S.Z,{name:"imageFilled",size:"100%",color:"#393939"})},t))})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"w-full flex justify-between items-center text-white text-base leading-6 my-4 font-semibold",children:(0,a.jsxs)("label",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"flex",children:"Pixel art"}),(0,a.jsx)("div",{className:"text-blue-400 uppercase text-[10px] items-center flex ital",children:"beta"})]})}),(0,a.jsx)(o.Z,{value:es.pixelArt||"off",size:"medium",listBoxClassName:"min-w-[220px]",options:K,onChange:e=>{ei(e)}}),(0,a.jsxs)("div",{className:"w-full flex justify-between items-center text-white text-base leading-6 my-4 font-semibold",children:[(0,a.jsx)("label",{children:"Subject needed"}),(0,a.jsx)(W.Z,{checked:es.subjectRequired,onChange:e=>el(e)})]})]}),(0,a.jsx)("label",{className:"font-normal not-italic uppercase tracking-widest text-[10px] text-start text-neutral-400",children:"Example Subject"}),$.length>0&&(0,a.jsx)(o.Z,{value:es.helperText,size:"medium",label:"Recently used",options:$.map(e=>({label:e,value:e,disabled:!1})),onChange:e=>ee(e)}),(0,a.jsx)("label",{className:"font-normal not-italic uppercase tracking-widest text-[10px] text-start text-neutral-400",children:"Custom Example Subject"}),(0,a.jsx)(c.Z,{isTextArea:!0,value:es.helperText,label:"Example Subject",type:"text",size:"small",onChange:e=>ee(e.target.value),placeholder:"eg. An orange fox on a white background",className:"text-xs"}),(0,a.jsx)("label",{className:"text-sm leading-5 font-normal text-neutral-400 text-start mb-4",children:"When someone uses your theme, they will see this text when typing their subject."}),(0,a.jsx)(C.Z,{onClick:()=>y(!0),size:"small",variant:"tertiary",className:"w-full border-red-300 text-red-300",children:"Delete Theme"})]})]})};var X=l(21330),J=l(65820),Y=l(63387),Q=l(49178),ee=l(80471),et=l(91449),el=l(14578),es=l(53854),ei=l(15948),ea=l(5434);let en=e=>{let{enabled:t,icon:l,effectName:s,onChange:i}=e;return(0,a.jsxs)("div",{className:(0,x.Z)("w-full hover:bg-neutral-700/30 rounded-md px-2 h-12 md:h-10 group flex flex-row items-center gap-2 w-full max-w-full relative text-white justify-between",!t&&"opacity-50"),children:[(0,a.jsx)("div",{className:"",children:l}),(0,a.jsx)("span",{className:"truncate text-base md:text-xs leading-5 font-normal text-neutral-300 text-start w-full",children:s}),(0,a.jsx)("div",{className:"ml-2 gap-x-1 flex w-fit relative items-center justify-center",children:(0,a.jsx)("div",{className:"hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)("div",{className:"w-4 h-4",children:(0,a.jsx)(W.Z,{className:(0,x.Z)(t&&"visible md:invisible md:group-hover:visible w-4 h-4"),onChange:e=>i(e),checked:t,eyeBall:!0})})})})]})},er=e=>{let{effects:t,setEffects:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-6 rounded-md px-2 h-12 md:h-10 group flex flex-row items-center gap-2",children:(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2 px-2",children:[(0,a.jsx)(ea.fFE,{className:"text-white w-4 h-4"}),(0,a.jsx)("span",{className:"truncate text-base md:text-xs leading-5 font-normal text-start",children:(0,a.jsx)("span",{className:"text-white",children:"Effects"})})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 pl-12 w-full",children:[(0,a.jsx)(en,{onChange:e=>l({...t,restoreFace:e}),effectName:"Restore Faces",enabled:!!(null==t?void 0:t.restoreFace),icon:(0,a.jsx)(ea.nz6,{})}),(0,a.jsx)(en,{onChange:e=>l({...t,seamlessPattern:e}),effectName:"Seamless Pattern",enabled:!!(null==t?void 0:t.seamlessPattern),icon:(0,a.jsx)(B.gc_,{})})]})]})};var ed=l(47516),ec=l(75617),eo=l(49304),eu=l(51649);let em=[{id:"25%",name:"25%"},{id:"50%",name:"50%"},{id:"75%",name:"75%"},{id:"100%",name:"100%"},{id:"200%",name:"200%"},{id:"300%",name:"300%"},{id:"400%",name:"400%"},{id:"500%",name:"500%"},{id:"600%",name:"600%"},{id:"700%",name:"700%"},{id:"800%",name:"800%"},{id:"900%",name:"900%"},{id:"1000%",name:"1000%"}];function ex(e){let{onClose:t,id:l,category:s,listItems:i,setListItems:n}=e,d=null==s||(0,Q.H)(null==s?void 0:s.id),{categories:c}=(0,X.yK)(),o=r.useMemo(()=>{var e;return(null===(e=null==c?void 0:c.filter(e=>e.id===(null==s?void 0:s.id))[0])||void 0===e?void 0:e.styles)||[]},[c,s]),u=r.useCallback(e=>{let t=i.map(t=>{var s;return"modifier"===t.type&&(null===(s=t.data)||void 0===s?void 0:s.id)===l?{id:e.name+Math.random().toString(),data:{...e},enabled:!0,type:"modifier"}:t});n(t)},[l,i,n]);return d?(0,a.jsxs)("div",{className:"bg-neutral-900 border border-white/10 w-full rounded-[4px] pt-2 pb-3",style:{boxShadow:"0px 4px 12px 1px rgba(0, 0, 0, 0.75)"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 px-4",children:[(0,a.jsx)("p",{className:"text-white leading-6 font-semibold text-left capitalize",children:(null==s?void 0:s.name)||"Category"}),(0,a.jsx)(Y.E.button,{tabIndex:-1,className:"hidden md:hover:bg-black/20 p-1 rounded-full",whileTap:"tap",whileHover:"md:hover",onClick:t,children:(0,a.jsx)(Y.E.div,{variants:{tap:{scale:.9},hover:{rotateZ:90}},children:(0,a.jsx)(S.Z,{className:"w-4 h-4",name:"close",color:"white"})})})]}),0===o.length&&(0,a.jsxs)("div",{className:"p-5 flex flex-col items-center justify-center gap-2",children:[(0,a.jsx)(B.LF6,{color:"white",size:32,className:"opacity-50"}),(0,a.jsx)("p",{children:"No other styles in this category... yet"})]}),o.length>0&&(0,a.jsx)("div",{className:"overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-black/50",children:(0,a.jsx)("div",{className:"px-2",children:o.map(e=>(0,a.jsx)(Y.E.button,{whileTap:{scale:.99},onClick:()=>u(e),className:"cursor-pointer p-2 focus:bg-white/5 md:hover:bg-white/5 rounded-[4px] w-full block text-left",children:(0,a.jsxs)("div",{className:"flex items-center w-full gap-2",children:[(0,a.jsx)(ee.BlD,{className:"text-[#8F8F8F] shrink-0 opacity-80 w-4 h-4"}),(0,a.jsx)("div",{className:"text-left",children:(0,a.jsx)("p",{className:"truncate text-xs leading-5 font-normal text-white ",children:e.name})})]})},e.id))})})]}):(0,a.jsx)("div",{className:"bg-[#262626] border border-white/20 w-full rounded-[4px] pt-2 pb-1",style:{boxShadow:"0px 0px 4px #000000"},children:(0,a.jsxs)("div",{className:"p-5 flex flex-col items-center justify-center gap-2",children:[(0,a.jsx)(B.CoT,{color:"white",size:32,className:"opacity-50"}),(0,a.jsx)("p",{children:"This style hasn't been categorized yet!"})]})})}let eh=e=>{var t;let{modifier:l,enableModifier:s,disableModifier:i,enabled:n,removeModifier:d,listItems:c,setListItems:o}=e,[u,m]=r.useState(!1),h=null===(t=l.categories)||void 0===t?void 0:t[0],f=r.useCallback(()=>m(e=>!e),[]),p=r.useCallback(()=>m(!1),[]),v=r.useMemo(()=>(0,z.truncate)(l.name,{length:32}),[l.name]),g=r.useRef(),j=r.useRef();(0,et.O)(g.current,p,j.current),r.useEffect(()=>{n||m(!1)},[n]);let b=r.useCallback(e=>{let t=c.map(t=>{var s;return"modifier"===t.type&&(null===(s=t.data)||void 0===s?void 0:s.id)===l.id?{...t,data:{...t.data,weight:e}}:t});o(t)},[c,l.id,o]),w=r.useMemo(()=>{let e=(null==l?void 0:l.weight)||"100%";return em.findIndex(t=>t.id===e)},[l]);return(0,a.jsxs)("div",{className:(0,x.Z)("w-full md:hover:bg-neutral-700/30 rounded-md px-2 h-12 md:h-10 cursor-grab group flex flex-row items-center gap-2 max-w-full relative text-white justify-between",!n&&"opacity-50"),children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(S.Z,{className:"ring-none outline-none visible md:invisible group-hover:visible group text-white cursor-grab w-4 h-4",name:"menu"})}),(0,a.jsxs)("div",{className:"relative w-full min-w-0",children:[(0,a.jsxs)("button",{className:(0,x.Z)("flex items-center w-full py-2 px-2 rounded-[4px] gap-2 relative",{"bg-blue-500":u,"hover:ring-1 md:hover:ring-inset md:hover:ring-neutral-700 md:hover:justify-between":n}),onClick:n?f:void 0,ref:j,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,a.jsxs)(eo.u,{placement:"right-start",children:[(0,a.jsx)(eo.aJ,{children:(0,a.jsx)(ee.BlD,{className:(0,x.Z)("shrink-0 w-4 h-4",{"text-neutral-400":!u,"text-white":u})})}),(0,a.jsx)(eo._v,{className:"text-[10px] leading-relaxed max-w-[260px] px-6 py-4 bg-black text-white font-normal rounded-lg border-white/20 border",children:l.name})]},l.name),(0,a.jsx)("div",{className:"w-full min-w-0 flex gap-2 items-center",children:(0,a.jsx)("div",{className:"inline-block min-w-0 text-base md:text-xs leading-5 font-normal text-neutral-700 text-start",children:(0,a.jsx)("span",{className:"text-white truncate block",children:v})})})]}),n&&(0,a.jsx)(el.qhg,{className:"shrink-0 w-4 h-4",color:u?"white":"#8F8F8F"})]}),(0,a.jsx)("div",{ref:g,children:(0,a.jsx)(J.M,{initial:!1,children:n&&u&&(0,a.jsx)(Y.E.div,{tabIndex:0,className:"absolute left-0 top-100% z-30 w-full pt-1",children:(0,a.jsx)(ex,{onClose:p,category:null==h?void 0:h.category,id:l.id,listItems:c,setListItems:o})})})})]}),(0,a.jsx)("div",{className:(0,x.Z)("w-15  visible md:group-hover:visible",3!==w?"visible":"md:invisible"),children:(0,a.jsx)(ec.F,{title:"Weight",defaultIndex:w,items:em,onSelect:b})}),(0,a.jsxs)("div",{className:"flex lg:hidden lg:group-hover:flex ml-2 gap-x-1 w-fit relative items-center justify-center",children:[(0,a.jsx)("div",{className:"md:hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)(S.Z,{name:"remove",className:"visible md:invisible md:group-hover:visible cursor-pointer w-4 h-4",onClick:()=>d()})}),(0,a.jsx)("div",{className:"md:hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)("div",{className:"w-4 h-4",children:(0,a.jsx)(W.Z,{className:(0,x.Z)(n&&"visible md:invisible md:group-hover:visible w-4 h-4"),onChange:e=>e?s():i(),checked:n,eyeBall:!0})})})]})]})},ef=e=>{let{subject:t,enabled:l,theme:s,enableTheme:i,disableTheme:n,removeTheme:d,editTheme:c,toggleThemeStyle:o,setListItems:u,setThemeStyleWeight:m}=e,[h,f]=r.useState(!1),{user:p}=(0,g.kP)(),v=r.useMemo(()=>!!(s.modifiers&&Array.isArray(s.modifiers))&&s.modifiers.some(e=>"theme"===e.type),[s]),j=r.useMemo(()=>s.modifiers&&Array.isArray(s.modifiers)?s.modifiers.map(e=>{if("modifier"===e.type)return{...e,type:"modifier"};if("theme"===e.type){var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.modifiers}if(!v)return{type:"subject",enabled:!0,weight:e.weight||"100%"}}).filter(e=>e).flat():[],[v,s.modifiers]),b=r.useMemo(()=>!!p&&p.id===s.userId,[p,s]),w=r.useCallback(()=>{let e=j.filter(e=>e.enabled),t=e.map(e=>"subject"===e.type?{type:"subject",data:"subject",id:"subject",enabled:!0,weight:e.weight||"100%"}:{id:e.id,data:e,enabled:!!e.enabled,type:"modifier"});u(t)},[j,u]);return(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-full text-teal-200",children:[(0,a.jsxs)("div",{className:(0,x.Z)("overflow-clip group md:hover:bg-neutral-700/30 rounded-md px-2 h-12 md:h-10 cursor-grab group flex flex-row items-center gap-2 w-full max-w-full",!l&&"opacity-50"),children:[(0,a.jsx)(Y.E.button,{onClick:()=>f(e=>!e),initial:{rotateZ:0},animate:{rotateZ:h?-90:0},transition:{duration:0},children:(0,a.jsx)("div",{className:"w-4 h-4 item-center justify-center",children:(0,a.jsx)(S.Z,{className:" text-neutral-600 cursor-pointer w-4 h-4",name:"triangleArrowDown"})})}),(0,a.jsxs)("div",{className:"group-hover:truncate flex w-full flex-row items-center gap-2 px-2 cursor-grab",children:[(0,a.jsx)(B.y6p,{className:"text-teal-200 shrink-0 w-4 h-4"}),(0,a.jsx)("span",{className:"truncate w-full text-base md:text-xs leading-5 font-normal text-start flex",children:(0,a.jsx)("span",{className:"text-teal-200 w-full truncate",children:s.name})})]}),b&&(0,a.jsx)(Y.E.button,{onClick:c,children:(0,a.jsx)("div",{className:"md:hover:bg-teal-200/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)(eu.Fnt,{className:"md:invisible group-hover:visible teal-200 cursor-pointer w-4 h-4"})})}),(0,a.jsx)(Y.E.button,{onClick:w,children:(0,a.jsx)("div",{className:"md:hover:bg-teal-200/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)(ed.nL$,{className:"md:invisible group-hover:visible teal-200 cursor-pointer w-4 h-4"})})}),(0,a.jsx)("div",{className:"md:hover:bg-teal-200/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)(S.Z,{name:"remove",className:"md:invisible group-hover:visible teal-200 cursor-pointer w-4 h-4",onClick:()=>d()})}),(0,a.jsx)("div",{className:"md:hover:bg-teal-200/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)("div",{className:"w-4 h-4 items-center",children:(0,a.jsx)(W.Z,{className:(0,x.Z)(l&&"md:invisible group-hover:visible","text-teal-200"),onChange:e=>e?i():n(),checked:l,eyeBall:!0})})})]}),!h&&(0,a.jsx)("div",{className:"flex flex-col py-1 gap-1 pl-14",children:j.map(e=>{var i;let n=null!==(i=e.enabled)&&void 0!==i&&i,r=()=>{let t=(null==e?void 0:e.weight)||"100%";return em.findIndex(e=>e.id===t)};switch(e.type){case"modifier":return(0,a.jsxs)("div",{className:(0,x.Z)("px-2 h-12 md:h-10 group flex flex-row items-center gap-2 w-full max-w-full",!n&&"opacity-50"),children:[(0,a.jsx)(ee.BlD,{className:"text-teal-200/80 shrink-0 w-4 h-4"}),(0,a.jsx)("span",{className:"truncate text-base md:text-xs leading-5 font-normal text-start",children:(0,a.jsx)("span",{className:"text-teal-200/80",children:e.name})}),(0,a.jsx)("div",{className:(0,x.Z)("w-15  visible md:group-hover:visible",3!==r()?"visible":"md:invisible"),children:(0,a.jsx)(ec.F,{title:"Strength",defaultIndex:r(),items:em,onSelect:t=>m(s,e,t)})}),(0,a.jsx)("div",{className:"md:hover:bg-teal-200/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)("div",{className:"w-4 h-4 items-center",children:(0,a.jsx)(W.Z,{className:(0,x.Z)(n&&"md:invisible group-hover:visible"),onChange:()=>o(s,e),checked:n,eyeBall:!0})})})]},e.id+e.type);case"subject":return(0,a.jsxs)("div",{className:(0,x.Z)("px-2 h-12 md:h-10 group flex flex-row items-center gap-2 w-full max-w-full",!l&&"opacity-50"),children:[(0,a.jsx)(B.usQ,{className:"text-purple-300/80 shrink-0 px-[1px] w-4 h-4"}),(0,a.jsx)("span",{className:"truncate grow text-base md:text-xs leading-5 font-normal text-purple-200/80 text-start",children:t||"Subject"}),(0,a.jsx)("div",{className:(0,x.Z)("w-15  visible md:group-hover:visible",3!==r()?"visible":"md:invisible"),children:(0,a.jsx)(ec.F,{title:"Strength",defaultIndex:r(),items:em,onSelect:t=>m(s,e,t)})}),(0,a.jsx)("div",{className:"p-1 items-center justify-center rounded-md",children:(0,a.jsx)(S.Z,{name:"lockLocked",className:"text-purple-300/40 w-4 h-4",onClick:()=>{}})})]},e.id)}})})]})},ep=e=>{let{negativeStyles:t,enableListItem:l,disableListItem:s,removeListItem:i,setNegativeListItems:n}=e,[d,c]=r.useState(!0),{setIsOpen:o}=(0,j.dL)(),u=r.useMemo(()=>t.every(e=>e.enabled),[t]),m=r.useMemo(()=>t.filter(e=>e.enabled).length,[t]),h=()=>{u?n(t.map(e=>({...e,enabled:!1}))):n(t.map(e=>({...e,enabled:!0})))},f=()=>{n([])},p=()=>{o(!0)};return(0,a.jsxs)(Y.E.div,{className:"flex flex-col w-full max-w-full text-neutral-400",children:[(0,a.jsxs)("div",{className:"md:hover:bg-neutral-700/30 rounded-md px-2 h-12 md:h-10 cursor-grab group flex flex-row items-center gap-2 w-full max-w-full",children:[(0,a.jsx)(Y.E.button,{onClick:()=>c(e=>!e),initial:{rotateZ:0},animate:{rotateZ:d?-90:0},transition:{duration:0},children:(0,a.jsx)("div",{className:"w-4 h-4 item-center justify-center",children:(0,a.jsx)(S.Z,{className:"text-neutral-600 cursor-pointer w-4 h-4",name:"triangleArrowDown"})})}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2 grow pl-2",children:[(0,a.jsx)(es.GJl,{className:"text-neutral-400 shrink-0 w-4 h-4"}),(0,a.jsx)("span",{className:"truncate text-base md:text-xs leading-5 font-normal text-start",children:(0,a.jsxs)("span",{className:"text-neutral-400",children:["Excluded (",m,")"]})}),(0,a.jsx)("div",{className:"flex-grow"}),m>0&&(0,a.jsx)("div",{className:"md:hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)(S.Z,{name:"remove",className:"visible md:invisible md:group-hover:visible cursor-pointer w-4 h-4",onClick:f})}),t.length>0&&(0,a.jsx)("div",{className:"md:hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)("div",{className:"w-4 h-4",children:(0,a.jsx)(W.Z,{className:(0,x.Z)("visible md:invisible md:group-hover:visible w-4 h-4"),onChange:()=>h(),checked:u,eyeBall:!0})})})]})]}),!d&&(0,a.jsxs)("div",{className:"flex flex-col py-1 gap-1 pl-4",children:[t.map((e,r)=>{let d=e.data;return(0,a.jsx)(ei._l,{draggableId:e.id,index:r,children:r=>(0,a.jsx)("div",{className:(0,x.Z)("w-full"),ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,children:(0,a.jsx)(eh,{id:e.id.toString(),modifier:d,enableModifier:()=>{l(e)},disableModifier:()=>{s(e)},removeModifier:()=>{i(e)},enabled:e.enabled,listItems:t,setListItems:e=>n(e)},e.id)},d.id)},e.id)}),(0,a.jsx)(C.Z,{onClick:p,className:"w-full",size:"small",variant:"tertiary",children:"Add multiple"})]})]})},ev=e=>{let{subject:t,listItems:l,setListItems:s}=e,i=(0,X.OC)(),{setPrompt:n}=(0,m.G)(),d=()=>{let e=i(t||"");if(e.length){let a=e.map(e=>({type:"modifier",id:e.id,data:e,enabled:!0}));s([...l,...a]),n("")}},c=null==t?void 0:t.includes(","),o=r.useMemo(()=>{let e=l.find(e=>"subject"===e.type);if((null==e?void 0:e.type)==="subject"){let t=(null==e?void 0:e.weight)||"100%";return em.findIndex(e=>e.id===t)}return 3},[l]),u=e=>{let t=l.find(e=>"subject"===e.type);if((null==t?void 0:t.type)==="subject"){let i={...t,weight:e},a=l.map(e=>e.type===t.type?i:e);s(a)}};return(0,a.jsxs)("div",{className:"md:hover:bg-neutral-700/30 rounded-md px-2 h-12 md:h-10 cursor-grab group flex flex-row items-center gap-2 w-full max-w-full py-1",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)(S.Z,{className:"ring-none outline-none visible md:invisible group-hover:visible group text-white cursor-grab w-4 h-4",name:"menu"})}),(0,a.jsx)("div",{className:"p-[2px] ml-1.5",children:(0,a.jsx)(B.usQ,{className:"text-purple-300 shrink-0 px-[1px] w-4 h-4"})}),(0,a.jsx)("span",{className:"truncate text-base md:text-xs leading-5 font-normal text-purple-300 text-start w-full",children:t||"Subject"}),(0,a.jsx)("div",{className:(0,x.Z)("bg-w-15  visible md:group-hover:visible",3!==o?"visible":"md:invisible"),children:(0,a.jsx)(ec.F,{title:"Strength",defaultIndex:o,items:em,onSelect:u})}),c&&(0,a.jsx)("button",{onClick:d,className:"md:hover:bg-white/20 active:bg-white/10 p-1 items-center justify-center rounded-md ml-auto cursor-pointer",children:(0,a.jsx)("div",{className:"w-4 h-4",children:(0,a.jsx)(_.UTX,{className:" text-purple-300 shrink-0 px-[1px] w-4 h-4"})})})]})},eg=e=>{let{prompt:t,listItems:l,setListItems:s,editTheme:i,negativeStyles:n,setNegativeStyles:r,effects:d,setEffects:c}=e,{service:o}=(0,m.G2)(),u=e=>{let t=(0,z.cloneDeep)(l),i=t.findIndex(t=>t.id===e.id);-1!==i&&(t[i].enabled=!1,s(t))},x=e=>{let t=(0,z.cloneDeep)(l),i=t.findIndex(t=>t.id===e.id);-1!==i&&(t[i].enabled=!0,s(t))},h=e=>{let t=(0,z.cloneDeep)(n),l=t.findIndex(t=>t.id===e.id);-1!==l&&(t[l].enabled=!1,r(t))},f=e=>{let t=(0,z.cloneDeep)(n),l=t.findIndex(t=>t.id===e.id);-1!==l&&(t[l].enabled=!0,r(t))},p=e=>{r(e)},v=(e,t)=>{let i=(0,z.cloneDeep)(l),a=i.findIndex(t=>t.id===e.id);if(-1!==a){let n=i[a],r=(0,z.get)(n,"data.modifiers",[]);if(Array.isArray(r)){let d=r.findIndex(e=>(null==e?void 0:e.id)===t.id);-1!==d&&(r[d].enabled=!t.enabled,s(i))}}},g=(e,t,i)=>{let a=(0,z.cloneDeep)(l),n=a.findIndex(t=>t.id===e.id);if(-1!==n){let r=a[n],d=(0,z.get)(r,"data.modifiers",[]);if(Array.isArray(d)){let c=d.findIndex(e=>(null==e?void 0:e.id)===t.id||"subject"===e.type&&"subject"===t.type);-1!==c&&(d[c].weight=i,s(a))}}},j=e=>{s(l.filter(t=>t.id!==e.id))},b=e=>{r(n.filter(t=>t.id!==e.id))},w=(e,t,l)=>{let s=Array.from(e),[i]=s.splice(t,1);return s.splice(l,0,i),s},N=(e,t,l,s)=>{let i=Array.from(e),a=Array.from(t),[n]=i.splice(l.index,1);a.splice(s.index,0,n);let r={};return r[l.droppableId]=i,r[s.droppableId]=a,r},y=l.some(e=>"theme"===e.type&&e.enabled),C=e=>"styles"===e?l:n,k=e=>{let{source:t,destination:l}=e;if(l){if(t.droppableId===l.droppableId){let i=w(C(t.droppableId),t.index,l.index);"styles"===t.droppableId?s(i):r(i)}else{let a=N(C(t.droppableId),C(l.droppableId),t,l);s(a.styles),r(a.negativeStyles)}}},Z=e=>({marginBottom:e?40:0});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(ei.Z5,{onDragEnd:k,children:[(0,a.jsx)(ei.bK,{droppableId:"styles",children:(e,n)=>(0,a.jsx)("div",{ref:e.innerRef,className:"w-full",style:Z(n.isDraggingOver),children:l.map((e,n)=>(0,a.jsx)(ei._l,{draggableId:e.id,index:n,children:n=>(0,a.jsx)("div",{className:"w-full",ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,children:(0,a.jsx)(ej,{disableListItem:u,editTheme:i,enableListItem:x,hasThemeApplied:y,listItem:e,listItems:l,prompt:t,removeListItem:j,setListItems:s,toggleThemeStyle:v,setThemeStyleWeight:g})})},e.id))})}),"DALL\xb7E"!==o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei.bK,{droppableId:"negativeStyles",children:e=>(0,a.jsx)("div",{className:"w-full",ref:e.innerRef,children:(0,a.jsx)(ep,{setNegativeListItems:p,enableListItem:f,disableListItem:h,removeListItem:b,negativeStyles:n})})}),(0,a.jsx)(er,{effects:d,setEffects:c})]})]})})},ej=e=>{let{listItem:t,enableListItem:l,disableListItem:s,removeListItem:i,editTheme:n,listItems:r,setListItems:d,toggleThemeStyle:c,setThemeStyleWeight:o,hasThemeApplied:u,prompt:m}=e;switch(t.type){case"modifier":let x=t.data;return(0,a.jsx)(eh,{id:t.id.toString(),modifier:x,enableModifier:()=>l(t),disableModifier:()=>s(t),removeModifier:()=>i(t),enabled:t.enabled,listItems:r,setListItems:d},t.id);case"theme":let h=t.data;return(0,a.jsx)(ef,{toggleThemeStyle:c,theme:h,enableTheme:()=>l(t),disableTheme:()=>s(t),removeTheme:()=>i(t),editTheme:()=>null==n?void 0:n(t.data),enabled:t.enabled,subject:m,setListItems:d,setThemeStyleWeight:o},t.id);case"subject":if(u)return null;return(0,a.jsx)(ev,{listItems:r,setListItems:d,subject:m},"subject")}};var eb=l(66653);let ew=e=>{let{isNew:t,name:l,category:s,isVerified:i,active:n,isEnabled:d,toggleStyle:c}=e,o=r.useMemo(()=>l[0].toUpperCase()+l.slice(1),[l]);return(0,a.jsxs)("button",{className:(0,x.Z)("style-cell text-left flex flex-row items-center p-2 gap-3 rounded w-full hover:bg-neutral-700 focus:bg-neutral-700 text-neutral-400",n&&"bg-neutral-700",d&&"opacity-50"),onClick:()=>{null==c||c()},children:[t?(0,a.jsx)(S.Z,{name:"add",className:"text-inherit cursor-pointer",size:24}):(0,a.jsx)(ee.BlD,{className:"text-neutral-400",size:24}),(0,a.jsxs)("div",{className:"flex flex-col items-start p-0 grow min-h-[36px] justify-center",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center p-0 gap-2",children:[(0,a.jsx)("span",{className:"text-xs leading-5 font-medium text-white",children:t?'Add "'.concat(o,'"'):o}),i&&(0,a.jsx)(eb.Dzu,{className:"text-white",size:16})]}),!t&&(0,a.jsx)("span",{className:"text-xs leading-4 font-normal",children:s})]}),d&&(0,a.jsx)(S.Z,{name:"check",className:"text-blue-500",size:16})]})},eN=e=>{let{searchValue:t,filteredModifiers:l,selectedStyleIndex:s,setSelectedStyleIndex:i,activeStyles:n,setActiveStyles:d,toggleStyle:c,negativeStyles:o,setNegativeStyles:u,effects:x,setEffects:h}=e,{prompt:f}=(0,m.G)(),{setEditingTheme:p}=(0,m.ZR)(),v=r.useCallback(e=>{var t;return null===(t=n.find(t=>{var l;return"modifier"===t.type&&(null===(l=t.data)||void 0===l?void 0:l.name)===e.name}))||void 0===t?void 0:t.enabled},[n]),g=r.useCallback(e=>{p(e)},[p]);return(0,a.jsx)(J.M,{children:t.trim().length>0?(0,a.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},children:l.map((e,t)=>{var l;return(0,a.jsx)(ew,{active:t===s,name:e.name,category:(null==e?void 0:null===(l=e.categories)||void 0===l?void 0:l.map(e=>e.category.name).join(", "))||"unknown",isVerified:e.verified,isEnabled:v(e),toggleStyle:()=>{c(e),i(-1)},isNew:e.id.startsWith("newStyle")},e.id)})},"search"):(0,a.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},className:"pl-2 flex flex-col gap-1 items-start px-0 ml-[-1.5rem] w-[calc(100%+1.5rem)] min-w-0",children:(0,a.jsx)(eg,{prompt:f,listItems:n,setListItems:d,editTheme:g,negativeStyles:o,setNegativeStyles:u,effects:x,setEffects:h})},"styles")})};var ey=l(73171),eC=l(71430),ek=l(36647);let eZ=e=>{let{height:t=16,width:l=16,...s}=e;return(0,a.jsx)(ek.ny,{width:l,height:l,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.6691 7.06612L14.5891 5.72612C14.4158 5.50361 14.3087 5.23673 14.2801 4.95612L14.0901 3.25812C14.0516 2.91882 13.8993 2.60258 13.6579 2.36103C13.4165 2.11948 13.1004 1.96687 12.7611 1.92812L11.0621 1.73812C10.7621 1.70812 10.5021 1.57912 10.2821 1.40912L8.94414 0.330117C8.67755 0.117045 8.34642 0.000976563 8.00514 0.000976562C7.66386 0.000976563 7.33273 0.117045 7.06614 0.330117L5.72614 1.41012C5.50374 1.58382 5.23686 1.69127 4.95614 1.72012L3.25814 1.91012C2.55814 1.99012 2.00814 2.54012 1.92814 3.23912L1.73814 4.93812C1.70814 5.23812 1.57914 5.49812 1.40914 5.71812L0.32914 7.05512C0.116069 7.32171 0 7.65284 0 7.99412C0 8.33539 0.116069 8.66653 0.32914 8.93312L1.40914 10.2731C1.57914 10.4931 1.68914 10.7531 1.71914 11.0431L1.90914 12.7411C1.98914 13.4411 2.53914 13.9911 3.23814 14.0711L4.93714 14.2611C5.23714 14.2911 5.49714 14.4201 5.71714 14.5901L7.05614 15.6701C7.60614 16.1091 8.38514 16.1091 8.93414 15.6701L10.2741 14.5901C10.4941 14.4201 10.7541 14.3101 11.0441 14.2801L12.7421 14.0901C13.4421 14.0101 13.9921 13.4601 14.0721 12.7611L14.2621 11.0621C14.2921 10.7621 14.4211 10.5021 14.5911 10.2821L15.6711 8.94312C15.8842 8.67653 16.0003 8.3454 16.0003 8.00412C16.0003 7.66284 15.8842 7.33171 15.6711 7.06512L15.6691 7.06612ZM6.49914 12.0101L2.99914 8.51012L4.49914 7.01012L6.49914 9.01012L11.4991 4.01012L12.9991 5.56012L6.49914 12.0101Z",fill:"currentColor"})})};var eS=l(41664),eM=l.n(eS);function eI(e){let{children:t}=e;return(0,a.jsx)("div",{className:"hover:bg-neutral-800 rounded-lg flex flex-row items-center w-full text-left",children:t})}function ez(e){let{children:t}=e;return(0,a.jsx)("div",{className:"mx-1 h-full overflow-y-scroll overflow-x-hidden scrollbar-thin scrollbar-thumb-neutral-700 scrollbar-track-transparent scrollbar-thumb-rounded-md",children:t})}function eE(e){let{isVerified:t,name:l}=e;return(0,a.jsxs)("div",{className:"flex items-center w-full gap-2",children:[(0,a.jsx)(ee.BlD,{className:"shrink-0 text-white",size:16}),(0,a.jsx)("p",{className:"truncate text-sm leading-5 font-medium text-neutral-700 text-start",children:(0,a.jsx)("span",{className:"text-white",children:l})}),(0,a.jsx)("div",{className:"flex w-4 h-4",children:t&&(0,a.jsx)(eZ,{color:"white"})})]})}let eD={initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0}};function eL(e){let{isVerified:t,isEnabled:l,name:s,onEnable:i,onDisable:n,styleId:d}=e,c=(0,V.useRouter)(),{user:o}=(0,g.kP)(),u=r.useCallback(e=>{e.stopPropagation(),e.preventDefault(),c.push("/admin/style/".concat(d))},[c,d]),m=r.useCallback(()=>{l?n():i()},[l,n,i]);return(0,a.jsxs)("button",{onClick:m,className:"group p-2 flex flex-row items-center gap-2 w-full max-w-full relative",children:[(0,a.jsx)("div",{className:(0,x.Z)({"opacity-50":l}),children:(0,a.jsx)(eE,{name:s,isVerified:t})}),(0,a.jsx)("span",{className:"grow"}),(null==o?void 0:o.isAdmin)&&(0,a.jsx)("button",{className:"hover:bg-[#404040] hover:text-white text-[#8F8F8F] w-8 aspect-square items-center justify-center rounded-md active:bg-white/20 active:scale-95 relative hidden group-hover:flex",onClick:u,children:(0,a.jsx)(S.Z,{name:"settings",size:16,className:"text-neutral-400 "})}),(0,a.jsx)("button",{className:"hover:bg-[#404040] hover:text-white text-[#8F8F8F] w-8 aspect-square flex items-center justify-center rounded-md active:bg-white/20 active:scale-95 relative",children:(0,a.jsx)(J.M,{initial:!1,children:l?(0,a.jsxs)(Y.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:eD,className:"absolute left-0 top-0 flex items-center justify-center w-full h-full",children:[(0,a.jsx)("div",{className:"block group-hover:hidden",children:(0,a.jsx)(S.Z,{name:"check",className:"text-[#3B82F6] cursor-pointer",size:16})}),(0,a.jsx)("div",{className:"hidden group-hover:block",children:(0,a.jsx)(S.Z,{name:"remove",className:"text-inherit cursor-pointer",size:16})})]},"enabled"):(0,a.jsx)(Y.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:eD,className:"absolute left-0 top-0 flex items-center justify-center w-full h-full",children:(0,a.jsx)(S.Z,{name:"add",className:"text-inherit cursor-pointer",size:16})},"disabled")})})]})}(s=i||(i={})).CATEGORIES="CATEGORIES",s.STYLES="STYLES";let eT=(e,t)=>{var l;return null===(l=t.find(t=>{var l;return"modifier"===t.type&&(null===(l=t.data)||void 0===l?void 0:l.name)===e.name}))||void 0===l?void 0:l.enabled};function eR(e){let{setSearchValue:t}=e,[l,s]=r.useState(""),i=(0,g.Nr)(l,250);r.useEffect(()=>{t(i)},[i,t]);let n=r.useCallback(e=>s(e.target.value),[]);return(0,a.jsxs)("div",{className:"flex items-center px-4 py-2 gap-3 w-full",children:[(0,a.jsx)(S.Z,{color:"#8F8F8F",name:"search",size:18}),(0,a.jsx)("input",{autoFocus:!0,className:"text-white bg-transparent border-0 outline-none w-full",type:"text",placeholder:"Search styles...",onChange:n})]})}function eF(e){let{listItems:t,onModifierChange:l,onCategorySelect:s}=e,{user:i}=(0,g.kP)(),n=(0,X.z9)(),[d,c]=r.useState(""),{categories:o}=(0,X.yK)(),u=r.useMemo(()=>d?n(d):[],[n,d]);return(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 h-full w-full",children:[(0,a.jsx)(eR,{searchValue:d,setSearchValue:c}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2",children:[(null==i?void 0:i.isAdmin)&&(0,a.jsx)(eM(),{href:"/admin/style/add",className:"w-full",children:(0,a.jsxs)(C.Z,{size:"small",variant:"tertiary",className:"w-full",children:[(0,a.jsx)(ee.BlD,{size:16})," Create New"]})}),d.length>0&&(0,a.jsxs)(C.Z,{size:"small",variant:"tertiary",className:"w-full",onClick:()=>{l({categories:[{category:{id:"custom",name:"Custom"}}],id:"newStyle"+Math.random().toString(),name:d,strength:0,verified:!1},!0)},children:[(0,a.jsx)(S.Z,{name:"add",size:16}),' Add "',d,'"']})]}),(0,a.jsxs)(ez,{children:[(0,Q.H)(d)&&0===u.length&&(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-white",children:"No results"}),d?u.map(e=>(0,a.jsx)(eI,{children:(0,a.jsx)(eL,{styleId:e.id,isVerified:e.verified,name:e.name,isEnabled:eT(e,t),onEnable:()=>l(e,!0),onDisable:()=>l(e,!1)})},e.id)):o.map(e=>(0,a.jsxs)("button",{className:"cursor-pointer flex items-center justify-between w-full py-2 px-4 hover:bg-neutral-800 rounded-lg text-left",onClick:()=>s(e.name),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium capitalize",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-[#A3A3A3]",children:[e.styles.length," styles"]})]}),(0,a.jsx)(S.Z,{name:"chevRight",size:18,className:"text-white"})]},e.id))]})]})}function eA(e){let{listItems:t,onModifierChange:l,category:s,onBackClick:i}=e,[n,d]=r.useState(""),c=(0,X.z9)(),{categories:o}=(0,X.yK)(),u=r.useMemo(()=>o.find(e=>e.name===s),[o,s]),m=r.useMemo(()=>n?c(n):(null==u?void 0:u.styles)||[],[c,n,null==u?void 0:u.styles]);return(0,a.jsxs)("div",{className:"flex flex-col gap-y-2 h-full w-full",children:[(0,a.jsxs)("button",{className:"flex items-center mx-1 px-2 py-2 gap-3",onClick:i,children:[(0,a.jsx)(S.Z,{name:"lineArrowBack",className:"text-white",size:28}),(0,a.jsx)("p",{className:"font-semibold text-white text-lg capitalize",children:s})]}),(0,a.jsx)(eR,{searchValue:n,setSearchValue:d}),0===m.length&&(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-white",children:"No results"}),m.length>0&&(0,a.jsx)(ez,{children:m.map(e=>(0,a.jsx)(eI,{children:(0,a.jsx)(eL,{styleId:e.id,isVerified:e.verified,name:e.name,isEnabled:eT(e,t),onEnable:()=>l(e,!0),onDisable:()=>l(e,!1)})},e.id))})]})}let e_=e=>{let{listItems:t,setListItems:l}=e,[s,n]=r.useState(""),[d,c]=r.useState(i.CATEGORIES),o=(0,X.GB)(),{categories:u}=(0,X.yK)(),m=r.useCallback(()=>{c(i.CATEGORIES)},[]),x=r.useCallback((e,s)=>{if(e.id.startsWith("newStyle"))o(e.name);else{let i=(0,z.cloneDeep)(t),a=i.findIndex(t=>{var l;return"string"!=typeof t.data&&(null===(l=t.data)||void 0===l?void 0:l.name)===e.name});s&&-1===a?(i.push({id:e.name+Math.random().toString(),data:e,enabled:!0,type:"modifier"}),l(i)):s&&-1!==a?(i[a].enabled=!0,l(i)):s||-1===a||(i[a].enabled=!1,l(i))}},[o,t,l]),h=r.useMemo(()=>{var e;if(!s)return[];let t=(null===(e=u.find(e=>e.name===s))||void 0===e?void 0:e.styles)||[];return t},[u,s]),f=r.useCallback(e=>{n(e),c(i.STYLES)},[]);return(0,a.jsxs)("div",{className:"w-full h-full flex flex-nowrap items-stretch overflow-clip",children:[(0,a.jsx)(Y.E.div,{className:"flex-grow flex-shrink-0 w-full",animate:{x:d===i.CATEGORIES?"0%":"-100%"},transition:{duration:.3},style:{x:"0%"},children:(0,a.jsx)(eF,{onModifierChange:x,listItems:t,setListItems:l,onCategorySelect:f})}),(0,a.jsx)(Y.E.div,{className:"flex-grow flex-shrink-0 w-full",animate:{x:d===i.STYLES?"-100%":"0%"},style:{x:"0%"},transition:{duration:.3},children:(0,a.jsx)(eA,{modifiers:h,onModifierChange:x,listItems:t,category:s,onBackClick:m})},"styles")]})},eP=e=>{let{handleClose:t,activeStyles:l,setActiveStyles:s}=e;return(0,a.jsxs)("div",{className:"bg-neutral-900 border border-white/20 rounded-2xl py-4 absolute -top-2 -translate-x-1/2 left-1/2 z-30 w-[calc(100%+31px)] shadow-[0_35px_60px_-15px_rgba(0,0,0,0.3)] flex flex-col gap-y-2 h-[60vh] lg:h-[45vh]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,a.jsx)("p",{className:"text-white text-lg font-semibold",children:"Add a style"}),(0,a.jsx)(C.Z,{size:"small",variant:"accent",onClick:t,className:"shrink-0",children:(0,a.jsx)(Y.E.div,{initial:{rotateZ:0},animate:{rotateZ:-45},children:(0,a.jsx)(S.Z,{name:"add",className:"text-white",size:16})})})]}),(0,a.jsx)(e_,{listItems:l,setListItems:e=>s(e)})]})},eO=e=>{let{searchValue:t,setSearchValue:l,filteredModifiersLength:s,selectedStyleIndex:i,setSelectedStyleIndex:n,toggleSelectedStyle:d,activeStyles:c,setActiveStyles:o}=e,[u,m]=r.useState(!1),h=r.useRef(),f=r.useRef(),[p,v]=r.useState(""),g=(0,ey.N)(p,250);r.useEffect(()=>{l(g)},[g,l]);let j=r.useCallback(()=>{if(u){var e;m(!1),null===(e=f.current)||void 0===e||e.focus()}},[u]),b=r.useCallback(()=>{m(!0)},[]),w=r.useCallback(e=>{v(e.target.value),n(0)},[n]);(0,et.O)(h.current,j);let N=r.useCallback(e=>{"Tab"===e.key&&e.shiftKey||"ArrowUp"===e.key?(e.preventDefault(),n(i-1<0?s-1:i-1)):"Tab"===e.key||"ArrowDown"===e.key?(e.preventDefault(),n((i+1)%s)):"Enter"===e.key&&t.trim().length>0?(e.preventDefault(),l(""),f.current.value="",d()):"Escape"===e.key&&(e.preventDefault(),l(""),e.currentTarget.blur())},[s,t,i,l,n,d]),y=r.useCallback(e=>{if(e.relatedTarget&&e.relatedTarget.classList.contains("style-cell")){e.target.focus();return}},[]),k=(0,eC.C)();return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("div",{ref:h,children:u&&(0,a.jsx)(eP,{activeStyles:c,setActiveStyles:o,handleClose:j})}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-4 py-2 w-full",children:[(0,a.jsx)(S.Z,{className:"text-white",name:"search",size:16}),(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("input",{className:"text-sm text-white bg-transparent border-0 outline-none grow",type:"text",placeholder:"Search styles...",autoFocus:k,ref:f,onChange:w,onKeyDown:N,onBlur:y}),(0,a.jsx)(Y.E.button,{tabIndex:-1,className:(0,x.Z)("p-1 rounded-full",{invisible:!t}),whileTap:"tap",whileHover:"hover",onClick:()=>{l(""),n(0)},children:(0,a.jsx)(Y.E.div,{variants:{tap:{scale:.9},hover:{rotateZ:90}},children:(0,a.jsx)(S.Z,{name:"closeFilled",size:16,className:"text-neutral-400"})})})]}),(0,a.jsx)(C.Z,{size:"small",variant:"tertiary",onClick:b,className:"shrink-0",children:(0,a.jsx)(Y.E.div,{animate:{rotateZ:u?-45:0},children:(0,a.jsx)(S.Z,{name:"add",className:"text-white",size:16})})})]})]})},eq=e=>{let{activeStyles:t,setActiveStyles:l,toggleStyle:s,showSaveAsThemeButton:i,handleSaveAsThemeClick:n,negativeStyles:d,setNegativeStyles:c,effects:o,setEffects:u}=e,[m,x]=r.useState(""),[h,f]=r.useState(0),p=(0,X.z9)(),v=r.useMemo(()=>m?{categories:[{category:{id:"custom"+Math.random(),name:"Unknown"}}],id:"newStyle"+Math.random(),name:m,strength:0,verified:!1}:null,[m]),g=r.useMemo(()=>{if(!m)return[];let e=p(m);return v&&e.push(v),e},[p,m,v]),j=()=>{let e=g[h];e&&s(e)};return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)(eO,{searchValue:m,setSearchValue:x,filteredModifiersLength:g.length,selectedStyleIndex:h,setSelectedStyleIndex:f,toggleSelectedStyle:j,activeStyles:t,setActiveStyles:l}),i&&(0,z.isFunction)(n)&&(0,a.jsxs)(C.Z,{size:"small",variant:"tertiary",className:"w-full",onClick:n,children:[(0,a.jsx)(B.y6p,{size:16})," Save as template"]}),(0,a.jsx)(eN,{searchValue:m,filteredModifiers:g,selectedStyleIndex:h,setSelectedStyleIndex:f,activeStyles:t,setActiveStyles:l,toggleStyle:s,negativeStyles:d,setNegativeStyles:c,effects:o,setEffects:u})]})},eB=()=>{let{activeStyles:e,setActiveStyles:t,toggleStyle:l}=(0,m.jf)(),{activeNegativeStyles:s,setActiveNegativeStyles:i}=(0,m.PH)(),{effects:n,setEffects:r}=(0,m.tE)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eq,{negativeStyles:s,setNegativeStyles:i,activeStyles:e,setActiveStyles:t,toggleStyle:l,effects:n,setEffects:r})})};var eH=l(49808);let eU=["Styles","Settings"],eV={styles:0,settings:1,images:2},eW={0:"styles",1:"settings"},eG=e=>{let{children:t}=e,{createThemeTab:l,setCreateThemeTab:s}=(0,U.M)(),i=r.useMemo(()=>eV[l],[l]),n=r.useCallback(e=>{let t=eW[e];s(t)},[s]);return(0,a.jsxs)(eH.O.Group,{selectedIndex:i,onChange:n,children:[(0,a.jsx)(eH.O.List,{className:"flex flex-wrap gap-4 border-b border-neutral-700 mt-2 w-full text-neutral-400",children:eU.map(e=>(0,a.jsx)(eH.O,{className:e=>{let{selected:t}=e;return(0,x.Z)("inline-block px-0 py-4 rounded-t-lg border-b-[3px] text-sm leading-5 font-medium",t?"text-white border-white":"border-transparent")},children:e},e))}),(0,a.jsx)(eH.O.Panels,{className:"w-full",children:t.map((e,t)=>(0,a.jsx)(eH.O.Panel,{children:e},t))})]})},eK=()=>{let[e,t]=r.useState(),{editingTheme:l,setEditingTheme:s,setEditingThemeParams:i}=(0,m.ZR)(),[d,o]=r.useState(!1),{createThemeTab:u,setCreateThemeTab:x}=(0,U.M)(),h=(0,M.d)(),f=(0,Z.Wg)(),p=(0,Z.se)(),{setActiveStyles:v,setTheme:j}=(0,m.Lc)(),b=(0,n.W)("editingThemeId"),{user:w}=(0,g.kP)(),{service:N}=(0,m.G2)(),{customModel:y}=(0,m.kT)(),{stableDiffusionVersion:E}=(0,m.s0)(),D=(0,g.nr)(["editingThemeId","createThemeTab"]),{cfgScale:T}=(0,m.c8)(),{steps:R}=(0,m.h4)(),{canvas:F}=(0,m.$P)(),{output:A}=(0,m.tW)(),{sampler:_}=(0,m.b9)(),{seed:P}=(0,m.WJ)(),{referenceImage:O,applyReferenceImage:q}=(0,m.YN)(),{referencePercentage:B}=(0,m.No)(),H=r.useMemo(()=>"new"===b,[b]);r.useEffect(()=>{"new"===b||!b||(null==l?void 0:l.id)||(0,k.p8)([b]).then(e=>{let i=e[0];if(i.userId===(null==w?void 0:w.id)||(null==w?void 0:w.isAdmin)){if(t(l),!l.id){let a=(0,z.get)(i,"meta.referenceImageUrl",void 0);a&&q(a)}s(i)}})},[q,l,l.id,b,e,s,null==w?void 0:w.id,null==w?void 0:w.isAdmin]),r.useEffect(()=>{!e&&l&&(null==l?void 0:l.id)&&t(l)},[l,e]);let V=r.useCallback(()=>{D([void 0,void 0]),setTimeout(()=>{s(void 0)},200)},[s,D]),W=r.useMemo(()=>{let e=l.meta||{},t=O&&O.startsWith("data:image"),s=!O&&e.referenceImageUrl;if(t||s)return!0;let i=(0,z.get)(l,"meta.cfgScale",void 0);if(T!==i)return!0;let a=(0,z.get)(l,"meta.steps",void 0);if(R!==a)return!0;let n=(0,z.get)(l,"meta.canvas",void 0);if(F!==n)return!0;let r=(0,z.get)(l,"meta.output",void 0);if(A!==r)return!0;let d=(0,z.get)(l,"meta.referencePercentage",void 0);if(B!==d)return!0;let c=(0,z.get)(l,"meta.sampler",void 0);if(_!==c)return!0;let o=(0,z.get)(l,"meta.seed",void 0);if(P!==o)return!0},[F,T,l,A,B,_,P,R]),G=r.useMemo(()=>{if(W||!l||!e||l.name!==e.name||l.image!==e.image||l.accentColor!==e.accentColor||l.category!==e.category)return!0;let t=e.meta||{},s=l.meta||{};if(JSON.stringify(t)!==JSON.stringify(s))return!0;let i=(0,z.get)(l,"modifiers").filter(e=>e.enabled),a=(0,z.get)(e,"modifiers").filter(e=>e.enabled);if(JSON.stringify(null==i?void 0:i.map(e=>null==e?void 0:e.name))!==JSON.stringify(null==a?void 0:a.map(e=>null==e?void 0:e.name)))return!0;let n=(0,z.get)(l,"negativeModifiers").filter(e=>e.enabled),r=(0,z.get)(e,"negativeModifiers").filter(e=>e.enabled);if(JSON.stringify(null==n?void 0:n.map(e=>null==e?void 0:e.name))!==JSON.stringify(null==r?void 0:r.map(e=>null==e?void 0:e.name)))return!0},[l,W,e]),K=r.useCallback(async()=>{let e=l.meta||{},s={...e,cfgScale:T,steps:R,canvas:F,output:A,referencePercentage:B,sampler:_,seed:P},i=O&&O.startsWith("data:image"),a=!O&&e.referenceImageUrl,n={...l,meta:s,referenceImage:i?O:a?"remove":void 0};p.mutate(n,{onSuccess:e=>{t(e),j(e),h("Template updated successfully!"),o(!1)}})},[F,T,l,h,A,O,B,_,P,j,R,p]),X=r.useCallback(async()=>{let e=(0,z.get)(l,"meta.service",N),t=(0,z.get)(l,"meta.model",y),s=(0,z.get)(l,"meta.stableDiffusionVersion",E);f.mutate({...l,meta:{service:e,helperText:"",stableDiffusionVersion:s,model:t,cfgScale:T,steps:R,canvas:F,output:A,referencePercentage:B,sampler:_,seed:P},referenceImage:O&&O.startsWith("data:image")?O:void 0},{onSuccess:e=>{h("Template created successfully!"),v([...I.E3.activeStyles,{type:"theme",data:e,id:e.id,enabled:!0}]),o(!1),V()}})},[l,N,y,E,T,R,F,A,B,_,P,f,O,h,v,V]),J=r.useCallback(async()=>(o(!0),H)?X():K(),[X,H,K]),Y=async e=>{if(null==l?void 0:l.id){let t=await fetch("/api/theme/".concat(l.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({thumbnails:e})});h("Highlights saved successfully");let i=await t.json();s(i)}},Q=async e=>{await Y(e),x("settings")};return"images"===u?(0,a.jsx)("div",{className:"flex flex-col items-start lg:py-4 lg:px-6 w-full lg:mt-4",children:(0,a.jsx)(L,{themeId:null==l?void 0:l.id,onClose:()=>x("settings"),onSelectImages:Q,thumbnails:l.thumbnails})}):(0,a.jsxs)("div",{className:"flex flex-col items-start lg:py-4 lg:px-6 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center p-0 w-full lg:mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center p-0 text-white",children:[(0,a.jsx)("div",{className:"flex flex-row items-start py-0 pl-0 pr-5 cursor-pointer",onClick:()=>V(),children:(0,a.jsx)(S.Z,{name:"close",size:16})}),(0,a.jsxs)("span",{className:"text-base leading-6 font-semibold",children:[(null==l?void 0:l.id)?"Save":"Create"," Template"]})]}),(0,a.jsxs)(C.Z,{disabled:!G||d,onClick:J,size:"small",variant:"accent",children:[d&&(0,a.jsx)("div",{className:"flex flex-row items-center justify-center",children:(0,a.jsx)(S.Z,{name:"loadingSpinner",size:16,className:"animate-spin"})}),d?"Saving...":"Save"]})]}),(0,a.jsx)("div",{className:"mt-4 w-full",children:(0,a.jsx)(c.Z,{value:l.name,label:"Template name",type:"text",onChange:e=>i({name:e.target.value}),size:"medium",className:"w-full",autoFocus:!0})}),(0,a.jsx)("div",{className:"flex flex-col items-start p-0 gap-6 w-full",children:(0,a.jsxs)(eG,{children:[(0,a.jsx)(eB,{}),(0,a.jsx)($,{close:V,isCreating:H})]})})]})};var e$=l(56374),eX=l(12100),eJ=l(48202),eY=l(78153),eQ=l(43901);function e0(e){let{label:t,onChange:l,value:s,options:i,locked:n=!1}=e;return(0,a.jsxs)(R.E,{className:"w-full",value:s,onChange:l,children:[(0,a.jsxs)(R.E.Label,{className:"text-xs font-semibold text-left text-white flex gap-2 items-center py-3",children:[n&&(0,a.jsx)(S.Z,{name:"lockLocked",size:16})," ",t]}),(0,a.jsx)("div",{className:"flex justify-between gap-3",children:i.map(e=>(0,a.jsx)(R.E.Option,{as:"button",value:e.value,disabled:e.disabled,className:"flex-1 rounded-lg cursor-pointer disabled:cursor-wait disabled:ring-offset-transparent group",children:t=>{let{checked:l,disabled:s}=t;return(0,a.jsx)("div",{className:(0,x.Z)("text-white focus:ring-offset-2 focus:ring-2 focus:ring-blue-500 flex-1 border border-solid rounded-lg  py-4 px-2 select-none focus:outline-none group-disabled:border-0 ",{"bg-blue-500/20 border-blue-500":l,"border-neutral-700":!l,"outline-none ring-0 opacity-50":s}),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-y-0",children:[e.icon&&(0,a.jsx)("div",{className:(0,x.Z)("mb-2",l?"fill-white":"fill-neutral-700"),children:e.icon&&e.icon}),(0,a.jsx)("div",{className:"text-xs font-semibold",children:e.label}),e.sublabel&&(0,a.jsx)("div",{className:"text-xs font-normal",children:e.sublabel})]})})}},e.value))})]})}var e1=l(30894),e2=l(96688),e4=l(41066),e5=l.n(e4);function e6(e){let{step:t=1,min:l,max:s,value:i,onChange:n}=e;return(0,a.jsx)("input",{type:"range",className:(0,x.Z)("w-full grow shrink h-0.5 bg-neutral-700 rounded-sm appearance-none cursor-pointer focus:bg-white/80 text-sm",e5().range),max:s,min:l,step:t,value:i,onChange:e=>n&&n(e.target.valueAsNumber)})}var e3=l(55559),e7=l(2662);function e8(e){let{isOpen:t,onCancel:l,onSubmit:s,imageData:i}=e,n=(0,r.useRef)(null),[d,c]=(0,r.useState)(30),[o,u]=(0,r.useState)({width:512,height:512}),m=(0,r.useRef)(null),[x,h]=(0,r.useState)({width:512,height:512});r.useEffect(()=>{if(m.current){let{width:e,height:t}=m.current;h({width:e,height:t})}},[m,o,i]);let f=async e=>{let t=new Image;await new Promise(l=>{t.onload=l,t.src=e});let{width:l,height:s}=t;return{width:512,height:s*(512/l)}};return r.useEffect(()=>{i&&f(i).then(e=>{u(e)})},[i]),(0,a.jsxs)(e3.Z,{isOpen:t,handleClose:l,isMask:!0,children:[(0,a.jsx)(e7.Z,{title:"Mask the part you want to edit",onCancel:l,onSubmit:async()=>{var e;let t=await (null===(e=n.current)||void 0===e?void 0:e.exportImage("png"));i&&s(t||i)}}),(0,a.jsx)("div",{className:"flex justify-center ",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{ref:m,alt:"",src:i,width:"100%",height:"auto"}),(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)(e2.x,{className:"w-full",ref:n,canvasColor:"transparent",width:x.width+"px",height:x.height+"px",exportWithBackgroundImage:!0,strokeWidth:d,strokeColor:"#000"})})]})}),(0,a.jsxs)("div",{className:"flex justify-center gap-x-6 py-4",children:[(0,a.jsx)(C.Z,{variant:"tertiary",size:"icon",onClick:()=>{var e;return n.current&&(null===(e=n.current)||void 0===e?void 0:e.undo())},children:(0,a.jsx)(ed.V3h,{})}),(0,a.jsx)(C.Z,{variant:"tertiary",size:"icon",onClick:()=>{var e;return n.current&&(null===(e=n.current)||void 0===e?void 0:e.redo())},children:(0,a.jsx)(ed.$QW,{})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-5 px-20 pb-10 pt-5",children:[(0,a.jsx)("label",{className:"text-xs text-center",children:"Eraser size"}),(0,a.jsx)(e6,{min:2,max:100,value:d,step:2,onChange:e=>c(e)})]})]})}let e9=e=>{let{controlNetModel:t}=e,l={canny:["images/controlnet/original-portrait-min.jpg","images/controlnet/canny-min.jpg"],depth:["images/controlnet/original-portrait-min.jpg","images/controlnet/depth-min.jpg"],hed:["images/controlnet/original-portrait-min.jpg","images/controlnet/hed-min.jpg"],normal:["images/controlnet/original-portrait-min.jpg","images/controlnet/normal-min.jpg"],mlsd:["images/controlnet/original-room-min.jpg","images/controlnet/mlsd-min.jpg"],scribble:["images/controlnet/original-portrait-min.jpg","images/controlnet/scribble-min.jpg"],seg:["images/controlnet/original-room-min.jpg","images/controlnet/seg-min.jpg"],openpose:["images/controlnet/original-pose-min.jpg","images/controlnet/openpose-min.jpg"],lineart:["",""],ip2p:["",""],tile:["",""]};return t&&"none"!==t?(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 w-full ",children:[(0,a.jsx)("div",{className:"rounded-md overflow-clip",children:(0,a.jsx)("img",{className:"w-full h-auto bg-white/10 aspect-square",src:l[t][0],alt:"Image 1"})}),(0,a.jsx)("div",{className:"rounded-md overflow-clip ",children:(0,a.jsx)("img",{className:"w-full h-auto bg-white/10 aspect-square",src:l[t][1],alt:"Image 2"})})]}):null},te=e=>{let{controlNetItem:t,setItem:l}=e,[s,i]=r.useState(!1),{referencePercentage:n,setReferencePercentage:d}=(0,m.No)(),x=e=>{let s=t.settings;s&&l(t.id,{settings:{...s,...e}})},h=e=>{l(t.id,{maskImage:e})};return(0,a.jsxs)("div",{children:[s&&(0,a.jsx)(e8,{isOpen:s,imageData:t.image,onCancel:()=>i(!1),onSubmit:e=>{h(e),i(!1)}}),(0,a.jsxs)("div",{className:"relative flex flex-col items-center justify-center px-4 pb-4 md:w-[420px] bg-neutral-800 shadow-md --radix-popover-content-available-height",children:[(0,a.jsxs)("div",{className:"sticky -top-2 z-10 flex items-center justify-between w-full pt-1 pb-2 bg-neutral-800",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-left text-white",children:"Reference Settings"}),(0,a.jsx)(C.Z,{autoFocus:!1,variant:"ghost",size:"icon",onClick:()=>{},children:(0,a.jsx)(_.bjh,{name:"close",color:"white",size:16})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 text-white w-full",children:[(0,a.jsx)("label",{className:"text-xs font-semibold text-left text-white",children:"Reference Image"}),(0,a.jsx)(O,{onURLEnter:async e=>{let s=await (0,m.n$)(e);l(t.id,{image:s})},onChange:e=>{l(t.id,{image:e})},value:t.image,mask:t.maskImage})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-6 pt-4 w-full",children:["none"===t.model&&t.image&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(C.Z,{size:"small",variant:"tertiary",onClick:()=>{i(!0)},children:"Edit photo"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,a.jsx)(_.VM3,{className:"text-white"}),(0,a.jsx)("span",{className:"text-sm",children:"Image strength"})]}),(0,a.jsx)(c.Z,{min:0,max:80,type:"number",value:n,onChange:e=>d(e.target.valueAsNumber),className:"w-12 text-center"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(v,{min:0,max:80,step:1,value:[n],onValueChange:e=>d(e[0])})})]})]}),"none"!==t.model&&(0,a.jsx)(o.Z,{value:t.model,size:"medium",label:"ControlNet",listBoxClassName:"min-w-[220px]",options:tl.map(e=>({disabled:!1,value:e.id})),onChange:e=>{l(t.id,{model:e})}}),"none"!==t.model&&(null==t?void 0:t.settings)&&(0,a.jsxs)("div",{className:"flex flex-col gap-10",children:[(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"w-full flex",children:[(0,a.jsx)("div",{className:"flex gap-x-3 items-center grow shrink",children:(0,a.jsx)("span",{className:"text-sm",children:"Strength"})}),(0,a.jsx)(c.Z,{min:0,max:100,step:1,type:"number",value:(100*t.settings.controlnet_conditioning_scale).toFixed(0),onChange:e=>{console.log(e.target.valueAsNumber),console.log(Number((e.target.valueAsNumber/100).toFixed(2))),x({controlnet_conditioning_scale:Number((e.target.valueAsNumber/100).toFixed(2))})},className:"w-12 text-center"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(v,{min:0,max:1,step:.1,value:[t.settings.controlnet_conditioning_scale],onValueChange:e=>x({controlnet_conditioning_scale:e[0]})})})]})}),t.settings&&"canny"===t.model&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"w-full flex",children:[(0,a.jsx)("div",{className:"flex gap-x-3 items-center grow shrink",children:(0,a.jsx)("span",{className:"text-xs font-medium text-left text-white",children:"Low threshold"})}),(0,a.jsx)(c.Z,{min:0,max:255,step:1,type:"number",value:t.settings.canny_low_threshold,onChange:e=>x({canny_low_threshold:e.target.valueAsNumber}),className:"w-12 text-center"})]}),(0,a.jsx)(v,{min:0,max:255,step:1,value:["number"==typeof t.settings.canny_low_threshold?t.settings.canny_low_threshold:100],onValueChange:e=>x({canny_low_threshold:e[0]})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"w-full flex",children:[(0,a.jsx)("div",{className:"flex gap-x-3 items-center grow shrink",children:(0,a.jsx)("span",{className:"text-sm",children:"High threshold"})}),(0,a.jsx)(c.Z,{min:0,max:255,step:1,type:"number",value:t.settings.canny_high_threshold,onChange:e=>x({canny_high_threshold:e.target.valueAsNumber}),className:"w-12 text-center"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(v,{min:0,max:255,step:1,value:[t.settings.canny_high_threshold||300],onValueChange:e=>x({canny_high_threshold:e[0]})})})]})})]}),"mlsd"===t.model&&t.settings&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"flex gap-x-2 items-center",children:(0,a.jsx)("span",{className:"text-sm",children:"MLSD value threshold"})}),(0,a.jsx)(c.Z,{min:0,max:1,step:.1,type:"number",value:t.settings.mlsd_thr_v,onChange:e=>x({mlsd_thr_v:e.target.valueAsNumber}),className:"w-12 text-center"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(v,{min:0,max:1,step:.1,value:[t.settings.mlsd_thr_v||.1],onValueChange:e=>x({mlsd_thr_v:e[0]})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"flex gap-x-2 items-center",children:(0,a.jsx)("span",{className:"text-sm",children:"MLSD distance threshold"})}),(0,a.jsx)(c.Z,{min:0,max:1,step:.1,type:"number",value:t.settings.mlsd_thr_d,onChange:e=>x({mlsd_thr_d:e.target.valueAsNumber}),className:"w-12 text-center"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(v,{min:0,max:1,step:.1,value:[t.settings.mlsd_thr_d||.1],onValueChange:e=>x({mlsd_thr_d:e[0]})})})]})]})]}),t.model&&(0,a.jsxs)("div",{className:"flex flex-col gap-4 text-xs text-neutral-400",children:[u.h7[t.model],(0,a.jsx)(e9,{controlNetModel:t.model})]})]})]})]})};var tt=l(9328);let tl=[{id:"none",name:"Reference"},{id:"canny",name:"canny"},{id:"depth",name:"depth"},{id:"hed",name:"hed"},{id:"normal",name:"normal"},{id:"mlsd",name:"mlsd"},{id:"scribble",name:"scribble"},{id:"seg",name:"seg"},{id:"openpose",name:"openpose"},{id:"lineart",name:"lineart"},{id:"tile",name:"tile"},{id:"ip2p",name:"ip2p"}],ts=[{id:"100%",name:"100%"},{id:"90%",name:"90%"},{id:"80%",name:"80%"},{id:"70%",name:"70%"},{id:"60%",name:"60%"},{id:"50%",name:"50%"},{id:"40%",name:"40%"},{id:"30%",name:"30%"},{id:"20%",name:"20%"},{id:"10%",name:"10%"}],ti=e=>{let{controlNetItem:t,isReferenceImage:l=!1,onRemove:s,onEnable:i,onDisable:n,onSetItem:d,onDuplicate:c,isSelected:o,className:u}=e,{hasReferenceImage:h}=(0,m.Od)(),{referencePercentage:f,setReferencePercentage:p}=(0,m.No)(),[v,g]=(0,r.useState)(!1),j=e=>{let l={model:e};"none"===e?l.settings=void 0:l.settings={canny_high_threshold:100,canny_low_threshold:50,controlnet_conditioning_scale:"tile"===e?.5:1,detection_resolution:512,mlsd_thr_d:.1,mlsd_thr_v:.1},d(t.id,l)},b=()=>{s(t.id)},w=()=>{i(t.id)},N=()=>{n(t.id)},y=()=>{c(t.id)},k=t.enabled,Z=(0,r.useMemo)(()=>{let e="none"===t.model,l=!h||e;return tl.filter(e=>"none"!==e.id||l)},[t.model,h]),M=(0,r.useMemo)(()=>{var e,l;return"number"==typeof(null===(e=t.settings)||void 0===e?void 0:e.controlnet_conditioning_scale)?null===(l=t.settings)||void 0===l?void 0:l.controlnet_conditioning_scale:1},[t.settings]),I=e=>{let l=ts.findIndex(t=>t.id===e),s=parseInt(ts[l].id.replace("%",""),10);d(t.id,{settings:{...t.settings,controlnet_conditioning_scale:s/100}})},z=(0,r.useMemo)(()=>{let e=[...ts],t=100*M;return e.find(e=>e.id==="".concat(t,"%"))||e.unshift({id:"".concat(t,"%"),name:"".concat(t,"%")}),e},[M]),E=(0,r.useMemo)(()=>{let e=100*M;return z.findIndex(t=>t.id==="".concat(e,"%"))},[M,z]),L=(0,r.useMemo)(()=>{let e=[];for(let t=5;t<=100;t+=5)e.push({id:"".concat(t,"%"),name:"".concat(t,"%")});return e.find(e=>e.id==="".concat(f,"%"))||e.unshift({id:"".concat(f,"%"),name:"".concat(f,"%")}),e},[f]),T=(0,r.useMemo)(()=>L.findIndex(e=>e.id==="".concat(f,"%")),[f,L]),R=e=>{let t=parseInt(e.replace("%",""),10);p(t)};return(0,a.jsxs)("div",{className:(0,x.Z)("w-full hover:bg-neutral-700/30 rounded-md px-2 h-12 md:h-10 cursor-grab group flex flex-row items-center gap-2 max-w-full relative text-white justify-start",!k&&"opacity-50",o&&"bg-neutral-700/30",u),children:[(0,a.jsx)("div",{className:"w-4 h-4",children:!l&&(0,a.jsx)(S.Z,{className:"ring-none outline-none visible md:invisible group-hover:visible group text-white cursor-grab w-4 h-4",name:"menu"})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"w-7 h-7 rounded",children:t.image?(0,a.jsx)(D(),{unoptimized:!0,alt:t.model||"",width:32,height:32,src:t.image,style:{objectFit:"contain"},className:"rounded w-7 h-7"}):(0,a.jsx)(S.Z,{className:"text-neutral-700",name:"imageFilled"})})}),(0,a.jsx)("div",{className:(0,x.Z)("bg-w-15 visible md:group-hover:visible"),children:l?(0,a.jsx)("div",{className:"text-base md:text-xs leading-5 font-normal text-white text-start ml-2",children:"Reference Image"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(tt.h_,{children:[(0,a.jsx)(tt.$F,{children:(0,a.jsxs)(C.Z,{variant:"tertiary",size:"small",className:"relative left-0 top-0 bottom-0 w-full md:w-fit !justify-between",children:[Z[Z.findIndex(e=>e.id===t.model)].name,(0,a.jsx)(el.qhg,{})]})}),(0,a.jsxs)(tt.AW,{align:"start",children:[(0,a.jsx)(tt.Ju,{children:"Mode"}),(0,a.jsx)(tt.VD,{}),Z.map(e=>(0,a.jsx)(tt.Xi,{onSelect:()=>{j(e.id)},children:e.name},e.id))]})]})})}),(0,a.jsxs)("div",{className:(0,x.Z)("gap-x-1 flex w-fit relative items-center justify-center ml-auto",!v&&"lg:hidden group-hover:flex"),children:[(0,a.jsx)("div",{className:(0,x.Z)("w-15  visible md:group-hover:visible",3!==E?"visible":"md:invisible"),children:"none"!==t.model?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(tt.h_,{onOpenChange:g,children:[(0,a.jsx)(tt.$F,{children:(0,a.jsxs)(C.Z,{variant:"tertiary",size:"small",className:"relative left-0 top-0 bottom-0 w-full md:w-fit !justify-between",children:[z[E].name,(0,a.jsx)(el.qhg,{})]})}),(0,a.jsxs)(tt.AW,{align:"start",className:"z-[9999] ",children:[(0,a.jsx)(tt.Ju,{children:"Strength"}),(0,a.jsx)(tt.VD,{}),z.map(e=>(0,a.jsx)(tt.Xi,{onSelect:()=>{I(e.id)},children:e.name},e.id))]})]})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(tt.h_,{onOpenChange:g,children:[(0,a.jsx)(tt.$F,{children:(0,a.jsxs)(C.Z,{variant:"tertiary",size:"small",className:"relative left-0 top-0 bottom-0 w-full md:w-fit !justify-between",children:[L[T].name,(0,a.jsx)(el.qhg,{})]})}),(0,a.jsxs)(tt.AW,{align:"start",className:"z-[9999] ",children:[(0,a.jsx)(tt.Ju,{children:"Strength"}),(0,a.jsx)(tt.VD,{}),L.map(e=>(0,a.jsx)(tt.Xi,{onSelect:()=>{R(e.id)},children:e.name},e.id))]})]})})}),"none"!==t.model&&(0,a.jsx)("div",{className:"hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)(S.Z,{name:"copy",className:(0,x.Z)(!o&&"visible md:invisible md:group-hover:visible ","cursor-pointer w-4 h-4"),onClick:y})}),(0,a.jsxs)(e1.J2,{onOpenChange:e=>g(e),children:[(0,a.jsx)(e1.xo,{children:(0,a.jsx)("div",{className:"hover:bg-white/20 p-1 items-center justify-center rounded-md relative w-full flex",children:(0,a.jsx)(S.Z,{name:"settings",className:(0,x.Z)(!o&&"md:hidden","cursor-pointer w-4 h-4","group-hover:visible")})})}),(0,a.jsx)(e1.yk,{className:"z-[9999] ",children:(0,a.jsx)(te,{controlNetItem:t,setItem:d})})]}),(0,a.jsx)("div",{className:"hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)(S.Z,{name:"remove",className:(0,x.Z)(!o&&"visible md:invisible md:group-hover:visible","cursor-pointer w-4 h-4"),onClick:b})}),(0,a.jsx)("div",{className:"hover:bg-white/20 p-1 items-center justify-center rounded-md",children:(0,a.jsx)("div",{className:"w-4 h-4",children:(0,a.jsx)(W.Z,{className:(0,x.Z)(k&&!o&&"visible md:invisible md:group-hover:visible w-4 h-4"),onChange:e=>e?w():N(),checked:k,eyeBall:!0})})})]})]})},ta=()=>{let[e,t]=(0,r.useState)(void 0),{controlNetItems:l,setControlNetItems:s}=(0,m.Od)(),i=e=>({marginBottom:e?40:0}),n=e=>{let{source:t,destination:i}=e;if(!i)return;let a=t.index,n=i.index,r=[...l],[d]=r.splice(a,1);r.splice(n,0,d),s(r)},d=e=>{let t=l.filter(t=>t.id!==e);s(t)},c=e=>{let t=l.map(t=>t.id===e?{...t,enabled:!0}:t);s(t)},o=e=>{let t=l.map(t=>t.id===e?{...t,enabled:!1}:t);s(t)},u=e=>{t(e)},x=(e,t)=>{let i=l.map(l=>l.id===e?{...l,...t}:l);s(i)},h=e=>{let t=l.find(t=>t.id===e);if(t){t={...t,id:"".concat(t.id,"-copy")};let i=[...l],a=i.findIndex(t=>t.id===e);i.splice(a+1,0,t),s(i)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ei.Z5,{onDragEnd:n,children:(0,a.jsx)(ei.bK,{droppableId:"controlNetItems",children:(t,s)=>(0,a.jsxs)("div",{ref:t.innerRef,className:"-ml-4",style:i(s.isDraggingOver),children:[l.map((t,l)=>(0,a.jsx)(ei._l,{draggableId:t.id,index:l,children:l=>(0,a.jsx)("div",{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,className:"w-full",children:(0,a.jsx)(ti,{controlNetItem:t,isSelected:e===t.id,onRemove:d,onEnable:c,onDisable:o,onEdit:u,onSetItem:x,onDuplicate:h})})},t.id)),t.placeholder]})})})})},tn=[{value:"tall",label:"Tall",icon:(0,a.jsx)(eY.Z,{})},{value:"square",label:"Square",icon:(0,a.jsx)(P.Z,{})},{value:"wide",label:"Wide",icon:(0,a.jsx)(eQ.Z,{})}],tr=[{value:"standard",label:"Standard",sublabel:"512x512"},{value:"large",label:"Large",sublabel:"768x768"}],td=e=>{let{}=e,{service:t}=(0,m.G2)(),{stableDiffusionVersion:l}=(0,m.s0)(),{canvas:s,setCanvas:i}=(0,m.$P)(),{output:n,setOutput:d}=(0,m.tW)(),{imageCount:c,setImageCount:o}=(0,m.ZT)(),{referenceImage:u,setReferenceImage:x}=(0,m.YN)(),{controlNetItems:h,setControlNetItems:f}=(0,m.Od)(),{subscriptionPlan:p}=(0,g.kP)(),{setIsOpen:v}=(0,j.Tf)(),b=r.useMemo(()=>"Stable Diffusion XL"===t&&"stable-diffusion-xl"===l,[t,l]),w=(0,r.useCallback)(e=>{i(e)},[i]),N=(0,r.useCallback)(e=>{d(e)},[d]),y=r.useMemo(()=>"DALL\xb7E"===t?tn.map(e=>({...e,disabled:"square"!==e.value})):tn,[t]),C=r.useMemo(()=>tr.map(e=>({...e,sublabel:"".concat((0,m.wH)(s,e.value,t).width,"x").concat((0,m.wH)(s,e.value,t).height)})),[s,t]),k=e=>{if(h.length>=4)return;let t=h.some(e=>"none"===e.model);f([...h,{id:(0,eJ.w)(),enabled:!0,model:t?"canny":"none",image:e,settings:{controlnet_conditioning_scale:1,detection_resolution:512,canny_high_threshold:200,canny_low_threshold:100,mlsd_thr_d:.1,mlsd_thr_v:.1}}])},Z=r.useCallback(e=>{"large"===e&&"free"===p.id?v(!0):N(e)},[v,N,p.id]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-start p-0 gap-2 w-full",children:[(0,a.jsx)(e0,{label:"Canvas",value:s,onChange:e=>w(e),options:y,locked:"DALL\xb7E"===t}),!b&&(0,a.jsx)(e0,{label:"Output",value:n,onChange:e=>Z(e),options:C})]}),(0,a.jsx)(e$.Z,{onClick:()=>{o(1===c?4:1)},className:"w-full",IconLeft:eX.Z,title:{text:"Create 4 images",className:"text-white text-xs"},iconRight:(0,a.jsx)(W.Z,{checked:4===c,onChange:e=>{o(e?4:1)}})}),t.includes("Stable Diffusion")&&(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 text-white w-full",children:[(0,a.jsx)("div",{className:"flex flex-row justify-between items-center",children:(0,a.jsx)("label",{className:"text-xs font-semibold text-left text-white",children:"Reference Image"})}),h.length>0&&(0,a.jsx)(ta,{}),h.length<(b?1:4)&&(0,a.jsx)(O,{onURLEnter:async e=>{let t=await (0,m.n$)("/api/image/proxy?url=".concat(encodeURIComponent(e)));k(t)},onChange:e=>{x(e),k(e)},value:void 0,mask:void 0}),u&&(0,a.jsx)("div",{className:"flex flex-col gap-y-6 pt-4"})]})]})};var tc=l(73580);let to=e=>{let{title:t,children:l}=e,{setMobileDrawerOpen:s}=(0,tc.j)();return(0,a.jsxs)("div",{className:"flex flex-col items-start lg:py-4 lg:px-6 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between h-8 p-0 w-full",children:[(0,a.jsx)("div",{className:"py-1.5 text-base leading-6 font-semibold text-white",children:t}),(0,a.jsx)(C.Z,{onClick:()=>s(!1),size:"small",variant:"accent",className:"lg:hidden",children:"Done"})]}),(0,a.jsx)("div",{className:"flex flex-col items-start p-0 gap-6 w-full",children:l})]})};var tu=l(71592);let tm=["Templates","Styles"],tx={themes:0,styles:1},th={0:"themes",1:"styles"},tf=e=>{let{children:t}=e,{stylesTab:l,setStylesTab:s}=(0,tu.L)(),i=r.useMemo(()=>tx[l],[l]),n=r.useCallback(e=>{let t=th[e];s(t)},[s]);return(0,a.jsxs)(eH.O.Group,{selectedIndex:i,onChange:n,children:[(0,a.jsx)(eH.O.List,{className:"flex flex-wrap gap-4 border-b border-neutral-700 mt-2 w-full text-neutral-400",children:tm.map(e=>(0,a.jsx)(eH.O,{className:e=>{let{selected:t}=e;return(0,x.Z)("inline-block px-0 py-4 rounded-t-lg border-b-[3px] text-sm leading-5 font-medium",t?"text-white border-white":"border-transparent")},children:e},e))}),(0,a.jsx)(eH.O.Panels,{className:"w-full",children:t.map((e,t)=>(0,a.jsx)(eH.O.Panel,{children:e},t))})]})};var tp=l(57118);let tv=e=>{let{isOpen:t,setIsOpen:l}=e,{editingTheme:s,setEditingTheme:i}=(0,m.ZR)(),[n,d]=r.useState(""),[x,h]=r.useState(!1),[f,p]=r.useState(s.category),[v,g]=r.useState(!1),{service:j}=(0,m.G2)(),{customModel:b}=(0,m.kT)(),{stableDiffusionVersion:w}=(0,m.s0)(),{createState:N}=(0,m.RX)(),y=(0,Z.Wg)(),{referenceImage:k}=(0,m.YN)(),I=(0,M.d)(),{setTheme:z,setActiveStyles:E,activeStyles:D}=(0,m.Lc)(),{setStylesTab:L}=(0,tu.L)(),{setMobileDrawerOpen:T}=(0,tc.j)(),R=r.useCallback(()=>{l(!1)},[l]),F=(0,eC.C)(),A=r.useCallback(()=>{E(D.filter(e=>"subject"===e.type))},[D,E]),_=r.useCallback(e=>{z(e),F&&L("styles"),F||T(!1)},[F,T,L,z]),P=r.useCallback(async()=>{let e={service:j,helperText:"",stableDiffusionVersion:w,model:b,cfgScale:N.cfgScale,steps:N.steps,canvas:N.canvas,output:N.output,referencePercentage:N.referencePercentage,sampler:N.sampler};y.mutate({...s,name:n,meta:e,isPublic:!v,category:f,referenceImage:k&&k.startsWith("data:image")?k:void 0},{onSuccess:e=>{I("Template created successfully!"),h(!1),A(),_(e),R(),i(void 0)}})},[f,y,N.canvas,N.cfgScale,N.output,N.referencePercentage,N.sampler,N.steps,b,j,w,s,R,v,n,I,k,A,_,i]),O=r.useCallback(()=>{h(!0),P()},[P]),q=r.useMemo(()=>u.Oe.map(e=>({value:e,disabled:!1})),[]),B=r.useMemo(()=>!n||!f,[f,n]);return(0,a.jsx)(e3.Z,{showCloseButton:!0,isOpen:t,handleClose:R,children:(0,a.jsxs)("div",{className:"box-border flex flex-row justify-center items-center gap-2 isolate w-[300px] h-[400px] lg:w-[480px] lg:h-[400px] border shadow-[0px_0px_12px_1px_rgba(0,0,0,0.6)] flex-none order-none self-stretch grow-0 px-6 py-10 rounded-2xl border-solid border-[rgba(255,255,255,0.2)]",children:[(0,a.jsx)("button",{onClick:R,className:"absolute w-10 h-10 top-4 right-4 p-2 bg-neutral-700 hover:bg-neutral-600 flex items-center justify-center rounded-full",children:(0,a.jsx)(S.Z,{name:"close",color:"white",size:16})}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 w-full h-80 flex-none order-none grow z-0 p-0",children:[(0,a.jsx)("div",{className:"text-2xl leading-8 font-semibold",children:"Save as template"}),(0,a.jsx)(c.Z,{value:n,label:"Template name",type:"text",onChange:e=>d(e.target.value),size:"medium",className:"w-full",autoFocus:!0}),(0,a.jsx)(o.Z,{label:"Category",value:f||void 0,size:"medium",options:q,onChange:e=>p(e)}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-3 w-full h-10 self-stretch grow-0 px-0 py-2",children:[(0,a.jsx)(W.Z,{checked:v,onChange:g}),(0,a.jsx)("div",{className:"text-base leading-6 font-semibold",children:"Make this template private"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4 w-full",children:(0,a.jsxs)(C.Z,{disabled:x||B,onClick:O,size:"small",variant:"accent",className:"w-full",children:[!x&&"Save",x&&(0,a.jsx)(S.Z,{name:"loadingSpinner",className:"animate-spin",size:16})]})})]})]})})},tg=()=>{let{activeStyles:e,setActiveStyles:t,toggleStyle:l}=(0,m.Lc)(),{setActiveStyles:s}=(0,m.jf)(),{setActiveNegativeStyles:i}=(0,m.PH)(),{editingTheme:n,setEditingTheme:d}=(0,m.ZR)(),{negativeStyles:c,setNegativeStyles:o}=(0,m.tI)(),{setEffects:u}=(0,m.tE)(),{effects:x,setEffects:h}=(0,m.sv)(),[f,p]=r.useState(!1);r.useEffect(()=>{u(x)},[x]),r.useEffect(()=>{s(e),i(c)},[e,c,i,s]);let v=()=>{d({...n}),p(!0)},[g,j]=r.useState(!1),b=r.useCallback(()=>j(!g),[g]),w=r.useMemo(()=>e.length>1,[e.length]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tv,{isOpen:f,setIsOpen:()=>p(!1)}),(0,a.jsx)(J.M,{children:g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"w-screen h-screen bg-black/80 fixed left-0 top-0 z-40",onClick:b}),(0,a.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-black w-screen md:w-[90vw] aspect-[16/9] max-h-[90vh] fixed left-1/2 top-1/2 -translate-y-1/2 -translate-x-1/2 z-50 shadow-2xl",children:(0,a.jsx)("div",{className:"h-full w-full",children:(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/bu4jgKpeAN8?controls=0&autoplay=1&modestbranding=1&playsinline=0",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})})})]})}),(0,a.jsx)("div",{className:"hidden -mt-8 md:flex h-0 place-self-end",children:(0,a.jsx)(Y.E.button,{whileTap:{scale:.9},onClick:b,children:(0,a.jsxs)(C.Z,{as:"div",size:"small",variant:"tertiary",className:"w-full text-xs",children:["Watch tutorial ",(0,a.jsx)(B.rUT,{})]})})}),(0,a.jsxs)(tf,{children:[(0,a.jsx)(tp.b,{}),(0,a.jsx)(eq,{showSaveAsThemeButton:w,handleSaveAsThemeClick:v,activeStyles:e,setActiveStyles:t,toggleStyle:l,negativeStyles:c,setNegativeStyles:o,effects:x,setEffects:h})]})]})},tj=()=>{let{sideBarPage:e}=(0,d.C)(),t=(0,n.W)("editingThemeId"),{applyReferenceImage:l}=(0,m.YN)();r.useEffect(()=>{t&&"new"!==t&&l(t)},[l,t]);let s=r.useMemo(()=>{if(t&&"new"!==t&&"styles"===e)return(0,a.jsx)(eK,{});switch(e){case"general":return(0,a.jsx)(to,{title:"General",children:(0,a.jsx)(td,{})});case"advanced":return(0,a.jsx)(to,{title:"Advanced",children:(0,a.jsx)(y,{})});default:return(0,a.jsx)(to,{title:"Styles",children:(0,a.jsx)(tg,{})})}},[t,e]);return s}},17895:function(e,t,l){"use strict";l.d(t,{E:function(){return r}});var s=l(85893);l(67294);var i=l(4886),a=l(63387),n=l(23695);let r=e=>{let{onClick:t,theme:l,onEditClick:r,isOwnTheme:d}=e,c=window.innerWidth<768;return(0,s.jsxs)(a.E.div,{initial:"initial",whileHover:"hover",whileTap:"tap",animate:"initial",className:"relative hover:shadow-lg hover:opacity-80",children:[d&&(0,s.jsx)(a.E.button,{variants:{initial:c?{opacity:1,scale:1}:{opacity:0,scale:.5},hover:{opacity:1,scale:1}},className:"w-10 aspect-square flex items-center justify-center absolute right-2 top-2 z-40 bg-[rgba(23,23,23,.7)] rounded-full",onClick:r,children:(0,s.jsx)(i.Z,{name:"settings",className:"text-white",size:14})}),(0,s.jsx)("button",{className:"w-full rounded-2xl relative z-10",onClick:t,children:(0,s.jsx)(n.$,{user:d?void 0:l.user,size:"sm",title:l.name,mainImageSrc:l.image||"/empty-hero.png",accentColor:l.accentColor||"#333333"})})]})}},44592:function(e,t,l){"use strict";l.d(t,{q:function(){return a}});var s=l(85893),i=l(84849);let a=e=>{let{height:t=195}=e;return(0,s.jsx)(i.Z,{className:"rounded-lg",height:t})}},57118:function(e,t,l){"use strict";l.d(t,{b:function(){return S}});var s=l(85893),i=l(67294),a=l(4886),n=l(96486),r=l(60789),d=l(71592),c=l(73580),o=l(71430),u=l(75617),m=l(12596),x=l(66339),h=l(32571),f=l(41660),p=l(63509),v=l(99199),g=l(17895),j=l(44592),b=l(68952),w=l(42359),N=l(86010);let y=m.XK?v.eG:v.p0,C=e=>{let{query:t,onThemeClick:l,category:a,onlyOwn:d,liked:c,columns:o=2}=e,{data:u}=(0,p.h)(y,{staleTime:1/0}),m=i.useMemo(()=>{let e=(0,n.get)(u,"entry.fields.themes",[]);return e.map(e=>e.fields.themeId)},[u]),{data:v,isLoading:C}=(0,h.e9)(m,{enabled:m.length>0}),{user:k}=(0,f.kP)(),{setEditingTheme:Z}=(0,r.ZR)(),{data:S,refetch:M,fetchNextPage:I,hasNextPage:z,isFetching:E}=(0,x.i)(t,d,void 0,a,c);i.useEffect(()=>{M()},[t,d,a,c]);let D=i.useMemo(()=>{if(!v&&!t&&!a)return[];let e=(null==S?void 0:S.pages.flat())||[];if(t||a)return e;if(v&&!d&&!c){let l=null==v?void 0:v.sort((e,t)=>{let l=m.indexOf(e.id),s=m.indexOf(t.id);return l-s});e=e.filter(e=>!l.find(t=>t.id===e.id)),e=[...l,...e]}return e},[v,t,a,null==S?void 0:S.pages,d,c,m]),L=i.useCallback(()=>{I()},[I]),[T]=(0,b.Z)({loading:E,hasNextPage:!!z,onLoadMore:L,disabled:E,rootMargin:"0px 0px 400px 0px"}),R=i.useCallback(e=>{Z(e)},[Z]);return(0,s.jsxs)("div",{className:"flex flex-col gap-4 items-start w-full pb-8",children:[0===D.length&&(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"text-gray-200 text-l text-center w-full mb-6",children:"No templates found"}),(0,s.jsx)(w.Z,{})]}),C?(0,s.jsxs)("div",{className:(0,N.Z)("grid gap-4 w-full","grid-cols-".concat(o)),children:[(0,s.jsx)(j.q,{}),(0,s.jsx)(j.q,{}),(0,s.jsx)(j.q,{}),(0,s.jsx)(j.q,{})]}):(0,s.jsxs)("div",{className:(0,N.Z)("grid gap-4 w-full","grid-cols-".concat(o)),children:[null==D?void 0:D.map(e=>(0,s.jsx)(g.E,{onClick:()=>l(e),onEditClick:()=>R(e),theme:e,isOwnTheme:!!(null==k?void 0:k.isAdmin)||(null==k?void 0:k.id)===e.userId},e.id)),(C||z)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.q,{}),(0,s.jsx)(j.q,{}),(0,s.jsx)(j.q,{}),(0,s.jsx)("div",{ref:T})]})]})]})},k=[{id:"Community",name:"Community"},{id:"Mine",name:"Mine"},{id:"Liked",name:"Liked"}],Z=[{id:"All Categories",name:"All Categories"},...m.Oe.map(e=>({id:e,name:e}))],S=e=>{let{onThemeClick:t}=e,[l,m]=i.useState(),{setStylesTab:x}=(0,d.L)(),{setTheme:h}=(0,r.Lc)(),{setMobileDrawerOpen:f}=(0,c.j)(),[p,v]=i.useState("All Categories"),[g,j]=i.useState("Community");i.useEffect(()=>{let e=localStorage.getItem("filter");e&&j(e)},[]);let b=(0,n.debounce)(e=>{m(e)},500),w=(0,o.C)(),N=e=>{t?t(e):(h(e),w&&x("styles"),w||f(!1))},y=e=>{j(e),localStorage.setItem("filter",e)},S=e=>{v(e)},M=k.findIndex(e=>e.id===g);return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)(u.F,{defaultIndex:M,items:k,onSelect:y}),(0,s.jsx)(u.F,{title:"Select category",items:Z,onSelect:S})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-4 py-2 w-full",children:[(0,s.jsx)(a.Z,{color:"#8F8F8F",name:"search",size:16}),(0,s.jsx)("input",{className:"text-sm text-white bg-transparent border-0 outline-none grow",type:"text",placeholder:"Search",onChange:e=>b(e.target.value)})]}),(0,s.jsx)("div",{className:"flex flex-col gap-10 items-start w-full",children:(0,s.jsx)(C,{onThemeClick:N,query:l,category:"All Categories"===p?void 0:p,onlyOwn:"Mine"===g,liked:"Liked"===g})})]})}},36908:function(e,t,l){"use strict";l.d(t,{M:function(){return a}});var s=l(28255),i=l(23570);let a=()=>{let e=(0,s.W)("createThemeTab")||"styles",t=(0,i.n)("createThemeTab");return{createThemeTab:e,setCreateThemeTab:t}}},73580:function(e,t,l){"use strict";l.d(t,{j:function(){return a}});var s=l(28255),i=l(23570);let a=()=>{let e=(0,s.W)("mobileDrawerOpen"),t=(0,i.n)("mobileDrawerOpen");return{mobileDrawerOpen:"true"===e,setMobileDrawerOpen:t}}},43209:function(e,t,l){"use strict";l.d(t,{f:function(){return eo}});var s=l(85893),i=l(47340),a=l(89218),n=l(70984),r=l(14965),d=l(4886),c=l(41660),o=l(36492),u=l(11163),m=l(67294),x=l(97650),h=l(47476),f=l(99461),p=l(16841),v=l(50207),g=l(86010),j=l(25675),b=l.n(j),w=l(41664),N=l.n(w),y=l(63750);function C(e){let{prompt:t,asset:l,className:i,children:a,isPixelArt:n}=e,{showNsfw:r,setShowNsfw:d}=(0,p.nf)(),c=m.useMemo(()=>{let e=l.cfUrl||l.src;return e.includes("public")&&(e=e.replace("public","optimized")),e.includes("full")&&(e=e.replace("full","optimized")),n&&(e=e.replace("optimized","quality=100")),e},[l.cfUrl,l.src,n]),o=m.useMemo(()=>(0,v.c)(t.prompt)||t.isNsfw,[t]),u=l.width/l.height;return(0,s.jsxs)("div",{className:(0,g.Z)("relative group w-full overflow-crop md:rounded-xl object-contain",i),children:[(0,s.jsx)(N(),{href:"?promptInModalId=".concat(t.id,"&selectedAsset=").concat(l.id),as:"/prompt/".concat(t.id,"?selectedAsset=").concat(l.id),scroll:!1,children:(0,s.jsx)("div",{style:{position:"relative",width:"100%",paddingTop:"".concat(1/u*100,"%")},children:(0,s.jsx)(b(),{layout:"fill",quality:100,className:(0,g.Z)("rounded-none md:rounded-xl hover:opacity-80 cursor-pointer",o&&!r&&"blur-2xl"),src:c,alt:"",unoptimized:!0})})}),o&&(0,s.jsx)("div",{className:"absolute top-4 left-4 z-[100] flex gap-4",children:(0,s.jsxs)("button",{onClick:()=>d(!r),className:"text-xs p-2 bg-red-400 text-white rounded-full flex items-center justify-center gap-1",children:["NSFW ",r?(0,s.jsx)(y.rCC,{}):(0,s.jsx)(y.I$m,{})]})}),a]})}let k=e=>{let{id:t,name:l,withIcon:i=!0}=e;return(0,s.jsx)(N(),{href:"/theme/".concat(t),children:(0,s.jsxs)("span",{className:"text-xs leading-4 font-normal text-teal-200 hover:underline",children:[i&&(0,s.jsx)(y.y6p,{className:"inline mr-1",size:12})," ",l]})})};var Z=l(13935),S=l(76445),M=l(47516),I=l(94661);let{prompt:z,theme:E}=Z.p,D=e=>{let{post:t,timeAgo:l,user:i}=e,{type:a,data:n}=t,r=a===z?n.provider:null,d=(0,m.useMemo)(()=>{if(a===z&&r)return r;if(a===E&&n){var e,t;return{name:null===(e=null===(t=n.meta)||void 0===t?void 0:t.valueOf())||void 0===e?void 0:e.service}}},[n,r,a]),c=(0,m.useMemo)(()=>a===z&&n.isPrivate,[n,a]);return(0,s.jsxs)("div",{className:"w-full flex flex-col gap-[2px]",children:[(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)(N(),{href:"/user/".concat(i.id),children:(0,s.jsx)("label",{className:"text-sm cursor-pointer font-medium text-white hover:underline gap-2 flex",children:i.username})}),(0,s.jsx)(I.Z,{subscriptionPlan:i.subscriptionPlan}),(0,s.jsx)("label",{className:"text-sm font-normal text-neutral-500",children:l}),c&&(0,s.jsxs)("div",{className:"flex text-xs items-center justify-center text-white",children:[(0,s.jsx)(M.egU,{size:12,color:"white"}),"Private"]})]}),(0,s.jsxs)("div",{className:"flex gap-x-3 text-neutral-500 text-xs leading-4 font-normal overflow-x-auto",children:[a===E&&(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"line-clamp-1",children:["Published a new theme: ",(0,s.jsx)(k,{withIcon:!1,name:n.name,id:n.id})]})}),a===z&&(0,s.jsx)("div",{className:"w-fit whitespace-nowrap",children:(0,s.jsx)(S.$,{meta:n.meta,provider:d})})]})]})};var L=l(22665),T=l(12185),R=l(23695),F=l(49304),A=l(22198),_=l(80471);let P=e=>{let{styles:t}=e;return(0,s.jsxs)(F.u,{placement:"top-start",defaultOffset:{crossAxis:-20},children:[(0,s.jsx)(F.aJ,{asChild:!0,children:(0,s.jsxs)("span",{className:"hover:underline hover:cursor-pointer text-xs leading-4 font-normal text-blue-400",children:[(0,s.jsx)(_.BlD,{size:16,className:"inline mr-1"}),t.length," style",1!==t.length&&"s"]})}),(0,s.jsx)(F._v,{className:"px-2 py-4 bg-black text-white font-medium rounded-lg border-white/20 border w-[320px]",children:(0,s.jsx)("div",{className:"overflow-y-scroll max-h-[120px] scrollbar-thin scrollbar-thumb-neutral-700 scrollbar-track-transparent scrollbar-thumb-rounded-md",children:(0,s.jsx)(A.Z,{styles:t,showCategories:!1,showSeeAll:!1,linkOut:!1,max:8})})})]})};var O=l(27361),q=l.n(O),B=l(41695),H=l(12697),U=l(63387),V=l(50933),W=l(60789);let G=e=>{let{referenceImage:t,promptStrength:l,title:a="Reference Image",isControlNet:n=!1}=e,r=(0,u.useRouter)(),{applyReferenceImage:d}=(0,W.YN)(),c=e=>{e.stopPropagation(),d(t),r.push("/create")};return(0,s.jsxs)("div",{className:"flex flex-col justify-start items-start self-stretch grow shrink gap-4 p-2 rounded-2xl",children:[(0,s.jsx)("a",{href:t,rel:"noreferrer",children:(0,s.jsx)(b(),{unoptimized:!0,alt:a,width:220,height:220,src:t,className:"border-transparent flex-none rounded-lg bg-neutral-700 object-cover object-center"})}),"number"==typeof l&&(0,s.jsxs)("div",{className:"flex flex-col justify-start items-start grow shrink relative",children:[(0,s.jsx)("label",{className:"text-neutral-400 text-[10px] font-medium uppercase tracking-widest mb-1",children:a}),(0,s.jsx)("div",{className:"flex flex-col justify-start items-start grow shrink",children:(0,s.jsxs)("div",{className:"flex justify-start items-start grow shrink relative gap-2 font-mono",children:[(0,s.jsx)("p",{className:"grow shrink text-base text-left text-white",children:"Image strength:"}),(0,s.jsxs)("p",{className:"grow shrink text-base text-left text-purple-300",children:[l,"%"]})]})})]}),!n&&(0,s.jsx)(i.Z,{className:"w-full",size:"small",variant:"secondary",onClick:c,children:"Use as reference"})]})},{prompt:K}=Z.p,$=e=>{let{prompt:t,containerClassName:l}=e,i=(0,H.r)({promptUserId:t.userId||""}),{data:a}=(0,V.G)({promptId:t.id,options:{initialData:{isRestricted:t.isRestricted}}}),n=null==a?void 0:a.isRestricted,r=(0,p.Du)(),c=r===t.id,o=t.theme||null,u="Prompt hidden";switch(!0){case c&&!n:u="Hide prompt";break;case c&&n:u="Show prompt"}let x=(0,m.useMemo)(()=>(0,B.X)(t),[t]),h=(0,m.useMemo)(()=>{if(t){let e=q()(t,"meta.modifiers",[]);return e}return[]},[t]),f=(0,m.useMemo)(()=>t.meta,[t]),v=(0,m.useMemo)(()=>!!(null==f?void 0:f.referenceImage),[f]),g=(0,m.useMemo)(()=>{var e;return!!(null==f?void 0:null===(e=f.controlNetImages)||void 0===e?void 0:e.length)},[f]),j=(0,m.useMemo)(()=>{let e=null==f?void 0:f.controlNetItems;return e?(e=null==e?void 0:e.filter(e=>"none"!==e.model)).map(e=>e.model):[]},[f]);return(0,s.jsx)("div",{className:l,children:(0,s.jsxs)("div",{className:"w-full flex flex-col gap-[2px] relative min-h-[32px]",children:[!n||n&&i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N(),{href:"?promptInModalId=".concat(t.id),as:"/prompt/".concat(t.id),scroll:!1,children:(0,s.jsx)("div",{className:"w-full text-white text-base line-clamp-3 my-1 break-words",children:x})}),(0,s.jsxs)("div",{className:"flex gap-x-3 text-neutral-500 text-xs leading-4 font-normal overflow-x-auto",children:[o&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"line-clamp-1",children:(0,s.jsx)(k,{name:o.name,id:o.id})})}),!o&&(null==h?void 0:h.length)?(0,s.jsx)("div",{className:"",children:(0,s.jsx)("div",{className:"w-fit whitespace-nowrap",children:(0,s.jsx)(P,{styles:h})})}):null,(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[v&&(0,s.jsx)(L.d,{withTooltip:!0,content:(0,s.jsx)(G,{title:"Reference Image",referenceImage:f.referenceImage,promptStrength:f.promptStrength,isControlNet:!1}),children:(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,s.jsx)(d.Z,{name:"imageFilled",size:12}),"Reference"]})}),g&&f.controlNetImages.map((e,t)=>(0,s.jsx)(L.d,{withTooltip:!0,content:(0,s.jsx)(G,{isControlNet:!0,title:"Controlnet Image",referenceImage:e}),children:(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2 capitalize",children:[(0,s.jsx)(d.Z,{name:"imageFilled",size:12}),f.controlNetModel||j[t]&&"".concat(f.controlNetModel||j[t])]})},e))]})]})]}):null,(c||n)&&(0,s.jsx)(U.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{opacity:{duration:.1}},className:"absolute w-full h-full flex flex-row items-center justify-center p-0 transition-opacity duration-200 ease-in",children:(0,s.jsxs)("div",{className:"h-full rounded-lg flex items-center justify-center flex-grow flex-shrink-0 order-none bg-neutral-800 shadow-md gap-2",children:[(0,s.jsx)(d.Z,{size:13,className:"text-white",name:"lockLocked"}),(0,s.jsx)("div",{className:"text-xs leading-4 font-normal text-white",children:u})]})})]})})};var X=l(86512),J=l(96486),Y=l(65820),Q=l(31825);let{prompt:ee,theme:et}=Z.p,el=e=>{var t,l,i;let{post:a,user:n,collapsedPosts:r,expanded:d}=e,{push:o}=(0,u.useRouter)(),{type:x,data:h}=a,{setIsLogInModalOpen:v}=(0,p.l9)(),{isLoggedIn:g}=(0,c.kP)(),[j,b]=m.useState(!d),w=x===ee?h.provider:null,y={mobile:null,desktop:null},[C,k]=m.useState(!1),Z=(0,Q.I)(new Date(h.createdAt||new Date));m.useEffect(()=>{j&&r&&r.length<3&&b(!1)},[r,j]);let S=m.useCallback(()=>{if(!g){v(!0);return}x===ee&&h.id&&o("/create?promptId="+h.id+"&stylesTab=styles")},[g,x,h.id,v,o]),M=m.useMemo(()=>!!j&&!!r&&r.length>=3,[r,j]);switch(x){case ee:let I=(0,s.jsx)(es,{post:a,onReUsePrompt:S});y={mobile:(0,s.jsx)("div",{className:"md:hidden",children:I}),desktop:(0,s.jsx)("div",{className:"hidden md:block",children:I})};break;case et:let z=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N(),{href:"/theme/".concat(h.id),children:(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(R.$,{service:h.meta.service,title:h.name||"Untitled Theme",mainImageSrc:h.image||"/empty-hero.png",images:h.thumbnails,accentColor:h.accentColor||"#333"})})}),(0,s.jsx)(ei,{})]});y={mobile:(0,s.jsx)("div",{className:"md:hidden mb",children:z}),desktop:(0,s.jsx)("div",{className:"hidden md:block",children:z})}}return(m.useEffect(()=>{if(x===ee){let e=h.assets;e&&(e.forEach(e=>{let t=new Image;t.src=e.cfUrl||e.src}),setTimeout(()=>{k(!0)},750))}},[h,x]),C)?(0,s.jsx)(Y.M,{children:(0,s.jsx)(U.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.4,delay:.1}},exit:{opacity:0},className:"mb-0",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col w-full gap-0",children:[(0,s.jsxs)("div",{className:"relative flex flex-row gap-5 py-4 ",children:[M&&(0,s.jsx)("div",{className:"absolute left-[18px] top-4 h-[calc(100%)] border-l-0 md:border-l-2 border-neutral-800"}),(0,s.jsxs)("div",{className:"relative w-10 h-10 rounded-full bg-neutral-500",children:[(0,s.jsx)(N(),{href:"/user/".concat(null==n?void 0:n.id),children:(0,s.jsx)(f.Z,{seed:(null!==(t=null==n?void 0:n.id)&&void 0!==t?t:"username").slice(-8),image:n.image,width:40,height:40,className:"overflow-visible ring-4 ring-neutral-900"})}),w&&(0,s.jsx)("div",{className:"absolute flex justify-center items-center right-0 bottom-0 bg-neutral-800 bg-gradient-to-r from-[#1F1F1F]/50 to-[#363636]/50 rounded-full overflow-hidden translate-y-1/3 translate-x-1/3",children:(0,s.jsx)(f.Z,{seed:(null!==(l=null==n?void 0:n.id)&&void 0!==l?l:"username").slice(8),image:null==w?void 0:w.image,width:24,height:24})})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,s.jsx)(D,{post:a,user:n,timeAgo:Z}),y.desktop]})]}),y.mobile]}),M?(0,s.jsx)("div",{className:"overflow-none flex flex-col gap-4 px-4 md:px-0 py-2 -mx-4 md:-mx-0 border-b-[16px] border-b-black/50 md:border-b-0",children:(0,s.jsxs)("div",{className:"flex flex-row gap-4 max-w-sm md:max-w-full ",children:[(0,s.jsx)("div",{className:"relative w-9 h-9 md:w-10 md:h-10 rounded-full bg-neutral-500",children:(0,s.jsx)(N(),{href:"/user/".concat(null==n?void 0:n.id),children:(0,s.jsx)(f.Z,{seed:(null!==(i=null==n?void 0:n.id)&&void 0!==i?i:"username").slice(-8),image:n.image,width:"100%",height:"100%"})})}),(0,s.jsxs)("button",{className:"text-base leading-6 font-medium text-blue-400",onClick:()=>b(!1),children:[null==r?void 0:r.length," more creation",r&&r.length>1?"s":""]})]})}):null,!j&&(null==r?void 0:r.length)&&x===ee?null==r?void 0:r.map(e=>{let{data:t,type:l}=e.post;return l===ee&&t.user?(0,s.jsx)(el,{post:e.post,user:{...t.user}},t.id):null}):null]})})}):(0,s.jsx)("div",{className:"h-[750px]"})},es=e=>{var t,l;let{post:i}=e,{data:a}=i,n=(0,c.rY)({promptUserId:(null===(t=a.user)||void 0===t?void 0:t.id)||""}),{subscriptionPlan:r,user:d}=(0,c.kP)(),o={copy:{show:n,args:null},delete:{show:!0,args:null},private:{show:n&&"free"!==r.id,args:null},archive:{show:!!(null==d?void 0:d.isAdmin),args:null},restrict:{show:!!(null==d?void 0:d.isAdmin),args:null}},u=m.useMemo(()=>{var e;let t=(0,J.get)(a,"meta.messageId",null),l=(0,J.get)(a,"meta.upscaled",null);return(null===(e=a.provider)||void 0===e?void 0:e.name)==="Midjourney"&&t&&!l},[a]),x=m.useMemo(()=>{var e;let t=(0,J.get)(a,"meta.messageId",null),l=(0,J.get)(a,"meta.upscaled",null);return(null===(e=a.provider)||void 0===e?void 0:e.name)==="Midjourney"&&!!t&&!l},[a]),h=m.useMemo(()=>a.assets[0]?a.assets[0].width===a.assets[0].height?"aspect-square":a.assets[0].width>a.assets[0].height?"aspect-[3/2]":"aspect-[2/3]":"aspect-square",[a.assets]),f=m.useMemo(()=>{var e,t;return null===(e=a.theme)||void 0===e?void 0:null===(t=e.meta)||void 0===t?void 0:t.pixelArt},[null===(l=a.theme)||void 0===l?void 0:l.meta]);return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"items-center -mx-4 md:-mx-0 mb-4",children:(0,s.jsx)("div",{className:(0,g.Z)("w-full flex items-center",1===a.assets.length?h:"grid grid-cols-2 gap-1 md:gap-2"),children:a.assets.map((e,t)=>(0,s.jsx)(C,{isPixelArt:f,className:(0,g.Z)(3===a.assets.length&&2===t&&"col-span-2 max-w-lg"),asset:e,prompt:a,children:n&&(0,s.jsx)(X.C,{index:t,prompt:a,asset:e,canUpscale:u,canVariate:x})},e.id))})}),(0,s.jsx)($,{prompt:a,containerClassName:"mb-4 md:mb-2"}),(0,s.jsx)(L.x,{prompt:a,withTooltip:!0,moreActionsConfig:o,actionsConfig:{copy:{show:!n,args:null}}}),(0,s.jsx)(T.F,{parentUserId:a.userId||void 0,parentId:a.id}),(0,s.jsx)(ei,{})]})},ei=()=>(0,s.jsx)("div",{className:"items-center -mx-4 md:-mx-0 h-4 bg-black/50 visible md:hidden"}),ea=()=>(0,s.jsx)("svg",{width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("g",{opacity:"0.2",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6545 16.6852C15.2369 16.6852 17.3304 14.6661 17.3304 12.1754C17.3304 9.68476 15.2369 7.66565 12.6545 7.66565C10.0721 7.66565 7.97859 9.68476 7.97859 12.1754C7.97859 14.6661 10.0721 16.6852 12.6545 16.6852ZM3.83631 38.3322H42.162C43.6157 38.3322 44.5403 36.7772 43.8459 35.5L33.0723 15.6839C32.4076 14.4614 30.7027 14.3323 29.8616 15.4408L19.7785 28.728C19.0769 29.6525 17.7211 29.7463 16.8989 28.9271L11.76 23.8073C10.8711 22.9217 9.38502 23.1149 8.75218 24.1985L2.18125 35.4489C1.43497 36.7266 2.35658 38.3322 3.83631 38.3322Z",fill:"white"})})}),en=e=>{let t=[];for(let l=0;l<e;l++)t.push(l);return t};var er=l(84849);let ed=()=>(0,s.jsx)("div",{className:"w-full flex flex-col lg:flex-row items-start gap-4 py-4",children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex flex-grow items-center mb-4",children:[(0,s.jsx)("div",{className:"relative min-w-12 min-h-12 rounded-full overflow-hidden",children:(0,s.jsx)(er.Z,{baseColor:"#1c1c1c",width:"40px",height:"40px",className:"rounded-full"})}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-center shrink pl-4",children:[(0,s.jsx)(er.Z,{baseColor:"#1c1c1c",width:"220px",height:"8px",className:"rounded-full"}),(0,s.jsx)(er.Z,{baseColor:"#1c1c1c",width:"164px",height:"8px",className:"rounded-full"})]})]}),(0,s.jsx)("div",{className:"lg:pl-16",children:(0,s.jsx)("div",{className:(0,g.Z)("w-full h-[90vw] max-w-lg max-h-[512px] md:h-[50vh]",!1),children:en(1).map(e=>(0,s.jsx)("div",{className:"relative max-w-lg overflow-hiddenw-full h-full bg-[#262626] md:rounded-2xl flex items-center justify-center -mx-4 md:-mx-0 mb-4",children:(0,s.jsx)(ea,{})},e))})})]})}),ec=e=>e&&h.Vi.find(t=>t.value===e)?e:h.yE,eo=e=>{let{onlyByLoggedInUser:t,numberOfItemsToShow:l,reverse:f,hideSkeleton:p}=e,v=(0,u.useRouter)(),g=(0,c.Wd)("feedType"),[j,b]=(0,m.useState)(ec(t?"by_me":g)),{feedItems:w,hasNextPage:N,isLoading:y,fetchNextPage:C,isFetchingNextPage:k,isRefetching:S,isStale:M,refetch:I}=(0,Z.s)({feedType:j}),{data:z,refetch:E}=(0,o.a)({queryKey:["feedUpdates"],refetchInterval:3e4,queryFn:async()=>{if(!w||0===w.length)return{count:0};let e=new Date(+new Date(w[0].post.data.createdAt)+6e4).toISOString(),t=await fetch("/api/feed/updates?after=".concat(e));return t.json()}}),D=m.useMemo(()=>!w||0===w.length,[w]),{ref:L,inView:T}=(0,x.YD)();m.useEffect(()=>{T&&!k&&N&&!t&&C()},[C,k,T,N,t]);let R=m.useMemo(()=>{switch(j){case h.Of.everyone.value:return"It seems like there aren't any creations yet. Be the first to create one!";case h.Of.following.value:return"Follow more people to see their creations here."}},[j]);(0,m.useEffect)(()=>{t||b(ec(g))},[g,t]);let F=v.pathname,A=m.useMemo(()=>{let e=[...w];return"number"==typeof l&&(e=null==e?void 0:e.slice(0,l)),f&&(e=null==e?void 0:e.reverse()),e},[w,l,f]);return p&&(y||D)?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-0",children:[z&&j===h.Of.everyone.value&&z.count>0?(0,s.jsxs)(i.Z,{className:"text-blue-400",variant:"tertiary",size:"small",onClick:async()=>{await I(),setTimeout(()=>{E()},300)},children:[S&&(0,s.jsx)(d.Z,{name:"loadingSpinner",color:"white",size:16,className:"animate-spin"})," Show"," ",z.count," creation",z.count>1?"s":""]}):null,M?null:null==A?void 0:A.map((e,l)=>{if(e.post.data.user)return(0,s.jsxs)(m.Fragment,{children:[l===w.length-2&&N&&(0,s.jsx)(s.Fragment,{children:!k&&(0,s.jsx)("div",{className:"w-full",ref:L})}),(0,s.jsx)(el,{expanded:!!t,user:{...e.post.data.user},post:e.post,collapsedPosts:e.collapsedItems})]},e.post.data.id)}),y||k||S?(0,s.jsx)(s.Fragment,{children:[,,,,,].fill(0).map((e,t)=>(0,s.jsx)(ed,{},t))}):D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{hideGoHome:!0,bigText:"No creations",smallText:R}),(0,s.jsx)(a.Z,{query:""})]}):null]}),(0,s.jsx)(r.w,{source:F})]})}},18651:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var s=l(85893);function i(e){let{size:t=64,color:l="inherit",className:i}=e;return(0,s.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:l,xmlns:"http://www.w3.org/2000/svg",className:i,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 4C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V6C20 4.89543 19.1046 4 18 4H6ZM10.6379 8.31885C10.6379 9.04723 10.0474 9.6377 9.31902 9.6377C8.59064 9.6377 8.00017 9.04723 8.00017 8.31885C8.00017 7.59047 8.59064 7 9.31902 7C10.0474 7 10.6379 7.59047 10.6379 8.31885ZM17.0295 17.2498H7.03189C6.09563 17.2498 5.48449 16.2672 5.89842 15.4274L7.1127 12.9639C7.51503 12.1476 8.62223 12.0114 9.21043 12.7058L9.49418 13.0408C10.0437 13.6895 11.0641 13.6215 11.5226 12.9055L13.4696 9.86528C14.0087 9.0235 15.2655 9.11126 15.6823 10.0198L18.178 15.4592C18.5621 16.2962 17.9505 17.2498 17.0295 17.2498Z",fill:l})})}l(67294)},78153:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var s=l(85893);function i(e){let{size:t=64,color:l="inherit"}=e;return(0,s.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:l,xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 0C4.89543 0 4 0.89543 4 2V22C4 23.1046 4.89543 24 6 24H18C19.1046 24 20 23.1046 20 22V2C20 0.895431 19.1046 0 18 0H6ZM10.6379 8.31885C10.6379 9.04723 10.0474 9.6377 9.31902 9.6377C8.59064 9.6377 8.00017 9.04723 8.00017 8.31885C8.00017 7.59047 8.59064 7 9.31902 7C10.0474 7 10.6379 7.59047 10.6379 8.31885ZM17.0295 17.2498H7.03189C6.09563 17.2498 5.48449 16.2672 5.89842 15.4274L7.1127 12.9639C7.51503 12.1476 8.62223 12.0114 9.21043 12.7058L9.49418 13.0408C10.0437 13.6895 11.0641 13.6215 11.5226 12.9055L13.4696 9.86528C14.0087 9.0235 15.2655 9.11126 15.6823 10.0198L18.178 15.4592C18.5621 16.2962 17.9505 17.2498 17.0295 17.2498Z",fill:l})})}l(67294)},43901:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var s=l(85893);function i(e){let{size:t=64,color:l="inherit"}=e;return(0,s.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:l,xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C0.895431 4 0 4.89543 0 6V18C0 19.1046 0.89543 20 2 20H22C23.1046 20 24 19.1046 24 18V6C24 4.89543 23.1046 4 22 4H2ZM10.6379 8.31885C10.6379 9.04723 10.0474 9.6377 9.31902 9.6377C8.59064 9.6377 8.00017 9.04723 8.00017 8.31885C8.00017 7.59047 8.59064 7 9.31902 7C10.0474 7 10.6379 7.59047 10.6379 8.31885ZM17.0295 17.2498H7.03189C6.09563 17.2498 5.48449 16.2672 5.89842 15.4274L7.1127 12.9639C7.51503 12.1476 8.62223 12.0114 9.21043 12.7058L9.49418 13.0408C10.0437 13.6895 11.0641 13.6215 11.5226 12.9055L13.4696 9.86528C14.0087 9.0235 15.2655 9.11126 15.6823 10.0198L18.178 15.4592C18.5621 16.2962 17.9505 17.2498 17.0295 17.2498Z",fill:l})})}},31911:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var s=l(85893),i=l(86010),a=l(67294),n=l(60155),r=l(47340);function d(e){let{className:t,size:l="small",label:d,clearable:c=!1,onClear:o,isTextArea:u,...m}=e,[x,h]=(0,a.useState)("auto"),f=e=>{let t=e.target.rows;e.target.rows=1;let l=~~(e.target.scrollHeight/24);l===t&&(e.target.rows=l);let s=24*l;s<50&&(s=50),h("".concat(s,"px")),m.onChange&&m.onChange(e)};return"medium"===l?(0,s.jsxs)("div",{className:(0,i.Z)("rounded-lg border border-neutral-700 py-3 px-4 shadow-sm focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 group relative",t),children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-start text-xs font-medium text-neutral-400 group-focus-within:text-blue-400",children:d}),u?(0,s.jsx)("textarea",{className:"block w-full border-0 p-0 text-white text-sm placeholder-neutral-400 focus:ring-0 bg-transparent outline-none",style:{height:x},...m,onChange:f}):(0,s.jsx)("input",{className:"block w-full border-0 p-0 text-white disabled:text-neutral-400 text-sm placeholder-neutral-400 focus:ring-0 bg-transparent outline-none",...m}),c&&m.value&&(0,s.jsx)(r.Z,{variant:"href",size:"icon",className:"absolute right-0 top-1/2 -translate-y-1/2 text-neutral-500",onClick:o,children:(0,s.jsx)(n.R5A,{size:"24"})})]}):u?(0,s.jsx)("textarea",{rows:2,className:(0,i.Z)("text-base leading-6 font-normal bg-transparent border border-neutral-700 rounded-lg text-white focus:invalid:ring-red-300 focusinvalid:ring-2 invalid:ring-red-300 invalid:ring-2 focus:outline-none focus:ring-2 focus:ring-blue-500 p-3 ",t),...m}):(0,s.jsx)("input",{className:(0,i.Z)("text-xs bg-transparent border border-neutral-700 rounded-lg text-white focus:invalid:ring-red-300 focusinvalid:ring-2 invalid:ring-red-300 invalid:ring-2 focus:outline-none focus:ring-2 focus:ring-blue-500 h-8 p-1 ",t),...m})}},14965:function(e,t,l){"use strict";l.d(t,{w:function(){return r}});var s=l(85893),i=l(55559),a=l(87538),n=l(11163);let r=e=>{let{source:t}=e,l=(0,n.useRouter)(),r=l.query.promptInModalId;return(0,s.jsx)(i.Z,{showCloseButton:!0,isOpen:!!r,handleClose:()=>l.push(t,void 0,{scroll:!1}),dialogPanelClassName:"max-w-[1440px] lg:mt-[5vh]",children:r&&(0,s.jsx)(a.default,{isModal:!0,promptId:r})})}},75617:function(e,t,l){"use strict";l.d(t,{F:function(){return m}});var s=l(85893),i=l(67294),a=l(65820),n=l(63387),r=l(14578),d=l(86010),c=l(4886);let o=e=>{let{onClose:t,items:l,onSelect:i,title:a,selectedId:r}=e,o=e=>{i(e)};return(0,s.jsxs)("div",{className:"z-50 bg-neutral-900 border border-white/10 w-fit min-w-[96px] rounded-[4px]",style:{boxShadow:"0px 4px 12px 1px rgba(0, 0, 0, 0.75)"},children:[a&&(0,s.jsx)("p",{className:"px-4 py-1 flex border-b border-white/10 text-white text-[10px] leading-6 font-medium text-left capitalize w-full sticky top-0",children:a}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)(n.E.button,{tabIndex:-1,className:"hidden hover:bg-black/20 p-1 rounded-full",whileTap:"tap",whileHover:"hover",onClick:t,children:(0,s.jsx)(n.E.div,{variants:{tap:{scale:.9},hover:{rotateZ:90}},children:(0,s.jsx)(c.Z,{className:"w-4 h-4",name:"close",color:"white"})})})}),(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)("div",{className:" max-h-44 overflow-y-scroll overflow-x-hidden scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent scrollbar-thumb-rounded-md",children:l.map(e=>{let t=e.id===r;return(0,s.jsx)(n.E.button,{whileTap:{scale:.99},onClick:()=>o(e.id),className:(0,d.Z)("cursor-pointer p-2 focus:bg-white/5 hover:bg-white/5 rounded-[4px] w-full block text-left",t&&"bg-blue-500"),children:(0,s.jsxs)("div",{className:"flex items-center w-full gap-2",children:[(0,s.jsx)("div",{className:"text-left",children:(0,s.jsx)("p",{className:"truncate text-xs leading-5 font-normal text-white capitalize",children:e.name})}),(0,s.jsx)("span",{className:"grow"})]})},e.id)})})})]})};var u=l(91449);let m=e=>{let{enabled:t=!0,items:l,onSelect:c,title:m,defaultIndex:x=0}=e,h=i.useRef(null),f=i.useRef(null),[p,v]=i.useState(!1),[g,j]=i.useState(l[x].id);i.useEffect(()=>{var e;(null==l?void 0:null===(e=l[x])||void 0===e?void 0:e.id)&&j(l[x].id)},[x,l]);let b=()=>{v(!1)};(0,u.O)(h.current||void 0,b,f.current||void 0);let w=e=>{let t=l.find(t=>t.id===e);j((null==t?void 0:t.id)||(null==t?void 0:t.name)||"Select an item"),c(e),b()},N=()=>{v(!p)},y=i.useMemo(()=>{let e=l.find(e=>e.id===g);return(null==e?void 0:e.name)||"Select an item"},[l,g]);return(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsxs)("button",{className:(0,d.Z)("flex items-center w-full py-2 px-2 rounded-[4px] gap-2 relative",{"bg-blue-500":p,"hover:ring-1 hover:ring-inset hover:ring-neutral-700 hover:justify-between":t}),onClick:t?N:void 0,ref:f,children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("div",{className:"flex gap-1 items-center",children:(0,s.jsx)("p",{className:"text-base md:text-xs leading-5 font-normal text-neutral-700 text-start",children:(0,s.jsx)("span",{className:"text-white line-clamp-1",children:y})})})}),t&&(0,s.jsx)(r.qhg,{className:"shrink-0 w-4 h-4",color:p?"white":"#8F8F8F"})]}),(0,s.jsx)("div",{ref:h,children:(0,s.jsx)(a.M,{initial:!1,children:t&&p&&(0,s.jsx)(n.E.div,{tabIndex:0,className:"absolute left-0 top-100% z-[1000] w-full min-w-[150px] pt-1",children:(0,s.jsx)(o,{selectedId:g,onClose:b,items:l,onSelect:w,title:m})})})})]})}},22198:function(e,t,l){"use strict";l.d(t,{Z:function(){return m}});var s=l(85893),i=l(96486),a=l(41664),n=l.n(a),r=l(67294),d=l(63750),c=l(80471),o=l(5434),u=l(47340);function m(e){let{styles:t,showSeeAll:l=!0,max:a=4,linkOut:m=!0,showCategories:x=!0}=e,[h,f]=(0,r.useState)(!1),p=(0,r.useMemo)(()=>(0,i.uniqBy)(t,e=>e.id).slice(0,h?t.length:a),[a,h,t]);return(0,s.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,s.jsx)("div",{className:"text-white flex lg:flex-col gap-y-2 flex-row flex-wrap justify-between",children:p.map(e=>{var t;return(0,s.jsxs)("div",{className:"w-full flex items-center gap-x-3 px-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(c.BlD,{size:24,className:"text-neutral-400"})}),(0,s.jsxs)("div",{children:[m?(0,s.jsx)(n(),{href:"/search?q=".concat(null==e?void 0:e.name.replaceAll(" ","+")),children:(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)("div",{className:"text-sm",children:null==e?void 0:e.name})," ",e.verified&&(0,s.jsx)(o.vr,{size:16})]})}):(0,s.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,s.jsx)("div",{className:"text-sm",children:null==e?void 0:e.name})," ",e.verified&&(0,s.jsx)(o.vr,{size:16})]}),x&&(0,s.jsx)("div",{className:"text-xs text-neutral-400",children:null===(t=e.categories)||void 0===t?void 0:t.join(", ")})]})]},e.id)})}),l&&t.length>a&&(0,s.jsx)("div",{className:"flex w-full lg:w-auto lg:block",children:(0,s.jsxs)(u.Z,{className:"flex-1",size:"small",variant:"secondary",onClick:()=>f(!h),children:[(0,s.jsx)(d.evw,{}),h?"See less styles":"See all ".concat(t.length," styles")]})})]})}},86356:function(e,t,l){"use strict";l.d(t,{Z:function(){return o}});var s=l(85893),i=l(67294),a=l(77768),n=l(86010),r=l(36647);let d=e=>{let{height:t=24,width:l=24,...i}=e;return(0,s.jsxs)(r.ny,{width:l,height:t,fill:"currentColor",stroke:"none",viewBox:"0 0 24 24",...i,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.41573 12C4.97636 15.5286 8.50978 17.25 12 17.25C15.4902 17.25 19.0236 15.5286 21.5843 12C19.0236 8.47144 15.4902 6.75 12 6.75C8.50978 6.75 4.97636 8.47144 2.41573 12ZM12 5.25C16.1668 5.25 20.287 7.39191 23.1211 11.5796C23.293 11.8335 23.293 12.1665 23.1211 12.4204C20.287 16.6081 16.1668 18.75 12 18.75C7.83319 18.75 3.71301 16.6081 0.878874 12.4204C0.707042 12.1665 0.707042 11.8335 0.878874 11.5796C3.71301 7.39191 7.83319 5.25 12 5.25Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z",fill:"currentColor"})]})};d.defaulProps={color:"white"};let c=e=>{let{height:t=24,width:l=24,...i}=e;return(0,s.jsxs)(r.ny,{width:l,height:t,fill:"currentColor",stroke:"none",viewBox:"0 0 24 24",...i,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.07972 11.3789C1.42275 11.1467 1.88904 11.2366 2.1212 11.5797C4.70123 15.3919 8.37397 17.25 12.0001 17.25C15.6262 17.25 19.2989 15.3919 21.8789 11.5797C22.1111 11.2366 22.5774 11.1467 22.9204 11.3789C23.2635 11.611 23.3534 12.0773 23.1212 12.4204C20.2871 16.6081 16.1669 18.75 12.0001 18.75C7.83326 18.75 3.71308 16.6081 0.878949 12.4204C0.646791 12.0773 0.736677 11.611 1.07972 11.3789Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.28041 15.2197C4.5733 15.5126 4.5733 15.9875 4.28041 16.2803L2.03041 18.5303C1.73751 18.8232 1.26264 18.8232 0.969745 18.5303C0.676852 18.2375 0.676852 17.7626 0.969745 17.4697L3.21974 15.2197C3.51264 14.9268 3.98751 14.9268 4.28041 15.2197ZM10.0855 17.3292C10.456 17.5144 10.6061 17.9649 10.4209 18.3354L8.9209 21.3354C8.73565 21.7059 8.28515 21.8561 7.91467 21.6708C7.54418 21.4856 7.39401 21.0351 7.57925 20.6646L9.07925 17.6646C9.2645 17.2941 9.715 17.144 10.0855 17.3292Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7197 15.2197C19.4269 15.5126 19.4269 15.9875 19.7197 16.2803L21.9697 18.5303C22.2626 18.8232 22.7375 18.8232 23.0304 18.5303C23.3233 18.2375 23.3233 17.7626 23.0304 17.4697L20.7804 15.2197C20.4875 14.9268 20.0126 14.9268 19.7197 15.2197ZM13.9147 17.3292C13.5442 17.5144 13.394 17.9649 13.5793 18.3354L15.0793 21.3354C15.2645 21.7059 15.715 21.8561 16.0855 21.6708C16.456 21.4856 16.6061 21.0351 16.4209 20.6646L14.9209 17.6646C14.7357 17.2941 14.2851 17.144 13.9147 17.3292Z",fill:"currentColor"})]})};function o(e){let{checked:t,onChange:l,className:r,eyeBall:o,disabled:u}=e;return o?(0,s.jsx)("button",{disabled:u,className:r,onClick:()=>l(!t),children:t?(0,s.jsx)(d,{size:16}):(0,s.jsx)(c,{size:16})}):(0,s.jsx)(a.r,{checked:t,onChange:l,as:i.Fragment,children:e=>{let{checked:t}=e;return(0,s.jsxs)("button",{disabled:u,className:(0,n.Z)(t?"bg-blue-500":"bg-white/10","relative inline-flex h-5 w-8 items-center rounded-full",r),children:[(0,s.jsx)("span",{className:"sr-only",children:"Enable notifications"}),(0,s.jsx)("span",{className:"".concat(t?"translate-x-4":"translate-x-1"," inline-block h-3 w-3 transform rounded-full bg-white transition")})]})}})}c.defaulProps={color:"white"}},89108:function(e,t,l){"use strict";l.d(t,{Z:function(){return c}});var s=l(85893),i=l(47340),a=l(49304),n=l(4886),r=l(67294),d=l(53854);function c(e){let{value:t,onChange:l,placeholder:c,onSubmit:o,disabled:u,onFocus:m,onBlur:x}=e,[h,f]=r.useState(!1),p=(0,r.useRef)(null);function v(){if(p.current){var e;p.current.style.height="64px",p.current.style.height=(null===(e=p.current)||void 0===e?void 0:e.scrollHeight)+"px"}}(0,r.useLayoutEffect)(()=>{v()});let g=async()=>{f(!0);let e=await fetch("/api/prompts/getMagicSubject",{method:"POST",body:JSON.stringify({currentSubject:t}),headers:{"Content-Type":"application/json"}}),s=await e.json();f(!1),l(s.subject)},j=r.useMemo(()=>u||h,[u,h]);return(0,s.jsxs)("div",{className:"z-10 relative w-full gap-2 flex flex-row items-start",children:[(0,s.jsxs)(a.u,{placement:"top-start",defaultOffset:{crossAxis:-20},children:[(0,s.jsx)(a.aJ,{children:(0,s.jsx)(i.Z,{disabled:t.length<2,size:"icon",variant:"secondary",onClick:g,children:h?(0,s.jsx)(n.Z,{name:"loadingSpinner",size:16,className:"animate-spin text-blue-300"}):(0,s.jsx)(d.dvR,{className:"text-blue-300",size:16})})}),(0,s.jsx)(a._v,{className:"px-4 py-2 bg-black text-white rounded-lg border-white/20 border text-base leading-6 font-semibold",children:"Rewrite with AI"})]}),(0,s.jsx)("textarea",{onFocus:()=>null==m?void 0:m(),onBlur:()=>null==x?void 0:x(),disabled:j,ref:p,className:"px-0 flex-1 bg-transparent outline-none focus-within::outline-0 focus-visible:outline-0 focus-visible:ring-0 text-white text-md lg:text-2xl resize-none max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-neutral-700 scrollbar-track-transparent scrollbar-thumb-rounded-md",value:t,placeholder:c,onKeyDown:e=>{"Enter"===e.key&&(null==o||o())},onChange:e=>{v(),l(e.target.value)}})]})}},98267:function(e,t,l){"use strict";l.d(t,{h:function(){return o}});var s=l(85893),i=l(58823),a=l(9598),n=l(49178),r=l(67294),d=l(60789),c=l(11163);let o=()=>{let e=(0,c.useRouter)(),{theme:t}=(0,d.Lc)(),l=()=>{e.push("/themes")},{copyPrompt:o}=function(){let{copy:e}=(0,i.F)(),t=(0,a.d)(),l=r.useCallback(async l=>{(0,n.H)(l)&&(e(l.replace(/,\s*$/,"")),t("Prompt copied to clipboard!"))},[e,t]);return{copyPrompt:l}}(),u=()=>{let e=t.modifiers,l=e.filter(e=>e.enabled||"subject"===e.type);return o(l.map(e=>e.name||"((Subject))").join(", "))};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"flex flex-row items-center justify-center",children:(0,s.jsxs)("div",{className:"text-white border-white rounded-lg border-solid border box-border border-opacity-20 flex flex-col items-center justify-center p-6 bg-neutral-800 shadow-md gap-2",children:[(0,s.jsx)("div",{className:"text-sm leading-5 font-semibold text-center",children:"Midjourney is disabled"}),(0,s.jsx)("div",{className:"text-xs leading-4 font-normal text-center",children:"The theme you are trying to use was designed for Midjourney. You can change the service, but the results may not look the same."}),(0,s.jsxs)("div",{className:"text-blue-400 flex gap-4",children:[(0,s.jsx)("div",{onClick:u,className:"font-normal text-xs leading-4 text-center not-italic underline cursor-pointer",children:"Copy prompt"}),(0,s.jsx)("div",{onClick:l,className:"font-normal text-xs leading-4 text-center not-italic underline cursor-pointer",children:"Browse more themes"})]})]})})})}},9328:function(e,t,l){"use strict";l.d(t,{$F:function(){return u},AW:function(){return h},Ju:function(){return g},VD:function(){return j},Xi:function(){return f},h_:function(){return o}});var s=l(85893),i=l(67294),a=l(61821),n=l(64998),r=l(13742),d=l(50316),c=l(73047);let o=a.fC,u=a.xz;a.ZA,a.Uv,a.Tr,a.Ee;let m=i.forwardRef((e,t)=>{let{className:l,inset:i,children:r,...d}=e;return(0,s.jsxs)(a.fF,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",i&&"pl-8",l),...d,children:[r,(0,s.jsx)(n.Z,{className:"ml-auto h-4 w-4"})]})});m.displayName=a.fF.displayName;let x=i.forwardRef((e,t)=>{let{className:l,...i}=e;return(0,s.jsx)(a.tu,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",l),...i})});x.displayName=a.tu.displayName;let h=i.forwardRef((e,t)=>{let{className:l,sideOffset:i=4,...n}=e;return(0,s.jsx)(a.Uv,{children:(0,s.jsx)(a.VY,{ref:t,sideOffset:i,className:(0,c.cn)("w-[100vw] DropdownMenuContent scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent scrollbar-thumb-rounded-md","md:w-fit md:min-w-[192px]","z-[99999] ring-[1px] ring-white/20 border-4 border-popover bg-popover p-2 text-popover-foreground shadow-[0_35px_60px_-15px_rgba(0,0,0,0.5)] outline-none animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 rounded-lg overflow-y-scroll overflow-hidden overflow-x-hidden flex flex-col",l),...n})})});h.displayName=a.VY.displayName;let f=i.forwardRef((e,t)=>{let{className:l,inset:i,...n}=e;return(0,s.jsx)(a.ck,{ref:t,className:(0,c.cn)("py-3 text-lg","md:py-1.5 md:text-sm","capitalize relative flex cursor-default select-none items-center rounded-sm  px-2  outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i&&"pl-8",l),...n})});f.displayName=a.ck.displayName;let p=i.forwardRef((e,t)=>{let{className:l,children:i,checked:n,...d}=e;return(0,s.jsxs)(a.oC,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),checked:n,...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(a.wU,{children:(0,s.jsx)(r.Z,{className:"h-4 w-4"})})}),i]})});p.displayName=a.oC.displayName;let v=i.forwardRef((e,t)=>{let{className:l,children:i,...n}=e;return(0,s.jsxs)(a.Rk,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(a.wU,{children:(0,s.jsx)(d.Z,{className:"h-2 w-2 fill-current"})})}),i]})});v.displayName=a.Rk.displayName;let g=i.forwardRef((e,t)=>{let{className:l,inset:i,...n}=e;return(0,s.jsx)(a.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-[10px] font-medium",i&&"pl-8",l),...n})});g.displayName=a.__.displayName;let j=i.forwardRef((e,t)=>{let{className:l,...i}=e;return(0,s.jsx)(a.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-border",l),...i})});j.displayName=a.Z0.displayName;let b=e=>{let{className:t,...l}=e;return(0,s.jsx)("span",{className:(0,c.cn)("ml-auto text-xs tracking-widest opacity-60",t),...l})};b.displayName="DropdownMenuShortcut"},66339:function(e,t,l){"use strict";l.d(t,{i:function(){return a}});var s=l(59403),i=l(43552);let a=(e,t,l,a,n)=>{var r;let{data:d,...c}=(0,s.N)(["themes",e,t,l,a,n],s=>{let{pageParam:r}=s;return(0,i.Wh)(e,r,t,l,a,n)},{staleTime:3e5,getNextPageParam:(e,t)=>10===e.length?t.length+1:void 0}),o=null==d?void 0:null===(r=d.pages)||void 0===r?void 0:r[d.pages.length-1],u=o&&10===o.length;return{data:d,hasNextPage:!u,...c}}},83022:function(e,t,l){"use strict";l.d(t,{GX:function(){return u},Wg:function(){return c},b:function(){return r},se:function(){return o},tT:function(){return d}});var s=l(76172),i=l(59403),a=l(48228),n=l(43552);let r=(e,t,l)=>{let s=t||"all";return(0,i.N)(["themes",s,e,l],t=>{let{pageParam:i}=t;return(0,n._v)(e||"",s,l,i)},{staleTime:3e5,getNextPageParam:(e,t)=>20===e.length?t.length+1:void 0,enabled:!!e})},d=()=>(0,a.D)({mutationFn:n.fR,onSuccess:()=>{s.E.refetchQueries({queryKey:["themes"]})}}),c=()=>(0,a.D)({mutationFn:n.jG,onSuccess:()=>{s.E.refetchQueries({queryKey:["themes"]})}}),o=()=>(0,a.D)({mutationFn:n.xz,onSuccess:()=>{s.E.refetchQueries({queryKey:["theme"]})}}),u=()=>(0,a.D)({mutationFn:n.wF,onSuccess:()=>{s.E.refetchQueries({queryKey:["theme"]})}})},71430:function(e,t,l){"use strict";l.d(t,{C:function(){return s}});let s=()=>window.innerWidth>1024},84183:function(e,t,l){"use strict";l.d(t,{f:function(){return c},j:function(){return d}});var s=l(67294),i=l(60789),a=l(83727),n=l(93305),r=l(41660);let d=()=>{let e=(0,i.TL)(),t=(0,i.CG)(e=>e.user.creditsUsed),l=(0,i.CG)(e=>e.user.isLoaded),{service:r}=(0,i.G2)(),d=s.useCallback(l=>{"Stable Diffusion"===r?e((0,a.Ez)({...t,stableDiffusion:t.stableDiffusion+l})):"DALL\xb7E"===r?e((0,a.Ez)({...t,dallE:t.dallE+l})):"Stable Diffusion XL"===r&&e((0,a.Ez)({...t,SDXL:t.SDXL+l}))},[e,t,r]),c=s.useMemo(()=>"Stable Diffusion XL"===r?t.SDXL:"Stable Diffusion"===r?t.stableDiffusion:"DALL\xb7E"===r?t.dallE:1e3,[t,r]);return s.useEffect(()=>{l||e((0,n.e)())},[e,l]),{creditsUsed:c,addCreditsUsed:d}},c=()=>{let{subscriptionPlan:e}=(0,r.kP)(),{service:t}=(0,i.G2)(),l=s.useMemo(()=>"Stable Diffusion XL"===t?e.stableDiffusionXL.creditsPerMonth:"Stable Diffusion"===t?e.stableDiffusion.creditsPerDay:"DALL\xb7E"===t?e.dallE.creditsPerMonth:0,[t,e.dallE.creditsPerMonth,e.stableDiffusion.creditsPerDay,e.stableDiffusionXL.creditsPerMonth]);return l}},41066:function(e){e.exports={range:"range_range__ch0w3"}}}]);
//# sourceMappingURL=3262-7ba36185a488476f.js.map