(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6293],{10796:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/[username]",function(){return s(74733)}])},23695:function(e,t,s){"use strict";s.d(t,{$:function(){return j}});var l=s(85893),n=s(99461),a=s(12596),i=s(85335),r=s(86010),c=s(25675),o=s.n(c),d=s(41664),u=s.n(d),m=s(67294),f=s(84849),x=s(4886),h=s(59456),p=s(49178);function j(e){let{title:t,accentColor:s,images:c,mainImageSrc:d="",size:j="md",skeleton:v=!1,user:w,service:g,numberOfStyles:b}=e,{isLoading:y}=(0,h.u)([d]),N=m.useMemo(()=>{let e=c&&c.length>=4&&c.every(e=>(0,p.H)(e));return e?c.slice(0,4):[,,,,].fill(null)},[c]),C=m.useMemo(()=>{switch(g){case"Stable Diffusion":default:return{name:g,image:a.hz};case"DALL\xb7E":return{name:g,image:a.r7}}},[g]);return v?(0,l.jsxs)("div",{className:"min-w-full max-w-md",children:[(0,l.jsxs)("div",{className:"aspect-square w-full relative",children:[(0,l.jsx)("div",{className:"absolute w-full h-full z-10",style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 70%, #1A1A1A 95%)"}}),(0,l.jsx)(o(),{unoptimized:!0,src:"/empty-hero.png?t=1",className:(0,r.Z)("w-full h-full object-cover rounded-t-md",{"":"md"===j||"sm"===j,"text-left":"xs"===j}),alt:t,fill:!0,quality:100})]}),(0,l.jsxs)("div",{className:(0,r.Z)("text-center ",{"px-3 lg:px-10 pb-5 lg:pb-10 rounded-t-md":"md"===j,"px-4 pb-3 rounded-t-md":"xs"===j||"sm"===j}),style:{background:"#1A1A1A"},children:[(0,l.jsx)("div",{className:(0,r.Z)("flex items-center",{"gap-2 mb-6":"md"===j,"gap-1 mb-2":"xs"===j}),children:N.map((e,t)=>(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(f.Z,{baseColor:"#555",className:"aspect-square w-full"})},t))}),(0,l.jsx)(f.Z,{className:"w-2/3 aspect-[62/6]",baseColor:"#555"})]})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:(0,r.Z)("bg-neutral-700/50 hover:bg-neutral-700/70 p-3 rounded-lg",{"pb-6 ":"md"===j,"pb-3":"xs"===j||"sm"===j}),children:[(0,l.jsxs)("div",{className:(0,r.Z)("relative group w-full max-w-md overflow-hidden",{"rounded-lg mb-4":"md"===j,"rounded-lg mb-2":"xs"===j||"sm"===j}),children:[(0,l.jsxs)("div",{className:"aspect-square w-full relative overflow-hidden",children:[(0,l.jsx)("div",{className:(0,r.Z)("absolute w-full h-full z-10",{"":"md"===j,hidden:"xs"===j||"sm"===j}),style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 50%, ".concat(s," 100%)")}}),y?(0,l.jsx)("div",{className:(0,r.Z)("flex w-full h-full rounded-t-md items-center justify-center",{"text-left":"md"===j,"":"xs"===j||"sm"===j}),style:{background:s},children:(0,l.jsx)(x.Z,{name:"loadingSpinner",className:"animate-spin",size:36,color:"white"})}):(0,l.jsx)(o(),{unoptimized:!0,src:(0,i.m)(d,500),className:(0,r.Z)("w-full h-full object-cover group-hover:scale-105 transform transition duration-500",{"":"md"===j,"text-left":"xs"===j||"sm"===j}),alt:t,fill:!0,quality:100})]}),(0,l.jsx)("div",{className:(0,r.Z)("text-center",{"px-4 lg:px-6 pb-5 lg:pb-7":"md"===j,"px-4":"xs"===j||"sm"===j}),style:{background:s},children:c&&(0,l.jsx)("div",{className:(0,r.Z)("flex items-center m-auto max-w-xs",{"gap-2 mb-0 md:mb-0":"md"===j,"gap-1 mb-0":"xs"===j||"sm"===j}),children:N.map((e,s)=>(0,p.H)(e)?(0,l.jsx)("div",{className:"aspect-square w-full relative",children:(0,l.jsx)(o(),{unoptimized:!0,src:(0,i.m)(e,100),className:(0,r.Z)("w-full h-full object-cover",{"rounded-md":"md"===j,"rounded-[4px]":"xs"===j||"sm"===j}),alt:t,layout:"fill"})},s):(0,l.jsx)("div",{className:(0,r.Z)("aspect-square w-full bg-white/10",{"rounded-md":"md"===j,"rounded-[4px]":"xs"===j||"sm"===j})},s))})})]}),(0,l.jsxs)("div",{className:"text-white flex-col items-start px-0 flex gap-y-1",children:[(0,l.jsx)("p",{className:(0,r.Z)("w-full text-left text-sm hover:opacity-100 truncate font-semibold",{"text-sm lg:text-base text-left mb-[2px] pr-4":"md"===j,"text-center text-xs px-2":"xs"===j||"sm"===j}),children:t||"Untitled"}),(0,l.jsxs)("div",{className:(0,r.Z)("text-left flex flex-col gap-y-1 text-xs items-center font-light w-full",{"text-left":"md"===j,"":"xs"===j||"sm"===j}),children:[g&&(0,l.jsxs)("div",{className:(0,r.Z)("flex gap-0 justify-center items-center rounded-md z-50 w-full",{"text-xs":"md"===j,"":"xs"===j||"sm"===j}),children:[(0,l.jsx)(n.Z,{width:j,height:j,seed:C.name||"seed",image:C.image||"none",className:"invisible ring-inset w-0 h-0 md:w-0 md:h-0 ring-1 ring-opacity-10 ring-white shadow-[0_0_0_1px_rgba(0,0,0,0.1)]"}),(0,l.jsx)("span",{className:"opacity-60 truncate w-full",children:("Stable Diffusion"===g?"PHChroma":g)||"Unknown"})]}),w&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u(),{href:"/user/".concat(null==w?void 0:w.id),className:"w-full",children:(0,l.jsxs)("div",{className:(0,r.Z)("opacity-60 truncate w-full",{"":"md"===j,"invisible hidden":"xs"===j||"sm"===j}),children:["by ","@"+w.username]})})}),b&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:(0,r.Z)("text-left flex w-full items-center font-light opacity-60 truncate",{"text-xs":"md"===j,"":"xs"===j||"sm"===j}),children:[b," styles"]})})]})]})]})})}},9328:function(e,t,s){"use strict";s.d(t,{$F:function(){return u},AW:function(){return x},Ju:function(){return v},VD:function(){return w},Xi:function(){return h},h_:function(){return d}});var l=s(85893),n=s(67294),a=s(61821),i=s(64998),r=s(13742),c=s(50316),o=s(73047);let d=a.fC,u=a.xz;a.ZA,a.Uv,a.Tr,a.Ee;let m=n.forwardRef((e,t)=>{let{className:s,inset:n,children:r,...c}=e;return(0,l.jsxs)(a.fF,{ref:t,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",s),...c,children:[r,(0,l.jsx)(i.Z,{className:"ml-auto h-4 w-4"})]})});m.displayName=a.fF.displayName;let f=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)(a.tu,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",s),...n})});f.displayName=a.tu.displayName;let x=n.forwardRef((e,t)=>{let{className:s,sideOffset:n=4,...i}=e;return(0,l.jsx)(a.Uv,{children:(0,l.jsx)(a.VY,{ref:t,sideOffset:n,className:(0,o.cn)("w-[100vw] DropdownMenuContent scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent scrollbar-thumb-rounded-md","md:w-fit md:min-w-[192px]","z-[99999] ring-[1px] ring-white/20 border-4 border-popover bg-popover p-2 text-popover-foreground shadow-[0_35px_60px_-15px_rgba(0,0,0,0.5)] outline-none animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 rounded-lg overflow-y-scroll overflow-hidden overflow-x-hidden flex flex-col",s),...i})})});x.displayName=a.VY.displayName;let h=n.forwardRef((e,t)=>{let{className:s,inset:n,...i}=e;return(0,l.jsx)(a.ck,{ref:t,className:(0,o.cn)("py-3 text-lg","md:py-1.5 md:text-sm","capitalize relative flex cursor-default select-none items-center rounded-sm  px-2  outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",s),...i})});h.displayName=a.ck.displayName;let p=n.forwardRef((e,t)=>{let{className:s,children:n,checked:i,...c}=e;return(0,l.jsxs)(a.oC,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:i,...c,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(a.wU,{children:(0,l.jsx)(r.Z,{className:"h-4 w-4"})})}),n]})});p.displayName=a.oC.displayName;let j=n.forwardRef((e,t)=>{let{className:s,children:n,...i}=e;return(0,l.jsxs)(a.Rk,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(a.wU,{children:(0,l.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),n]})});j.displayName=a.Rk.displayName;let v=n.forwardRef((e,t)=>{let{className:s,inset:n,...i}=e;return(0,l.jsx)(a.__,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-[10px] font-medium",n&&"pl-8",s),...i})});v.displayName=a.__.displayName;let w=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,l.jsx)(a.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-border",s),...n})});w.displayName=a.Z0.displayName;let g=e=>{let{className:t,...s}=e;return(0,l.jsx)("span",{className:(0,o.cn)("ml-auto text-xs tracking-widest opacity-60",t),...s})};g.displayName="DropdownMenuShortcut"},43552:function(e,t,s){"use strict";s.d(t,{Wh:function(){return c},ZP:function(){return n},_v:function(){return r},bl:function(){return i},fR:function(){return m},jG:function(){return o},p8:function(){return a},wF:function(){return u},xz:function(){return d}});let l=()=>"/api";async function n(e){let t="".concat(l(),"/theme/").concat(e),s=await fetch(t,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return s.json()}async function a(e){let t=e.join("&id="),s="".concat(l(),"/theme/getByIds?id=").concat(t),n=await fetch(s,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return n.json()}async function i(e){let t="".concat(l(),"/theme/getByCategory?category=").concat(e),s=await fetch(t,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return s.json()}async function r(e,t,s,n){let a="?filter=".concat(t);s&&(a+="&query=".concat(s)),n&&(a+="&page=".concat(n));let i="".concat(l(),"/user/").concat(e,"/themes").concat(a),r=await fetch(i,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return r.json()}async function c(e,t,s,n,a,i){let r="?page=".concat(t||1);e&&(r+="&query=".concat(e)),s&&(r+="&onlyOwn=true"),n&&(r+="&service=".concat(n)),a&&(r+="&category=".concat(a)),i&&(r+="&liked=true");let c="".concat(l(),"/themes").concat(r),o=await fetch(c,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return o.json()}async function o(e){let t="".concat(l(),"/theme"),s=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return s.json()}async function d(e){let t="".concat(l(),"/theme/").concat(e.id),s=await fetch(t,{credentials:"include",method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return s.json()}async function u(e){let t="".concat(l(),"/theme/").concat(e.id,"/reassign"),s=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username})});return s.json()}async function m(e){let t="".concat(l(),"/theme/").concat(e),s=await fetch(t,{credentials:"include",method:"DELETE",headers:{"Content-Type":"application/json"}});return s.json()}},83022:function(e,t,s){"use strict";s.d(t,{GX:function(){return u},Wg:function(){return o},b:function(){return r},se:function(){return d},tT:function(){return c}});var l=s(76172),n=s(59403),a=s(48228),i=s(43552);let r=(e,t,s)=>{let l=t||"all";return(0,n.N)(["themes",l,e,s],t=>{let{pageParam:n}=t;return(0,i._v)(e||"",l,s,n)},{staleTime:3e5,getNextPageParam:(e,t)=>20===e.length?t.length+1:void 0,enabled:!!e})},c=()=>(0,a.D)({mutationFn:i.fR,onSuccess:()=>{l.E.refetchQueries({queryKey:["themes"]})}}),o=()=>(0,a.D)({mutationFn:i.jG,onSuccess:()=>{l.E.refetchQueries({queryKey:["themes"]})}}),d=()=>(0,a.D)({mutationFn:i.xz,onSuccess:()=>{l.E.refetchQueries({queryKey:["theme"]})}}),u=()=>(0,a.D)({mutationFn:i.wF,onSuccess:()=>{l.E.refetchQueries({queryKey:["theme"]})}})},59456:function(e,t,s){"use strict";s.d(t,{u:function(){return n}});var l=s(36492);let n=(e,t)=>(0,l.a)(["imagePreloads",e],()=>a(e),{...t,enabled:e.length>0,staleTime:1/0,retry:!1}),a=e=>{let t=e.map(e=>new Promise((t,s)=>{let l=new Image;l.src=e,l.onload=t,l.onerror=s}));return Promise.all(t)}},74733:function(e,t,s){"use strict";s.r(t),s.d(t,{PRIVATE_FILTERS:function(){return eo},PRIVATE_FILTER_IDS:function(){return ed},__N_SSP:function(){return ec},default:function(){return ef}});var l=s(85893),n=s(67294),a=s(99461),i=s(5993),r=s(41660),c=s(47340),o=s(9328),d=s(14578);let u=["All services","DALL\xb7E","Midjourney","Stable Diffusion","Stable Diffusion XL"],m=[null,"DALL\xb7E","Midjourney","Stable Diffusion","Stable Diffusion XL"];var f=function(e){let{filters:t=u,filterIds:s=m,queryKey:a="provider",defaultFilter:i}=e,[f,x]=(0,n.useState)(!1),h=(0,r.nr)(a),p=e=>{let t=s[e];h(t),x(!1)},j=(0,r.Wd)(a)||i||s[0],v=(0,n.useMemo)(()=>{let e=s.indexOf(j);return s[-1!==e?e:0]},[j,s]);return(0,l.jsxs)("div",{className:"flex items-center justify-center w-full",children:[f&&(0,l.jsx)("div",{className:"fixed top-64 left-0 h-[calc(100% - 64px)] right-0 bg-trueGray-900 z-20",children:(0,l.jsxs)("div",{className:"flex flex-col h-full px-4",children:[(0,l.jsx)("div",{className:"flex flex-col h-full",children:t.map((e,t)=>(0,l.jsx)(c.Z,{onClick:()=>p(t),variant:j===s[t]?"primary":"ghost",size:"small","aria-current":j===s[t]?"page":void 0,children:e},e))}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(c.Z,{onClick:()=>x(!1),variant:"tertiary",size:"small",children:"Close"})})]})}),(0,l.jsx)("div",{className:"flex md:hidden w-full",children:(0,l.jsxs)(o.h_,{children:[(0,l.jsx)(o.$F,{className:"w-full",children:(0,l.jsxs)(c.Z,{as:"div",variant:"tertiary",size:"small",className:"w-full !justify-between",children:[t[s.indexOf(v)],(0,l.jsx)(d.qhg,{})]})}),(0,l.jsx)(o.AW,{children:t.map((e,t)=>(0,l.jsx)(o.Xi,{onClick:()=>p(t),className:j===s[t]?"text-blue-400":void 0,children:e},e))})]})}),(0,l.jsx)("div",{className:"mb-9 hidden md:flex space-x-8",children:t.map((e,t)=>(0,l.jsx)(c.Z,{onClick:()=>p(t),variant:j===s[t]?"primary":"ghost",size:"small","aria-current":j===s[t]?"page":void 0,children:e},e))})]})},x=s(770),h=s(89218);function p(e){let{children:t,tabs:s,onTabChange:a}=e,i=(0,r.Wd)("tab")||s[0],u=(0,r.nr)("tab"),[m,f]=(0,n.useState)(!1),x=s.findIndex(e=>e===i),h=e=>{u(s[e],!0),null==a||a(e)},p=()=>{f(!m)};return(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)("div",{className:"border-neutral-700 sm:hidden",children:(0,l.jsxs)(o.h_,{children:[(0,l.jsx)(o.$F,{className:"w-full",children:(0,l.jsxs)(c.Z,{as:"div",onClick:p,variant:"tertiary",size:"small",className:"w-full !justify-between",children:[s[x],(0,l.jsx)(d.qhg,{})]})}),(0,l.jsx)(o.AW,{children:s.map((e,t)=>(0,l.jsx)(o.Xi,{onClick:()=>{h(t),p()},children:e},e))})]})}),(0,l.jsx)("div",{className:"text-left border-b border-neutral-700 hidden sm:block space-x-8",children:s.map((e,t)=>(0,l.jsx)("button",{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}("whitespace-nowrap border-b-2 px-1 pb-4 text-sm font-medium",x===t?"text-blue-400 border-blue-500 active":"border-transparent text-white/50 hover:border-gray-500 hover:text-white/80"),onClick:()=>h(t),"aria-current":x===t?"page":void 0,children:e},e))}),(0,l.jsx)("div",{className:"",children:t.map((e,t)=>(0,l.jsx)("div",{hidden:t!==x,children:e},t))})]})}var j=s(60789),v=s(83022),w=s(84849),g=s(23695),b=s(41664),y=s.n(b),N=s(70984),C=s(63750),k=s(20084),Z=s(16605),T=s(49304);function P(e){let{themeId:t,isPublic:s}=e,a=(0,v.se)(),[i,r]=(0,n.useState)(s),[c,o]=(0,n.useState)(!1),d=(0,n.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),(0,k.L9)(Z._.clickPublishThemeButton,{themeId:t,value:i?"private":"publish"}),i?(r(!1),a.mutate({id:t,isPublic:!1})):(r(!0),a.mutate({id:t,isPublic:!0}))},[i,t,a]);return i?(0,l.jsx)("div",{className:"absolute right-4 top-4 z-50 hidden group-hover:block",children:(0,l.jsxs)(T.u,{children:[(0,l.jsx)(T.aJ,{children:(0,l.jsx)("button",{className:"flex w-9 rounded-lg aspect-square items-center justify-center group-hover:bg-white",onClick:d,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:c?(0,l.jsx)(C.TKV,{className:"text-black",size:24}):(0,l.jsx)(C.YsK,{className:"text-black",size:24})})}),(0,l.jsx)(T._v,{children:"Make theme private"})]})}):(0,l.jsx)("div",{className:"absolute right-4 top-4 z-50",children:(0,l.jsxs)(T.u,{children:[(0,l.jsx)(T.aJ,{children:(0,l.jsx)("button",{className:"flex w-9 rounded-lg aspect-square items-center justify-center group-hover:bg-white",onClick:d,children:(0,l.jsx)(C.VUr,{className:"text-white/75 group-hover:text-black",size:24,style:{filter:"drop-shadow(0px 0px 8px rgba(0, 0, 0, 0.5))"}})})}),(0,l.jsx)(T._v,{children:"Publish theme"})]})})}var S=s(47476),F=s(70154),E=s(48228),A=s(24092);let _=async e=>{let t="".concat((0,A.f)(),"/follower/follow"),s=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({followTargetId:e})});return s.json()},I=async e=>{let t="".concat((0,A.f)(),"/follower/unfollow"),s=await fetch(t,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({unfollowTargetId:e})});return s.json()},z=async e=>{let{requestType:t,userId:s,nextPage:l}=e,n="?"+["type=".concat(t),"userId=".concat(s)].join("&"),a="".concat((0,A.f)(),"/followers").concat(l||n),i=await fetch(a,{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return i.json()},D=e=>{let{followTargetId:t,followDispatcherId:s,options:l}=e;return(0,E.D)({...l,mutationFn:()=>_(t),mutationKey:["follow",t,s]})},O=e=>{let{unfollowTargetId:t,unfollowDispatcherId:s,options:l}=e;return(0,E.D)({...l,mutationFn:()=>I(t),mutationKey:["unfollow",t,s]})};var q=s(36492);let M=async e=>{let t=await fetch("/api/user/".concat(e,"/isFollowed"),{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}});return t.json()},L=["isFollowed"],R=e=>{let{followDispatcherId:t,followTargetId:s,options:l}=e;return(0,q.a)([...L,t,s],()=>M(s),{...l,staleTime:1/0})};var G=s(16841),V=s(85945);let K=e=>{let{isLoggedOut:t,onClick:s,children:a,...i}=e,{setIsLogInModalOpen:r}=(0,G.l9)(),o=(0,n.useCallback)(async()=>{t&&r(!0),s&&await s()},[t,s,r]);return(0,l.jsx)(c.Z,{size:"small",onClick:o,...i,children:(0,l.jsx)("span",{className:"flex gap-x-2 items-center font-bold",children:a||"Follow"})})},W=e=>{e.invalidateQueries({predicate:e=>e.queryKey[0]===F.Db[0]&&e.queryKey.includes(S.Of.following.value)})},J=e=>{let{followDispatcherId:t,followTargetId:s,onFollow:a,onUnfollow:i,initialData:c,...o}=e,d=(0,V.NL)(),u=(0,n.useCallback)(()=>{d.refetchQueries({queryKey:[...L,t,s]}),W(d)},[t,s,d]),m=(0,r.d$)(),f=D({followTargetId:s,followDispatcherId:t,options:{onSuccess:u,onError:()=>{m("Couldn't follow user","error")}}}),x=O({unfollowTargetId:s,unfollowDispatcherId:t,options:{onSuccess:u,onError:()=>{m("Couldn't unfollow user","error")}}}),{data:h,isLoading:p,isRefetching:j}=R({followDispatcherId:t,followTargetId:s,options:{initialData:c}}),v=(null==h?void 0:h.isFollowed)?"Following":"Follow",w=(null==h?void 0:h.isFollowed)?"tertiary-active":"primary",g=p||j,b=(0,n.useCallback)(async()=>{(null==h?void 0:h.isFollowed)?(await x.mutateAsync(),null==i||i()):(await f.mutateAsync(),null==a||a())},[null==h?void 0:h.isFollowed,f,a,i,x]);return(0,l.jsx)(K,{disabled:g||!t||!s,isLoading:g,variant:w,onClick:b,...o,children:v})};var $=s(59403);let B=["followers"],H=e=>{let{requestType:t,userId:s,options:l}=e,{data:a,...i}=(0,$.N)([...B,t,s],e=>{let{pageParam:l=""}=e;return z({requestType:t,nextPage:l,userId:s})},{getNextPageParam:e=>e.nextPage||"",staleTime:1/0,...l}),r=null==a?void 0:a.pages[a.pages.length-1].hasNextPage,c=(0,n.useMemo)(()=>{let e=null==a?void 0:a.pages.map(e=>e.result.map(e=>({...e})));return null==e?void 0:e.flat()},[a]);return{...i,followers:c,hasNextPage:r}};var U=s(4886),X=s(97650),Q=s(36647);let Y=()=>(0,l.jsx)(Q.kC,{justifyContent:"center",children:(0,l.jsxs)(Q.kC,{justifyContent:"space-between",alignItems:"center",gap:10,width:"100%",maxWidth:550,children:[(0,l.jsxs)("div",{className:"w-full flex items-center justify-center p-3 pl-[0.6rem]",children:[(0,l.jsx)("div",{className:"relative min-w-12 min-h-12 rounded-full items-center justify-center",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",width:40,height:40,className:"rounded-full"})}),(0,l.jsxs)("div",{className:"w-full flex flex-col items-start justify-start py-0 px-1 gap-px shrink pl-4 sm:pl-6",children:[(0,l.jsx)(w.Z,{containerClassName:"w-full flex items-center",baseColor:"#1c1c1c",className:"w-full max-w-[8rem] h-3 sm:max-w-[12rem]"}),(0,l.jsx)(w.Z,{containerClassName:"w-full flex items-center",baseColor:"#1c1c1c",className:"w-full max-w-[4rem] h-3 sm:max-w-[6rem]"})]})]}),(0,l.jsx)(K,{isLoading:!0,disabled:!0,variant:"primary",className:"w-full max-w-[82px]"})]})}),ee=e=>{let{followDispatcherId:t,follower:s}=e,{id:n,image:i,name:r,username:c,isFollowed:o}=s;return(0,l.jsx)(Q.kC,{justifyContent:"center",mb:16,children:(0,l.jsx)(Q.kC,{justifyContent:"space-between",alignItems:"center",gap:10,width:"100%",maxWidth:550,children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"relative w-12 h-12 min-w-12 min-h-12 rounded-full overflow-hidden flex items-center justify-center",children:(0,l.jsx)(y(),{href:"/user/".concat(n),children:(0,l.jsx)(a.Z,{seed:(null!=n?n:"username").slice(-8),image:i,width:40,height:40})})}),(0,l.jsx)(y(),{href:"/user/".concat(n),children:(0,l.jsxs)("div",{className:"flex flex-col pl-2 max-w-[45vw] sm:max-w-xs",children:[(0,l.jsx)("p",{className:"text-base leading-6 font-semibold text-white truncate",children:r}),(0,l.jsx)("span",{className:"text-neutral-400 text-xs max-w-fit leading-4 font-normal truncate",children:c})]})})]}),t!==n&&(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)(J,{followDispatcherId:t,followTargetId:n,initialData:{isFollowed:o}}):(0,l.jsx)(K,{isLoggedOut:!0})})]})})})},et=()=>(0,l.jsx)(l.Fragment,{children:Array.from({length:5}).map((e,t)=>(0,l.jsx)(Y,{},t))}),es=e=>{let{requestType:t,userProfile:s}=e,{user:a,isLoading:i}=(0,r.kP)(),{followers:c,isLoading:o,isFetchingNextPage:d,hasNextPage:u,fetchNextPage:m,isError:f}=H({requestType:t,userId:s.id}),{ref:x,inView:h}=(0,X.YD)(),p=!c||!c.length,j=s.username||"this user";(0,n.useEffect)(()=>{h&&!d&&u&&m()},[m,d,h,u]);let v=(0,n.useMemo)(()=>"following"===t?{big:"Not following anyone yet",small:"It looks like ".concat(j," hasn't followed anyone yet. Check back soon!")}:{big:"No followers yet",small:"It looks like ".concat(j," doesn't have any followers yet. Check back soon!")},[t,j]);return(0,l.jsxs)(l.Fragment,{children:[!i&&(null==c?void 0:c.map(e=>(0,l.jsx)(ee,{follower:e,followDispatcherId:null==a?void 0:a.id},e.id))),o||d||i?(0,l.jsx)(et,{}):p?(0,l.jsx)(N.Z,{hideGoHome:!0,bigText:v.big,smallText:v.small}):f?(0,l.jsx)(N.Z,{hideGoHome:!0,bigText:"Something went wrong"}):u?(0,l.jsx)(l.Fragment,{children:!d&&(0,l.jsx)("div",{ref:x,className:"mb-4 w-full text-center",children:(0,l.jsx)(U.Z,{name:"loadingSpinner",size:32,className:"animate-spin text-white mx-auto"})})}):null]})};var el=s(43575),en=s(28255),ea=s(23570);let ei=()=>{let[e,t]=n.useState(!1),{setIsSelectionActive:s,setSelectedPrompts:a,selectedPrompts:i}=(0,j.t)(),[r,o]=n.useState(),d=(0,j.to)(),u=(0,ea.n)("filter"),m=(0,en.W)("filter")||"Public",f=()=>{s(!1),a([]),o(void 0)},x=n.useMemo(()=>"private"===r?"Are you sure you want to make selected prompts private?":"public"===r?"Are you sure you want to make selected prompts public?":"archive"===r?"Are you sure you want to archive selected prompts?":"delete"===r?"Are you sure you want to delete selected prompts?":"",[r]),h=n.useMemo(()=>"private"===r?"Make Private":"public"===r?"Make Public":"archive"===r?"Archive":"delete"===r?"Delete":"",[r]),p=n.useCallback(async()=>{let e=async()=>await fetch("/api/prompt/bulkActions",{method:"POST",body:JSON.stringify({promptIds:i,action:r}),headers:{"Content-Type":"application/json"}}),l=await e();l.ok&&(t(!1),o(void 0),s(!1),d(),"private"===r?u("Private"):"public"===r?u("Public"):"archive"===r&&u("Archived"))},[r,d,i,u,s]);return(0,l.jsxs)("div",{className:"flex w-full flex-row items-start justify-between min-h-[77px] flex-wrap",children:[(0,l.jsx)(el.Z,{isOpen:e,setIsOpen:t,title:h,description:x,buttons:[{text:h,onClick:p},{text:"Cancel",onClick:()=>{t(!1),o(void 0)},variant:"tertiary"}]}),(0,l.jsx)("div",{className:"w-40"}),(0,l.jsxs)("div",{className:"flex items-start justify-start gap-4",children:["Public"!==m&&(0,l.jsx)(c.Z,{variant:"secondary",size:"small",onClick:()=>{o("public"),t(!0)},children:"Make public"}),"Private"!==m&&(0,l.jsx)(c.Z,{variant:"secondary",size:"small",onClick:()=>{o("private"),t(!0)},children:"Make private"}),"Archived"!==m&&(0,l.jsx)(c.Z,{variant:"secondary",size:"small",onClick:()=>{o("archive"),t(!0)},children:"Archive"}),(0,l.jsx)(c.Z,{className:"text-red-300",variant:"tertiary",size:"small",onClick:()=>{o("delete"),t(!0)},children:"Delete"})]}),(0,l.jsx)("div",{className:"py-4 md:py-0",children:(0,l.jsx)(c.Z,{variant:"secondary",size:"small",onClick:f,children:"Cancel"})})]})};var er=s(86010),ec=!0;let eo=["All","Public","Archived","Private"],ed=["All","Public","Archived","Private"];function eu(e){let{userId:t,userName:s,defaultFilter:a}=e,{user:i}=(0,r.kP)(),c=(0,r.Wd)("filter")||a||"",{isLoading:o,data:d,hasNextPage:u,fetchNextPage:m,isFetchingNextPage:f}=(0,v.b)(t,c.toLowerCase()),x=(0,n.useRef)(null),h=(0,n.useMemo)(()=>d?d.pages.flat():[],[d]),p=(0,n.useCallback)(()=>{if(!x.current)return;let e=x.current.getBoundingClientRect(),t=e.top>=0&&e.bottom<=window.innerHeight;t&&!f&&u&&m()},[m,u,f]);return((0,n.useEffect)(()=>(window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)),[p]),o)?(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})})]}):null==h||0===h.length?(0,l.jsx)(N.Z,{hideGoHome:!0,smallText:"It looks like ".concat(s||"this user"," hasnâ€™t created any themes yet. Check back soon!"),bigText:"No themes"}):(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pb-10",children:[h.map(e=>{var t;return(0,l.jsxs)("div",{className:"relative group",children:[e.userId===(null==i?void 0:i.id)&&(0,l.jsx)(P,{themeId:e.id,isPublic:!!e.isPublic}),(0,l.jsx)(y(),{href:"/theme/".concat(e.id),children:(0,l.jsx)(g.$,{service:e.meta.service,title:e.name,mainImageSrc:e.image||"/empty-hero.png",images:e.thumbnails,accentColor:e.accentColor||"#000",numberOfStyles:null===(t=null==e?void 0:e.modifiers)||void 0===t?void 0:t.length})})]},e.id)}),f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(w.Z,{baseColor:"#1c1c1c",height:"auto",className:"rounded-2xl aspect-[281/437] w-full"})})]}),(0,l.jsx)("div",{ref:x})]})}let em=e=>{var t;let{userData:s}=e,{user:o,isLoading:d,isLoggedIn:u}=(0,r.kP)(),m=(0,j.to)(),[v,w]=(0,n.useState)(s.username||s.id||""),g=(0,r.d$)(),{isSelectionActive:b,selectedPrompts:y,setIsSelectionActive:N}=(0,j.t)();(0,n.useEffect)(()=>{(null==s?void 0:s.username)&&w(s.username)},[s.username]);let C=(0,n.useMemo)(()=>null!=o&&!!o.id&&o.id===(null==s?void 0:s.id),[null==o?void 0:o.id,null==s?void 0:s.id]),k=(0,n.useMemo)(()=>null!=o&&!!o.isAdmin||C,[null==o?void 0:o.isAdmin,C]),Z=(0,n.useMemo)(()=>null==o?void 0:o.isAdmin,[null==o?void 0:o.isAdmin]);(0,n.useEffect)(()=>{m()},[]);let T=k?"Public":void 0,P=(0,n.useCallback)(async()=>{if(null==s?void 0:s.id){let e=await fetch("/api/user/".concat(s.id),{method:"DELETE",headers:{"Content-Type":"application/json"}});200===e.status?g("User successfully banned"):g("Something went wrong","error")}},[null==s?void 0:s.id,g]);return s?(0,l.jsx)(x.Z,{children:(0,l.jsx)(i.Z,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-6 w-full",children:[b&&(0,l.jsx)("div",{className:"fixed bottom-8 left-8 bg-blue-500 rounded p-4 z-[100] flex gap-4 items-center shadow-md",children:(0,l.jsxs)("div",{children:[y.length," prompt",1!==y.length?"s":""," selected"]})}),(0,l.jsx)("div",{className:"flex items-center gap-4 pb-6 sm:pb-0 md:pb-0",children:(0,l.jsxs)("div",{className:"w-full flex items-center gap-12 justify-between flex-wrap",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-12 h-12",children:(0,l.jsx)(a.Z,{width:48,height:48,seed:null===(t=s.id)||void 0===t?void 0:t.slice(-8),image:s.image})}),(0,l.jsxs)("div",{className:"flex flex-col",children:[v,Z&&(0,l.jsx)("button",{onClick:()=>{navigator.clipboard.writeText((null==s?void 0:s.email)||""),g("Copied")},className:"text-xs text-white",children:null==s?void 0:s.email})]})]}),Z&&(0,l.jsx)(c.Z,{variant:"tertiary",size:"small",onClick:P,children:"Ban user"}),!d&&!C&&(0,l.jsx)(l.Fragment,{children:u&&(null==o?void 0:o.id)?(0,l.jsx)(J,{followDispatcherId:o.id,followTargetId:s.id}):(0,l.jsx)(K,{isLoggedOut:!0})})]})}),(0,l.jsxs)(p,{tabs:["Creations","Templates","Likes","Following","Followers"],onTabChange:()=>m(),children:[(0,l.jsxs)(l.Fragment,{children:[b?(0,l.jsx)(ei,{}):(0,l.jsx)("div",{className:(0,er.Z)("flex w-full flex-col md:flex-row relative"),children:k&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f,{filters:eo,filterIds:ed,queryKey:"filter",defaultFilter:T}),(0,l.jsx)(c.Z,{variant:"tertiary",size:"small",onClick:()=>N(!0),className:"relative md:absolute right-0 my-6 md:my-0",children:"Select"})]})}),(0,l.jsx)(h.Z,{query:"",userId:s.id,creations:!0,userName:s.username||"user",defaultFilter:T})]}),(0,l.jsxs)(l.Fragment,{children:[k&&(0,l.jsx)(f,{filters:eo,filterIds:ed,queryKey:"filter",defaultFilter:T}),(0,l.jsx)(eu,{userId:s.id,userName:s.username,defaultFilter:T})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f,{}),(0,l.jsx)(h.Z,{query:"",userId:s.id,likes:!0,userName:s.username||"user"})]}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(es,{requestType:"following",userProfile:{id:s.id,username:s.username}})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(es,{requestType:"followers",userProfile:{id:s.id,username:s.username}})})]})]})})}):null};var ef=em},85335:function(e,t,s){"use strict";s.d(t,{m:function(){return l}});let l=(e,t)=>e.replace("public","width=".concat(t))},97650:function(e,t,s){"use strict";let l;s.d(t,{YD:function(){return c}});var n=s(67294);let a=new Map,i=new WeakMap,r=0;function c({threshold:e,delay:t,trackVisibility:s,rootMargin:c,root:o,triggerOnce:d,skip:u,initialInView:m,fallbackInView:f,onChange:x}={}){var h;let[p,j]=n.useState(null),v=n.useRef(),[w,g]=n.useState({inView:!!m,entry:void 0});v.current=x,n.useEffect(()=>{let n;if(!u&&p)return n=function(e,t,s={},n=l){if(void 0===window.IntersectionObserver&&void 0!==n){let c=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof s.threshold?s.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}let{id:o,observer:d,elements:u}=function(e){let t=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var s;return`${t}_${"root"===t?(s=e.root)?(i.has(s)||(r+=1,i.set(s,r.toString())),i.get(s)):"0":e[t]}`}).toString(),s=a.get(t);if(!s){let l;let n=new Map,c=new IntersectionObserver(t=>{t.forEach(t=>{var s;let a=t.isIntersecting&&l.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=a),null==(s=n.get(t.target))||s.forEach(e=>{e(a,t)})})},e);l=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:c,elements:n},a.set(t,s)}return s}(s),m=u.get(e)||[];return u.has(e)||u.set(e,m),m.push(t),d.observe(e),function(){m.splice(m.indexOf(t),1),0===m.length&&(u.delete(e),d.unobserve(e)),0===u.size&&(d.disconnect(),a.delete(o))}}(p,(e,t)=>{g({inView:e,entry:t}),v.current&&v.current(e,t),t.isIntersecting&&d&&n&&(n(),n=void 0)},{root:o,rootMargin:c,threshold:e,trackVisibility:s,delay:t},f),()=>{n&&n()}},[Array.isArray(e)?e.toString():e,p,o,c,d,u,s,f,t]);let b=null==(h=w.entry)?void 0:h.target;n.useEffect(()=>{p||!b||d||u||g({inView:!!m,entry:void 0})},[p,b,d,u,m]);let y=[j,w.inView,w.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}}},function(e){e.O(0,[2876,6142,9774,2888,179],function(){return e(e.s=10796)}),_N_E=e.O()}]);
//# sourceMappingURL=[username]-b11f957409aa3e15.js.map