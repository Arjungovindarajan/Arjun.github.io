(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2417],{7532:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return s(43982)}])},43982:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return B}});var r=s(85893),l=s(55628),n=s(7329),o=s(76464),i=s(5357),a=s(92842),d=s(94112),u=s(29653),c=s(55180),m=s(73580),f=s(70125),p=s(33824),h=s(43209),g=s(10038),x=s(91629),v=s(12596),b=s(41660),w=s(53979),j=s(72146),y=s(77939),N=s(60789),S=s(21330),C=s(84183),k=s(91254),I=s(41695),P=s(96486),E=s(2962),_=s(11163),D=s(67294),M=s(86501),L=s(65820),H=s(71592),O=s(53738);let R=e=>{let{reusePrompt:t,reuseTheme:s}=e,{addCreditsUsed:R}=(0,C.j)(),B=(0,N.p$)(),Z=(0,_.useRouter)(),{mobileDrawerOpen:A,setMobileDrawerOpen:V}=(0,m.j)(),[K,U]=D.useState(!1),q=(0,N.Yw)(),{createState:z,setCreateState:T}=(0,N.RX)(),{setTheme:X,theme:Y}=(0,N.Lc)(),{visibleItems:W}=(0,N.Ei)(),[F,G]=D.useState(!1),{midjourneyCreationStatus:$}=(0,N.V4)(),{negativeStyles:J,setNegativeStyles:Q}=(0,N.tI)(),ee=(0,S.il)(),et=(0,S.eb)(),es=D.useRef(null),er=D.useRef(null),{setStylesTab:el}=(0,H.L)(),{applyReferenceImage:en}=(0,N.YN)(),[eo,ei]=D.useState(!1),{create:ea}=(0,N.RO)(),{user:ed}=(0,b.kP)();D.useEffect(()=>{eo&&(ea(),Z.replace(Z.pathname,Z.asPath.split("?")[0],{shallow:!0}),ei(!1))},[eo,ea]),D.useEffect(()=>{et()},[]),D.useEffect(()=>{!ee.length||J&&J.length||t||s||Q(ee.map(e=>({type:"modifier",id:e.id,data:e,enabled:!0})))},[ee]);let eu=D.useCallback(e=>{"prompt"===e.post.type&&R(e.post.data.assets.length)},[R]);D.useEffect(()=>{let e=window.innerWidth>=1024;G(e);let t=()=>{let e=window.innerWidth>=1024;G(e)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),D.useEffect(()=>{let e=async()=>{if(t){var e,s,r,l,n,o,i;let a;let d=(0,I.X)(t),u=(0,P.cloneDeep)(z),c=Z.query.skipRef,m=Z.query.skipCN,f=Z.query.autoCreate,p=(0,k.M)(t);p&&p.length&&(u.activeStyles=p);let h=(0,P.get)(t,"meta.negativeStyles",[]);if(h.length&&(u.negativeStyles=h),(null===(e=t.provider)||void 0===e?void 0:e.name)&&y.K.includes(null===(s=t.provider)||void 0===s?void 0:s.name))u.service=null===(r=t.provider)||void 0===r?void 0:r.name;else if(v.Ux.includes(null===(l=t.provider)||void 0===l?void 0:l.name)){u.service="Stable Diffusion",u.customModel=null===(n=t.provider)||void 0===n?void 0:n.name;let g=v.H$[null===(o=t.provider)||void 0===o?void 0:o.name];"1.5"===g.stableDiffusionVersion?u.stableDiffusionVersion="stable-diffusion-v1-5":"2.1"===g.stableDiffusionVersion&&(u.stableDiffusionVersion="stable-diffusion-512-v2-1"),(null==g?void 0:null===(i=g.sizeOptions)||void 0===i?void 0:i.output)&&(u.output=g.sizeOptions.output)}u.prompt=d||"";let x=(0,P.get)(t,"meta.engine"),b=(0,P.get)(t,"meta.sampler"),N=(0,P.get)(t,"meta.steps"),S=(0,P.get)(t,"meta.cfgScale"),C=(0,P.get)(t,"meta.referenceImage"),E=(0,P.get)(t,"meta.promptStrength"),_=(0,P.get)(t,"meta.model"),D=(0,P.get)(t,"meta.effects"),M=w.KH.map(e=>e.toUpperCase()).findIndex(e=>String(e).toUpperCase()===e);if(b&&-1!==M&&(u.sampler=w.KH[M]),_&&("PhChroma"===_||"Megamodel v2"===_?u.customModel="PhChroma":u.customModel=_),x&&(u.stableDiffusionVersion=x),N&&(u.steps=N),S&&(u.cfgScale=S),D&&(u.effects=D),C&&!c&&(a=await en(C)),E&&(u.referencePercentage=E),t.assets&&t.assets[0]&&!f){let{canvas:L,output:H}=(0,j.G)(t.assets[0].width||0,t.assets[0].height||0);u.canvas=L,u.output=H}let O=(0,P.get)(t,"meta.controlNetModel"),R=(0,P.get)(t,"meta.controlNetOptions"),B=(0,P.get)(t,"meta.controlNetItems");!m&&(B&&B.length?u.controlNetItems=B:O&&a?u.controlNetItems=[{model:O,image:a,settings:R,enabled:!0,id:Math.random().toString(36).substr(2,9)}]:a&&(u.controlNetItems=[{model:"none",image:a,settings:R,enabled:!0,id:Math.random().toString(36).substr(2,9)}])),t&&T(u),el("styles"),f&&ei(!0)}};e()},[t]),D.useEffect(()=>{s&&X(s)},[s,X]),D.useEffect(()=>()=>{q()},[q]),(0,N.fF)(null==ed?void 0:ed.id);let ec=()=>{Z.push("/profile")},em=()=>{if(er.current&&es.current){let{top:e}=er.current.getBoundingClientRect(),{height:t}=es.current.getBoundingClientRect();return e<t}return!1};return D.useEffect(()=>{if(er.current&&!em()){var e;null===(e=es.current)||void 0===e||e.scrollTo(0,0)}},[B]),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row items-start p-0 relative w-full md:h-screen",children:[(0,r.jsx)(E.PB,{title:"Create | Prompt Hunt - Your home for exploring, creating, and sharing AI art",description:"Create, explore, and share AI art using Stable Diffusion, DALL\xb7E, and Midjourney",openGraph:{url:"https://www.prompthunt.com",title:"Prompt Hunt - Your home for exploring, creating, and sharing AI art",description:"Create, explore, and share AI art using Stable Diffusion, DALL\xb7E, and Midjourney",images:[{url:"/cover.jpg",width:1920,height:1080,alt:"Prompt Hunt Cover",type:"image/jpeg"}]}}),F?(0,r.jsx)("div",{className:"flex flex-col items-start flex-grow-0 h-screen bg-neutral-800 py-6 pl-4 pr-0 gap-2",children:(0,r.jsx)(u.N,{})}):(0,r.jsx)(l.Z,{onBack:()=>{Z.push("/")},title:"Create",className:"lg:hidden"}),F?(0,r.jsx)("div",{className:"block w-[20vw] min-w-[390px] bg-neutral-800 border-r-4 border-t-4 border-b-4 border-neutral-800 h-full overflow-y-scroll overflow-x-hidden scrollbar-thin scrollbar-thumb-neutral-600/30 scrollbar-track-transparent scrollbar-thumb-rounded-md",children:(0,r.jsx)(c.K,{})}):(0,r.jsx)(p.ZP,{display:["flex","flex","none"],open:A,setOpen:e=>V(e),fullWidth:!0,children:(0,r.jsx)(c.K,{})}),F?(0,r.jsxs)("div",{ref:es,className:"items-center block w-full h-screen max-h-screen overflow-y-scroll",children:[(0,r.jsx)(f.Z,{}),(0,r.jsx)("div",{className:"max-w-[768px] grow shrink items-center relative flex m-auto px-4",children:(null==ed?void 0:ed.subscriptionPlan)==="free"&&(0,r.jsx)(O.Z,{})}),(0,r.jsxs)("div",{className:"max-w-[768px] grow shrink items-center relative flex-column content-center justify-center lg:m-auto lg:px-4 overflow-y-scroll md:overflow-visible max-h-[calc(100vh-207px)] md:max-h-max scrollbar-thin scrollbar-thumb-neutral-700 scrollbar-track-transparent scrollbar-thumb-rounded-md",children:[(0,r.jsx)("div",{className:"block absolute top-10 left-[37px] w-0.5 h-full bg-neutral-800 "}),(0,r.jsx)(n.c,{midjourneyCreationInProgress:$.isInProgress,onCreated:eu}),(0,r.jsx)("div",{className:"ml-20 mt-10",children:$.isInProgress&&(0,r.jsx)(x.b,{progress:$.progress,asset:$.asset})}),(0,r.jsx)("div",{ref:er,children:(0,r.jsx)(L.M,{children:B&&(0,r.jsx)(a.Z,{})})}),(0,r.jsx)("div",{className:"w-[576px] mt-4",children:(0,r.jsx)(h.f,{onlyByLoggedInUser:!0,numberOfItemsToShow:K?void 0:W,hideSkeleton:!0})}),(0,r.jsx)(d.Z,{onClick:()=>K?ec():U(!0),text:K?"See all":"Show my history"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.q,{midjourneyCreationInProgress:$.isInProgress,onCreated:eu}),(0,r.jsxs)("div",{className:"pt-[66px] w-full pb-[125px]",children:[!W&&!s&&!Y&&!B&&!K&&(0,r.jsx)(i.D,{onShowHistory:()=>{U(!0)},fullHeight:0===W&&!B}),(0,r.jsxs)("div",{className:"px-4",children:[(0,r.jsx)(L.M,{children:B&&(0,r.jsx)(a.Z,{})}),(W||s||Y||K)&&(0,r.jsx)(h.f,{onlyByLoggedInUser:!0,hideSkeleton:!0})]})]})]}),(0,r.jsx)(M.x7,{position:"bottom-left",containerClassName:"mb-10 md:mb-0"}),(0,r.jsx)(g.B,{})]})};var B=!0;t.default=R}},function(e){e.O(0,[6556,3874,2876,8307,630,3777,2962,719,6893,4953,6142,3713,9937,4664,3462,4065,7538,3262,8312,9774,2888,179],function(){return e(e.s=7532)}),_N_E=e.O()}]);
//# sourceMappingURL=create-4e029e2b67e706af.js.map